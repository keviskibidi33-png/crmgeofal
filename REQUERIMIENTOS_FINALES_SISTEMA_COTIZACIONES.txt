# REQUERIMIENTOS FINALES - SISTEMA DE COTIZACIONES
# CRM GeoFal - Laboratorio de Materiales
# Versi√≥n: 1.0 - Enero 2025

## RESUMEN EJECUTIVO
Sistema completo de cotizaciones para el laboratorio GeoFal con 8 variantes de condiciones espec√≠ficas, plantillas editables, generaci√≥n autom√°tica de PDFs y integraci√≥n completa con el CRM existente.

## 1. DATOS FIJOS DEL CLIENTE (SIEMPRE VISIBLES)
- **Cliente:** Nombre de la empresa solicitante
- **R.U.C.:** RUC de la empresa solicitante
- **Contacto:** Nombre del contacto quien solicit√≥ la cotizaci√≥n
- **Tel√©fono:** Tel√©fono del contacto quien solicit√≥ la cotizaci√≥n
- **Correo electr√≥nico:** Correo del contacto quien solicit√≥ la cotizaci√≥n
- **Ubicaci√≥n del proyecto:** Ubicaci√≥n del proyecto quien solicit√≥ la cotizaci√≥n
- **Nombre del proyecto:** Nombre del Proyecto quien solicit√≥ la cotizaci√≥n
- **Nombre del servicio:** Tipo de servicio a cotizar

## 2. DATOS DE LA COTIZACI√ìN (POR PARTE DE GEOFAL)
- **Fecha de Solicitud:** Fecha de solicitante del servicio
- **Fecha de Emisi√≥n:** Fecha de env√≠o de cotizaci√≥n
- **Tel√©fono:** Tel√©fono del contacto quien solicit√≥ la cotizaci√≥n
- **Comercial:** Nombre del ejecutivo comercial quien realiz√≥ la cotizaci√≥n

## 3. DETALLE DE √çTEMS (TABLA EDITABLE)
- **C√≥digo o nombre del ensayo/servicio**
- **Descripci√≥n Ensayo**
- **Norma** (ASTM, NTP, MTC)
- **Costo Unitario en soles (S/)**
- **Cantidad**
- **Costo Parcial en soles (S/)**

## 4. LAS 8 VARIANTES DE CONDICIONES ESPEC√çFICAS

### üèóÔ∏è **VARIANTE 1: MUESTRA DE SUELO Y AGREGADO** (PRINCIPAL)
**CONDICIONES ESPEC√çFICAS:**
- El cliente deber√° enviar al laboratorio, para los ensayos en suelo y agregados, la cantidad m√≠nima de 100 kg por cada muestra.
- El cliente deber√° de entregar las muestras debidamente identificadas.
- El cliente deber√° especificar la Norma a ser utilizada para la ejecuci√≥n del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.
- El cliente deber√° entregar las muestras en las instalaciones del LEM, ubicado en la Av. Mara√±√≥n N¬∞ 763, Los Olivos, Lima.

**SERVICIOS T√çPICOS:**
- Clasificaci√≥n suelo SUCS - AASHTO
- L√≠mite l√≠quido y L√≠mite Pl√°stico del Suelo
- An√°lisis granulom√©trico por tamizado en agregado
- Pr√≥ctor modificado
- Gravedad espec√≠fica de los s√≥lidos del suelo
- California Bearing Ratio (CBR)
- Equivalente de arena
- Abrasi√≥n los √Ångeles de agregado grueso

**PRECIOS:** S/ 20 - S/ 300 por ensayo

### üèóÔ∏è **VARIANTE 2: CONTROL DE CALIDAD DE CONCRETO FRESCO** (PRINCIPAL)
**CONDICIONES ESPEC√çFICAS:**
- El cliente deber√° de programar el servicio, con 24 horas de anticipaci√≥n.
- Para el ensayo de control de calidad de concreto fresco en obra, se moldear√° 6 probetas, ensayo slump, control de temperatura, en laboratorio las probetas se colocar√° en c√°mara de curado, el ensayo de compresi√≥n de las probetas ser√°n 3 a 7 d√≠as y 3 a 28 d√≠as.
- El control de calidad del concreto fresco se sacar√° cada 50m3 a uno de los mixer donde se har√° todos los ensayos respectivos mencionados, o por d√≠a as√≠ no se haya llegado los 50m3.
- El cliente deber√° especificar la Norma a ser utilizada para la ejecuci√≥n del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.

**SERVICIOS T√çPICOS:**
- Muestreo de concreto fresco (6 probetas)
- Ensayo de asentamiento del concreto (slump)
- Control de temperatura en el concreto
- Resistencia a la compresi√≥n (3 a 7 d√≠as y 3 a 28 d√≠as)
- Movilidad del muestreo y recojo de las probetas

**PRECIOS:** S/ 370 - S/ 400 por servicio

### üèóÔ∏è **VARIANTE 3: EXTRACCI√ìN DE DIAMANTINA** (PRINCIPAL)
**CONDICIONES ESPEC√çFICAS:**
- Movilizaci√≥n y desmovilizaci√≥n de equipos y del personal t√©cnico, estar√° a cargo de GEOFAL.
- Resane de estructura de concreto con sika rep 500 y Sikadur 32, estar√° a cargo de GEOFAL.
- El servicio no incluye trabajos de acabados como pintura, may√≥lica y otros.
- El √°rea de trabajo, zona de extracci√≥n de diamantina, tiene que estar libre de interferencia.
- La extracci√≥n de diamantina se realizar√° en 2 d√≠as en campo, en laboratorio se realizar√° el tallado y refrentado de diamantina, el ensayo de resistencia a la compresi√≥n de testigo de diamantina se realizar√° en 5 d√≠as (el tiempo de ensayo obedece a la normativa vigente).
- Costo de resane insumos 250 soles, este costo se distribuir√° de acuerdo con el n√∫mero de perforaciones donde se har√° las extracciones de diamantina.

**SERVICIOS T√çPICOS:**
- Extracci√≥n de testigo diamantina con broca de 4" en pavimento flexible
- Determinaci√≥n del Coeficiente de Resistencia al Deslizamiento (P√©ndulo)
- Movilizaci√≥n de personal y equipo
- Resane de pavimento

**PRECIOS:** S/ 200 - S/ 2,400 por servicio

### üèóÔ∏è **VARIANTE 4: ALBA√ëILER√çA** (PRINCIPAL)
**CONDICIONES ESPEC√çFICAS:**
- El cliente deber√° enviar al laboratorio, 20 ladrillo de cada tipo, en buen estado y sin presentar fisuras.
- El cliente deber√° de entregar las muestras debidamente identificadas.
- El cliente deber√° especificar la Norma a ser utilizada para la ejecuci√≥n del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.
- El cliente deber√° entregar las muestras en las instalaciones del LEM, ubicado en la Av. Mara√±√≥n N¬∞ 763, Los Olivos, Lima.

**SERVICIOS T√çPICOS:**
- Resistencia a la compresi√≥n de unidades de alba√±iler√≠a
- Ensayos en ladrillos y bloquetas de concreto
- M√∫ltiples tipos de ensayos seg√∫n norma

**PRECIOS:** S/ 130 - S/ 200 por ensayo

### üèóÔ∏è **VARIANTE 5: ESTUDIO DE SUELOS** (PRINCIPAL)
**CONDICIONES ESPEC√çFICAS:**
- El precio incluye IGV y est√°n expresados en nuevos soles.
- El cliente deber√° enviar al laboratorio para los ensayos la cantidad m√≠nima de 60 kg por cada muestra.
- El cliente deber√° entregar las muestras debidamente identificadas.
- El cliente deber√° entregar las muestras en las instalaciones del LEM, ubicado en la Av. R√≠o Mara√±√≥n 763, Los Olivos, Lima.
- El cliente deber√° coordinar previamente los permisos necesarios para realizar el trabajo.
- La presente propuesta incluye seguro SCTR, EPP.
- La presente propuesta incluye movilizaci√≥n y desmovilizaci√≥n del personal y equipo.
- La presente propuesta NO incluye eliminaci√≥n de desmonte.
- La presente propuesta NO incluye rotura de la estructura.
- La presente propuesta NO incluye resane de estructura.
- La presente propuesta NO incluye acabados y/o alg√∫n servicio ajeno a lo cotizado.

**SERVICIOS T√çPICOS:**
- Estudio de suelos con fines de cimentaci√≥n
- Prospecci√≥n (calicata) de 3.00 m de profundidad
- M√∫ltiples ensayos de laboratorio
- Dise√±o de cimentaci√≥n
- An√°lisis de par√°metros del suelo

**PRECIOS:** S/ 1,100 por estudio completo

### üèóÔ∏è **VARIANTE 6: DIAMANTINA PARA PASES** (ADICIONAL)
**CONDICIONES ESPEC√çFICAS:**
- El cliente deber√° de programar el servicio, Extracci√≥n diamantina, con 24 horas de anticipaci√≥n.
- El √°rea de trabajo, zona de extracci√≥n de diamantina, deber√° estar libre de interferencia.
- Para extraer la diamantina, se ubicar√° el acero con un esc√°ner.
- Movilizaci√≥n y desmovilizaci√≥n de equipos y del personal t√©cnico, estar√° a cargo de Geofal.

### üèóÔ∏è **VARIANTE 7: VIGA BECKELMAN** (ADICIONAL)
**CONDICIONES ESPEC√çFICAS:**
- El cliente deber√° de programar el servicio, Ensayo de Deflexi√≥n, con 24 horas de anticipaci√≥n.
- El √°rea de trabajo tiene que estar habilitado.
- El cliente deber√° especificar la Norma a ser utilizada para la ejecuci√≥n del ensayo, caso contrario se considera Norma ASTM o NTP o MTC vigente de acuerdo con el alcance del laboratorio.
- Especificar las caracter√≠sticas del cami√≥n.

### üèóÔ∏è **VARIANTE 8: PROBETAS** (ADICIONAL)
**CONDICIONES ESPEC√çFICAS:**
- El cliente debe proporcionar las probetas antes del ingreso a obra.
- El cliente deber√° de entregar las muestras debidamente identificadas.
- El cliente deber√° especificar la Norma a ser utilizada para la ejecuci√≥n del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.
- El cliente deber√° entregar las muestras en las instalaciones del LEM, ubicado en la Av. Mara√±√≥n N¬∞ 763, Los Olivos, Lima.

## 5. FUNCIONALIDADES DE EDICI√ìN DE PLANTILLAS

### üìù **EDITOR DE PLANTILLAS**
- **Interfaz visual** para editar plantillas de cotizaci√≥n
- **Drag & drop** para reorganizar elementos
- **Editor WYSIWYG** para texto y formato
- **Vista previa en tiempo real** de la plantilla
- **Guardado autom√°tico** de cambios
- **Historial de versiones** de plantillas

### üé® **PERSONALIZACI√ìN VISUAL**
- **Cambio de colores** y fuentes
- **Logo personalizable** por cliente
- **M√°rgenes y espaciado** ajustables
- **Encabezados y pies de p√°gina** editables
- **Formato de tablas** personalizable
- **Elementos gr√°ficos** (l√≠neas, bordes, sombras)

### üìã **CONTENIDO EDITABLE**
- **Textos de condiciones** espec√≠ficas por variante
- **Informaci√≥n de contacto** de GEOFAL
- **Datos bancarios** y formas de pago
- **T√©rminos y condiciones** generales
- **Informaci√≥n legal** y normativa
- **Mensajes personalizados** por cliente

### üîß **CONFIGURACI√ìN AVANZADA**
- **Variables din√°micas** (fecha, n√∫mero de cotizaci√≥n, cliente)
- **C√°lculos autom√°ticos** (IGV, totales, descuentos)
- **Validaciones personalizadas** por tipo de servicio
- **Campos condicionales** seg√∫n variante seleccionada
- **Plantillas por usuario** o por rol
- **Importaci√≥n/exportaci√≥n** de plantillas

## 6. CONDICIONES DE PAGO

### üí∞ **OPCIONES DE PAGO DISPONIBLES:**
1. **Adelantado:** El pago del servicio deber√° ser realizado por Adelantado
2. **50% Adelanto:** Adelanto el 50% y saldo previo a la entrega del Informe
3. **Cr√©dito 7 d√≠as:** Cr√©dito a 7 d√≠as, previa orden de servicio
4. **Cr√©dito 15 d√≠as:** Cr√©dito a 15 d√≠as, previa orden de servicio
5. **Cr√©dito 30 d√≠as:** Cr√©dito a 30 d√≠as, previa orden de servicio
6. **Valorizaci√≥n mensual:** El pago del servicio se realizar√° de acuerdo a la valorizaci√≥n mensual

### üè¶ **DATOS BANCARIOS DE GEOFAL:**
- **Raz√≥n Social:** Geofal S.A.C.
- **RUC:** 20549356762

**Cuentas bancarias:**
- **Banco de La Naci√≥n:** N¬∞ 00-074-045472
- **Interbank:** N¬∞ 200-3005201096 (CCI: 003-200-003005201096-31)
- **BCP:** N¬∞ 192 2024 3030 04 (CCI: 002-192-002 02430 3004-34)
- **BBVA:** N¬∞ 0011-0174-0100082311-00 (CCI: 011-174-000100082311-00)

## 7. INFORMACI√ìN DE GEOFAL

### üè¢ **DATOS DE LA EMPRESA:**
- **Direcci√≥n:** Av. Mara√±√≥n N¬∞ 763, Los Olivos, Lima
- **Tel√©fonos:** (01) 9051911 / (01) 7543070-956057624-993077479 - 982 429 895
- **Web:** www.geofal.com.pe
- **Emails:** asesorcomercial@geofal.com.pe / laboratorio@geofal.com.pe

### üìã **VALIDEZ DE LA OFERTA:**
- **30 d√≠as calendario** desde la fecha de emisi√≥n
- Si la cotizaci√≥n lleg√≥ al l√≠mite de su validez, solicitar una actualizaci√≥n

### ‚è∞ **HORARIO DE ATENCI√ìN:**
- **Lunes a Viernes:** 8:30am a 1:00pm y 2:00pm a 5:30pm
- **S√°bado:** 8:30am a 12:30pm

## 8. NORMAS T√âCNICAS UTILIZADAS

### üìö **NORMAS ASTM:**
- ASTM D2487-17Œµ1 (Clasificaci√≥n de suelos)
- ASTM D4318-17Œµ1 (L√≠mites de consistencia)
- ASTM C136/C136M-19 (An√°lisis granulom√©trico)
- ASTM D1557-12 (Pr√≥ctor modificado)
- ASTM D854-14 (Gravedad espec√≠fica)
- ASTM C127-24 (Absorci√≥n de agregado grueso)
- ASTM D1883-21 (CBR)
- ASTM D2419-22 (Equivalente de arena)
- ASTM C131/C131M-20 (Abrasi√≥n Los √Ångeles)

### üìö **NORMAS NTP:**
- NTP 339.150 (Descripci√≥n visual-manual)
- NTP 339.152 (An√°lisis qu√≠mico)
- NTP 339.171 (Corte directo)
- NTP 339.176 (pH)
- NTP 339.143 (Densidad natural)
- NTP 399.613 (Resistencia alba√±iler√≠a)
- NTP 399.604 (Unidades de alba√±iler√≠a)
- NTP 331.041 (Ladrillos)

### üìö **NORMAS MTC:**
- MTC E-219 (Contenido de materia org√°nica)
- MTC E 1004 (Coeficiente de resistencia al deslizamiento)
- MTC E 504 (Ensayo espec√≠fico)

## 9. ESTRUCTURA DE BASE DE DATOS

### üóÑÔ∏è **TABLA PRINCIPAL: quotes**
```sql
CREATE TABLE quotes (
    id SERIAL PRIMARY KEY,
    quote_number VARCHAR(20) UNIQUE NOT NULL,
    client_id INTEGER REFERENCES companies(id),
    project_id INTEGER REFERENCES projects(id),
    service_type VARCHAR(100),
    variant_id INTEGER REFERENCES quote_variants(id),
    request_date DATE,
    issue_date DATE,
    commercial_user_id INTEGER REFERENCES users(id),
    status VARCHAR(20) DEFAULT 'borrador',
    total_amount DECIMAL(12,2),
    igv_percentage DECIMAL(5,2) DEFAULT 18.00,
    payment_condition VARCHAR(20) DEFAULT 'adelantado',
    validity_days INTEGER DEFAULT 30,
    template_id INTEGER REFERENCES quote_templates(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### üóÑÔ∏è **TABLA DE √çTEMS: quote_items**
```sql
CREATE TABLE quote_items (
    id SERIAL PRIMARY KEY,
    quote_id INTEGER REFERENCES quotes(id) ON DELETE CASCADE,
    service_code VARCHAR(20),
    service_description TEXT,
    norm_standard VARCHAR(100),
    unit_cost DECIMAL(10,2),
    quantity INTEGER DEFAULT 1,
    partial_cost DECIMAL(10,2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### üóÑÔ∏è **TABLA DE VARIANTES: quote_variants**
```sql
CREATE TABLE quote_variants (
    id SERIAL PRIMARY KEY,
    variant_name VARCHAR(100),
    variant_description TEXT,
    conditions_text TEXT,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### üóÑÔ∏è **TABLA DE PLANTILLAS: quote_templates**
```sql
CREATE TABLE quote_templates (
    id SERIAL PRIMARY KEY,
    template_name VARCHAR(100),
    template_content TEXT,
    variant_id INTEGER REFERENCES quote_variants(id),
    is_default BOOLEAN DEFAULT false,
    created_by INTEGER REFERENCES users(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## 10. FUNCIONALIDADES DEL SISTEMA

### üöÄ **GENERACI√ìN DE COTIZACIONES**
- **N√∫mero autom√°tico:** Formato xxx-XX (ejemplo: 2000-25)
- **Selecci√≥n de variante:** Dropdown con las 8 variantes
- **Aplicaci√≥n autom√°tica** de condiciones espec√≠ficas
- **C√°lculos autom√°ticos:** Costos, IGV, totales
- **Validaciones:** Datos del cliente, precios, condiciones

### üìÑ **GENERACI√ìN DE PDF**
- **Plantilla personalizable** por variante
- **Nombre del archivo:** "Cotizaci√≥n {n√∫mero} LEM-GEOFAL-{cliente}"
- **Formato profesional** con logo y datos de GEOFAL
- **Condiciones espec√≠ficas** incluidas autom√°ticamente
- **Informaci√≥n de pago** y validez

### üìß **ENV√çO AUTOM√ÅTICO**
- **Email al cliente** con PDF adjunto
- **Plantilla de email** personalizable
- **Confirmaci√≥n de env√≠o** y seguimiento
- **Recordatorios** de vencimiento

### üîç **B√öSQUEDA Y FILTROS**
- **Por cliente, proyecto, n√∫mero**
- **Filtros por fecha, estado, variante**
- **Ordenamiento m√∫ltiple**
- **Exportaci√≥n** de resultados

### üìä **REPORTES Y ESTAD√çSTICAS**
- **Cotizaciones por per√≠odo**
- **Tasa de conversi√≥n** (cotizaci√≥n ‚Üí factura)
- **M√©tricas por variante**
- **KPIs comerciales**

## 11. FLUJO DE TRABAJO

### üìã **PROCESO DE CREACI√ìN:**
1. **Cliente solicita** cotizaci√≥n
2. **Ejecutivo comercial** crea nueva cotizaci√≥n
3. **Selecciona variante** y tipo de servicio
4. **Agrega √≠tems** con precios y cantidades
5. **Sistema calcula** totales autom√°ticamente
6. **Revisa y ajusta** si es necesario
7. **Genera PDF** con plantilla correspondiente
8. **Env√≠a por email** al cliente

### üìà **SEGUIMIENTO DE ESTADOS:**
1. **Borrador** ‚Üí Cotizaci√≥n en creaci√≥n
2. **Enviada** ‚Üí Enviada al cliente
3. **Aceptada** ‚Üí Cliente acepta la cotizaci√≥n
4. **Rechazada** ‚Üí Cliente rechaza la cotizaci√≥n
5. **Vencida** ‚Üí Pas√≥ fecha de validez

### üîÑ **CONVERSI√ìN A FACTURA:**
- **Cotizaci√≥n aceptada** ‚Üí Factura
- **Mantener referencia** entre cotizaci√≥n y factura
- **Copiar √≠tems** y precios
- **Actualizar estado** de la cotizaci√≥n

## 12. INTEGRACI√ìN CON M√ìDULOS EXISTENTES

### üîó **M√ìDULOS A INTEGRAR:**
- **Companies:** Datos del cliente
- **Projects:** Informaci√≥n del proyecto
- **Users:** Ejecutivo comercial
- **Invoices:** Conversi√≥n de cotizaci√≥n a factura
- **Audit:** Registro de todas las operaciones
- **Notifications:** Env√≠o de emails

### üîÑ **SINCRONIZACI√ìN:**
- **Datos del cliente** actualizados autom√°ticamente
- **Informaci√≥n del proyecto** sincronizada
- **Usuarios y permisos** integrados
- **Auditor√≠a completa** de operaciones

## 13. CRITERIOS DE ACEPTACI√ìN

### ‚úÖ **FUNCIONALIDADES B√ÅSICAS:**
- [ ] CRUD completo de cotizaciones
- [ ] 8 variantes implementadas
- [ ] C√°lculos autom√°ticos funcionando
- [ ] Generaci√≥n de PDF correcta
- [ ] Env√≠o de emails operativo

### ‚úÖ **FUNCIONALIDADES AVANZADAS:**
- [ ] Editor de plantillas funcional
- [ ] Personalizaci√≥n visual completa
- [ ] B√∫squeda y filtros operativos
- [ ] Reportes y estad√≠sticas
- [ ] Integraci√≥n con m√≥dulos existentes

### ‚úÖ **CALIDAD Y RENDIMIENTO:**
- [ ] Pruebas unitarias > 90%
- [ ] Pruebas de integraci√≥n pasando
- [ ] Rendimiento aceptable (< 2 segundos)
- [ ] Seguridad validada
- [ ] Documentaci√≥n completa

## 14. PLAN DE IMPLEMENTACI√ìN

### üéØ **FASE 1: FUNCIONALIDADES B√ÅSICAS** (3-4 semanas)
- Base de datos y modelos
- API b√°sica
- Generaci√≥n de PDF b√°sico
- Interfaz b√°sica

### üéØ **FASE 2: VARIANTES Y CONDICIONES** (2-3 semanas)
- 8 variantes implementadas
- Plantillas espec√≠ficas
- Validaciones por variante

### üéØ **FASE 3: FUNCIONALIDADES AVANZADAS** (3-4 semanas)
- Estados y transiciones
- Env√≠o de emails
- Clonaci√≥n y versionado
- B√∫squeda y reportes

### üéØ **FASE 4: EDITOR DE PLANTILLAS** (2-3 semanas)
- Editor visual de plantillas
- Personalizaci√≥n completa
- Integraci√≥n con facturaci√≥n
- Notificaciones en tiempo real

## 15. CONCLUSI√ìN

El sistema de cotizaciones para el laboratorio GeoFal es un m√≥dulo complejo que requiere:

1. **8 variantes de condiciones** espec√≠ficas (5 principales + 3 adicionales)
2. **Editor de plantillas** completamente funcional
3. **Generaci√≥n autom√°tica** de PDFs personalizables
4. **Integraci√≥n completa** con el CRM existente
5. **Flujo de trabajo** bien definido desde creaci√≥n hasta facturaci√≥n

La implementaci√≥n debe ser por fases, priorizando las funcionalidades b√°sicas y luego agregando las caracter√≠sticas avanzadas seg√∫n las necesidades del negocio.

**Duraci√≥n total estimada:** 14 semanas
**Recursos necesarios:** 1 Backend + 1 Frontend + 1 Full-stack
**Entregas:** Cada 2-3 semanas con valor incremental

---

**Documento creado:** Enero 2025
**Versi√≥n:** 1.0
**Estado:** Listo para implementaci√≥n
**Pr√≥ximo paso:** Pull request a GitHub
