ğŸ¯ SISTEMA DE COTIZACIONES INTELIGENTES - INSTRUCCIONES COMPLETAS
================================================================

ğŸ“… Fecha: 03 de Octubre, 2025
ğŸ‘¥ Para: Vendedores, FacturaciÃ³n y Jefa Comercial

================================================================
ğŸš€ FLUJO COMPLETO DEL SISTEMA
================================================================

ğŸ“‹ PASO 1: VENDEDOR CREA COTIZACIÃ“N INTELIGENTE
------------------------------------------------
1. Ir a: http://localhost:3000/cotizaciones/inteligente
2. Seleccionar categorÃ­a principal:
   ğŸ§ª Laboratorio (para ensayos, anÃ¡lisis, pruebas)
   âš™ï¸ IngenierÃ­a (para diseÃ±o, consultorÃ­a, auditorÃ­a)
3. Llenar datos del cliente y proyecto
4. Agregar Ã­tems de la cotizaciÃ³n (cÃ³digos como SU36, AG20, CO01)
5. Hacer clic en "ğŸ’¾ GUARDAR COTIZACIÃ“N"
6. âœ… El sistema genera automÃ¡ticamente un cÃ³digo Ãºnico (ej: COT-20251003-123)
7. Descargar PDF de la cotizaciÃ³n
8. Enviar PDF al cliente

ğŸ“‹ PASO 2: VENDEDOR SUBE COMPROBANTE DE PAGO
--------------------------------------------
1. Ir a: http://localhost:3000/comprobantes-pago
2. Hacer clic en "â• NUEVO COMPROBANTE"
3. Seleccionar la cotizaciÃ³n especÃ­fica de la lista (por cÃ³digo)
4. Subir archivos:
   ğŸ“„ CotizaciÃ³n PDF (la que se enviÃ³ al cliente)
   ğŸ“„ Factura PDF o imÃ¡genes del comprobante
5. Llenar datos del pago (monto, fecha, mÃ©todo)
6. Hacer clic en "ğŸ’¾ GUARDAR COMPROBANTE"
7. âœ… El sistema notifica automÃ¡ticamente a FacturaciÃ³n

ğŸ“‹ PASO 3: FACTURACIÃ“N APRUEBA Y ALIMENTA EMBUDO
------------------------------------------------
1. Ir a: http://localhost:3000/comprobantes-pago
2. Ver lista de comprobantes pendientes
3. Hacer clic en "ğŸ‘ï¸ VER" en el comprobante
4. Revisar archivos adjuntos (cotizaciÃ³n + factura)
5. Ingresar el MONTO REAL PAGADO por el cliente
6. Hacer clic en "âœ… APROBAR"
7. âœ… El sistema automÃ¡ticamente:
   - Cambia estado de cotizaciÃ³n a "aprobada"
   - Analiza todos los Ã­tems de la cotizaciÃ³n
   - Mapea cada Ã­tem a su servicio padre y categorÃ­a
   - Alimenta el embudo de ventas con datos precisos
   - Notifica al vendedor sobre la aprobaciÃ³n

ğŸ“‹ PASO 4: JEFA COMERCIAL VE MÃ‰TRICAS DEL EMBUDO
------------------------------------------------
1. Ir a: http://localhost:3000/dashboard
2. Ver mÃ©tricas automÃ¡ticas:
   ğŸ“Š Total de ventas por categorÃ­a (Laboratorio/IngenierÃ­a)
   ğŸ“Š Cantidad de cotizaciones aprobadas
   ğŸ“Š Servicios mÃ¡s vendidos
   ğŸ“Š Servicios menos vendidos
   ğŸ“Š ComparaciÃ³n: Monto cotizado vs Monto real pagado
3. Filtrar por:
   ğŸ·ï¸ CategorÃ­a principal
   ğŸ“… PerÃ­odo de tiempo
   ğŸ‘¤ Vendedor especÃ­fico

================================================================
ğŸ”§ CONFIGURACIÃ“N TÃ‰CNICA NECESARIA
================================================================

ğŸ“‹ BACKEND - Modificar tabla quotes:
------------------------------------
ALTER TABLE quotes ADD COLUMN category_main VARCHAR(20) DEFAULT 'laboratorio';
ALTER TABLE quotes ADD COLUMN quote_code VARCHAR(50) UNIQUE;
ALTER TABLE quotes ADD COLUMN status_payment VARCHAR(50) DEFAULT 'pendiente';

ğŸ“‹ BACKEND - Crear tabla funnel_metrics:
----------------------------------------
CREATE TABLE funnel_metrics (
  id SERIAL PRIMARY KEY,
  quote_id INTEGER REFERENCES quotes(id),
  quote_code VARCHAR(50),
  category_main VARCHAR(20),
  service_name VARCHAR(100),
  item_name VARCHAR(200),
  item_total DECIMAL(10,2),
  total_amount DECIMAL(10,2),
  real_amount_paid DECIMAL(10,2),
  created_at TIMESTAMP DEFAULT NOW()
);

ğŸ“‹ BACKEND - Endpoint para obtener cotizaciones del vendedor:
------------------------------------------------------------
GET /api/quotes/my-quotes
- Devuelve lista de cotizaciones del vendedor logueado
- Incluye: id, quote_code, total_amount, status, client_name

ğŸ“‹ BACKEND - Endpoint para alimentar embudo:
----------------------------------------------
POST /api/funnel/alimentar-embudo
- Recibe: quoteId, realAmountPaid
- Analiza automÃ¡ticamente todos los Ã­tems de la cotizaciÃ³n
- Mapea cada Ã­tem a su servicio padre y categorÃ­a
- Inserta datos en funnel_metrics

================================================================
ğŸ’¡ VENTAJAS DEL SISTEMA
================================================================

âœ… Para Vendedores:
- CÃ³digo Ãºnico automÃ¡tico para cada cotizaciÃ³n
- SelecciÃ³n fÃ¡cil de cotizaciones pendientes
- Datos automÃ¡ticos al subir comprobante
- Notificaciones automÃ¡ticas de aprobaciÃ³n

âœ… Para FacturaciÃ³n:
- Datos completos de la cotizaciÃ³n
- AnÃ¡lisis automÃ¡tico de Ã­tems y categorÃ­as
- Captura del monto real pagado
- Proceso de aprobaciÃ³n simplificado

âœ… Para Jefa Comercial:
- Embudo automÃ¡tico con datos precisos
- MÃ©tricas completas por categorÃ­a y servicio
- AnÃ¡lisis de rendimiento automÃ¡tico
- Filtros avanzados para segmentaciÃ³n

================================================================
ğŸš¨ IMPORTANTE - ARCHIVOS A SUBIR
================================================================

ğŸ“„ COTIZACIÃ“N PDF:
- Debe ser el PDF generado por el sistema
- Debe contener el cÃ³digo Ãºnico de la cotizaciÃ³n
- Debe incluir todos los Ã­tems y precios

ğŸ“„ FACTURA PDF o IMÃGENES:
- Comprobante de pago del cliente
- Debe mostrar el monto pagado
- Debe coincidir con la cotizaciÃ³n

ğŸ“‹ DATOS DEL PAGO:
- Monto pagado por el cliente
- Fecha del pago
- MÃ©todo de pago (transferencia, efectivo, etc.)

================================================================
ğŸ” EJEMPLOS DE CÃ“DIGOS DE COTIZACIÃ“N
================================================================

Formato: COT-YYYYMMDD-XXX
Ejemplos:
- COT-20251003-001
- COT-20251003-002
- COT-20251003-003

================================================================
ğŸ“ SOPORTE TÃ‰CNICO
================================================================

Si tienes problemas con el sistema:
1. Verificar que el backend estÃ© corriendo en puerto 4000
2. Verificar que el frontend estÃ© corriendo en puerto 3000
3. Revisar la consola del navegador para errores
4. Contactar al administrador del sistema

================================================================
ğŸ¯ OBJETIVO FINAL
================================================================

El sistema debe permitir:
1. Crear cotizaciones con categorizaciÃ³n automÃ¡tica
2. Subir comprobantes de pago de forma inteligente
3. Aprobar cotizaciones con anÃ¡lisis automÃ¡tico
4. Alimentar el embudo de ventas con datos precisos
5. Proporcionar mÃ©tricas completas para la Jefa Comercial

Â¡El sistema estÃ¡ diseÃ±ado para ser completamente automÃ¡tico y eficiente! ğŸš€
