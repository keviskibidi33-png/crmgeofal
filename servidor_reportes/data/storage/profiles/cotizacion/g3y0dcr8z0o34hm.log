{"type":"operationStart","subtype":"profile","data":{"_id":"5G2WWce5vvUSxoiz","timestamp":"2025-10-11T14:43:14.351Z","state":"queued","mode":"standard","creationDate":"2025-10-11T14:43:14.354Z","modificationDate":"2025-10-11T14:43:14.354Z","shortid":"NoqkoKA","$entitySet":"profiles"},"doDiffs":false,"timestamp":1760193794353,"id":"7h7zac8t2m4r35p","previousOperationId":null,"operationId":"xfrk3nti0sepy21"}
{"type":"log","level":"info","message":"Render request 5 queued for execution and waiting for available worker","previousOperationId":"xfrk3nti0sepy21","timestamp":1760193794353,"id":"0w20hv4oq5n4ind"}
{"type":"operationStart","subtype":"render","name":"cotizacion","previousOperationId":"xfrk3nti0sepy21","timestamp":1760193794364,"id":"yob5sabbzk7klut","previousEventId":"7h7zac8t2m4r35p","operationId":"gf3bnfefaa4rye4"}
{"type":"log","timestamp":1760193794364,"level":"info","message":"Starting rendering request 5","meta":{"rootId":"g3y0dcr8z0o34hm","id":"g3y0dcr8z0o34hm"},"id":"602mx8u1467lyzb","previousOperationId":"gf3bnfefaa4rye4"}
{"type":"log","timestamp":1760193794364,"level":"info","message":"Rendering template { name: cotizacion, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"g3y0dcr8z0o34hm","id":"g3y0dcr8z0o34hm"},"id":"mf8xhhlycl14sdr","previousOperationId":"gf3bnfefaa4rye4"}
{"type":"log","timestamp":1760193794364,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"g3y0dcr8z0o34hm","id":"g3y0dcr8z0o34hm"},"id":"9bu3y9y8tc3hvyw","previousOperationId":"gf3bnfefaa4rye4"}
{"type":"log","timestamp":1760193794364,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"g3y0dcr8z0o34hm","id":"g3y0dcr8z0o34hm"},"id":"b8hxbmqom4o7ycn","previousOperationId":"gf3bnfefaa4rye4"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1760193794364,"id":"yu2pf187kkd3y8n","previousEventId":"yob5sabbzk7klut","operationId":"d6t2espq2ai1eoa","previousOperationId":"gf3bnfefaa4rye4"}
{"type":"log","timestamp":1760193794364,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"g3y0dcr8z0o34hm","id":"g3y0dcr8z0o34hm"},"id":"g0j5kki98hjmay9","previousOperationId":"d6t2espq2ai1eoa"}
{"type":"log","timestamp":1760193794374,"level":"warn","message":"Error when processing render request 5\n(because) error when evaluating engine handlebars for template /cotizacion\n(because) unexpected token ':'\nSyntaxError: Unexpected token ':'\n  at Object.eval (eval at makeEvaluate (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\ses\\index.js:8504:27), <anonymous>:12:36)\n  at safeEvaluate (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\ses\\index.js:8605:14)\n  at compartmentEvaluate (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\ses\\index.js:11351:10)\n  at Compartment.evaluate (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\ses\\index.js:12177:12)\n  at run (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:132:36)\n  at WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:214:20)\n  at async executeEngine (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:354:16)\n  at async engine.engine (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:162:14)\n  at async invokeRender (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:61:23)\n  at async WorkerReporter._render (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:148:7)\n  at async C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:233:24\n  at async processAndResponse (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:42:17)\nwrapped by:\nError: Error when evaluating engine handlebars for template /cotizacion\n(because) unexpected token ':'\n  at module.exports (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n  at WorkerReporter.createError (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:53:12)\n  at executeEngine (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:377:35)\n  at async engine.engine (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:162:14)\n  at async invokeRender (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:61:23)\n  at async WorkerReporter._render (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:148:7)\n  at async C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:233:24\n  at async processAndResponse (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:42:17)","meta":{"rootId":"g3y0dcr8z0o34hm","id":"g3y0dcr8z0o34hm"},"id":"f6dd6n7ncesdein","previousOperationId":"d6t2espq2ai1eoa"}
{"type":"log","timestamp":1760193794374,"level":"warn","message":"Rendering request 5 finished with error in 23 ms","meta":{"rootId":"g3y0dcr8z0o34hm","id":"g3y0dcr8z0o34hm"},"id":"as134szf8b1v7z6","previousOperationId":"d6t2espq2ai1eoa"}
{"type":"error","timestamp":1760193794376,"entity":{"shortid":"tzfkSIE6f","name":"cotizacion","content":"<html>\r\n<head>\r\n    <meta charset=\"utf8\" />\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            font-size: 10px;\r\n            color: #333;\r\n            margin: 0;\r\n            padding: 0;\r\n        }\r\n        .page {\r\n            padding: 2cm 1.5cm;\r\n        }\r\n        .header-table {\r\n            width: 100%;\r\n            border-bottom: 2px solid #005a9c;\r\n            margin-bottom: 20px;\r\n        }\r\n        .header-table .logo {\r\n            font-size: 24px;\r\n            font-weight: bold;\r\n            color: #005a9c;\r\n        }\r\n        .header-table .company-info {\r\n            text-align: right;\r\n            font-size: 11px;\r\n        }\r\n        .quote-title-box {\r\n            border: 1px solid #ccc;\r\n            padding: 8px;\r\n            text-align: center;\r\n            margin-bottom: 20px;\r\n        }\r\n        .quote-title-box h2 {\r\n            margin: 0;\r\n            font-size: 16px;\r\n        }\r\n        .info-grid {\r\n            display: grid;\r\n            grid-template-columns: 1fr 1fr;\r\n            gap: 15px;\r\n            font-size: 11px;\r\n            margin-bottom: 20px;\r\n            border: 1px solid #eee;\r\n            padding: 10px;\r\n        }\r\n        .info-grid div {\r\n            line-height: 1.6;\r\n        }\r\n        .info-grid strong {\r\n            display: inline-block;\r\n            width: 120px; /* Ancho fijo para las etiquetas */\r\n            color: #555;\r\n        }\r\n        .items-table {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n            margin-top: 15px;\r\n        }\r\n        .items-table th, .items-table td {\r\n            border: 1px solid #ccc;\r\n            padding: 8px;\r\n            text-align: left;\r\n        }\r\n        .items-table th {\r\n            background-color: #f2f2f2;\r\n            font-weight: bold;\r\n        }\r\n        .text-center { text-align: center; }\r\n        .text-right { text-align: right; }\r\n        .totals-section {\r\n            width: 35%;\r\n            margin-left: auto;\r\n            margin-top: 20px;\r\n        }\r\n        .totals-table {\r\n            width: 100%;\r\n        }\r\n        .totals-table td {\r\n            padding: 5px;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"page\">\r\n        <table class=\"header-table\">\r\n            <tr>\r\n                <td class=\"logo\">Geofal</td>\r\n                <td class=\"company-info\">\r\n                    Ingeniería y laboratorio de materiales<br/>\r\n                    Av. Marañón Nº 763, Los Olivos, Lima<br/>\r\n                    www.geofal.com.pe\r\n                </td>\r\n            </tr>\r\n        </table>\r\n\r\n        <div class=\"quote-title-box\">\r\n            <h2>COTIZACIÓN N° {{numeroCotizacion}}</h2>\r\n        </div>\r\n\r\n        <div class=\"info-grid\">\r\n            <div class=\"client-info\">\r\n                <strong>CLIENTE:</strong> {{cliente.nombre}}<br/>\r\n                <strong>RUC:</strong> {{cliente.ruc}}<br/>\r\n                <strong>CONTACTO:</strong> {{cliente.contacto}}<br/>\r\n                <strong>TELÉFONO:</strong> {{cliente.telefono}}<br/>\r\n                <strong>CORREO:</strong> {{cliente.correo}}\r\n            </div>\r\n            <div class=\"project-info\">\r\n                <strong>PROYECTO:</strong> {{proyecto.nombre}}<br/>\r\n                <strong>UBICACIÓN:</strong> {{proyecto.ubicacion}}<br/>\r\n                <strong>ASESOR COMERCIAL:</strong> {{asesor.nombre}}<br/>\r\n                <strong>FECHA EMISIÓN:</strong> {{fechaEmision}}\r\n            </div>\r\n        </div>\r\n        \r\n        <p>Es grato dirigirnos a Ud. a fin de alcanzarle, de acuerdo a su requerimiento, nuestra cotización por los servicios solicitados de los siguientes ensayos de laboratorio:</p>\r\n\r\n        <table class=\"items-table\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"text-center\">Código</th>\r\n                    <th>Descripción Ensayo</th>\r\n                    <th>Norma</th>\r\n                    <th class=\"text-center\">Acreditación</th>\r\n                    <th class=\"text-center\">Cantidad</th>\r\n                    <th class=\"text-right\">Costo Parcial (S/)</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {{#each items}}\r\n                <tr>\r\n                    <td class=\"text-center\">{{this.codigo}}</td>\r\n                    <td>{{this.descripcion}}</td>\r\n                    <td>{{this.norma}}</td>\r\n                    <td class=\"text-center\">{{this.acreditacion}}</td>\r\n                    <td class=\"text-center\">{{this.cantidad}}</td>\r\n                    <td class=\"text-right\">{{this.costoParcial}}</td>\r\n                </tr>\r\n                {{/each}}\r\n            </tbody>\r\n        </table>\r\n\r\n        <div class=\"totals-section\">\r\n            <table class=\"totals-table\">\r\n                <tr>\r\n                    <td><strong>Costo Parcial:</strong></td>\r\n                    <td class=\"text-right\">S/ {{totales.parcial}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td><strong>IGV 18%:</strong></td>\r\n                    <td class=\"text-right\">S/ {{totales.igv}}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td><strong>Costo Total:</strong></td>\r\n                    <td class=\"text-right\">S/ {{totales.total}}</td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n\r\n    </div>\r\n</body>\r\n</html>"},"property":"helpers","statusCode":400,"weak":true,"logged":true,"previousOperationId":"d6t2espq2ai1eoa","id":"vbo9ztjyurdl1yk","stack":"SyntaxError: Unexpected token ':'\n  at Object.eval (eval at makeEvaluate (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\ses\\index.js:8504:27), <anonymous>:12:36)\n  at safeEvaluate (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\ses\\index.js:8605:14)\n  at compartmentEvaluate (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\ses\\index.js:11351:10)\n  at Compartment.evaluate (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\ses\\index.js:12177:12)\n  at run (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:132:36)\n  at WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:214:20)\n  at async executeEngine (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:354:16)\n  at async engine.engine (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:162:14)\n  at async invokeRender (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:61:23)\n  at async WorkerReporter._render (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:148:7)\n  at async C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:233:24\n  at async processAndResponse (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:42:17)\nwrapped by:\nError: Error when evaluating engine handlebars for template /cotizacion\n(because) unexpected token ':'\n  at module.exports (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n  at WorkerReporter.createError (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:53:12)\n  at executeEngine (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:377:35)\n  at async engine.engine (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:162:14)\n  at async invokeRender (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:61:23)\n  at async WorkerReporter._render (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:148:7)\n  at async C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:233:24\n  at async processAndResponse (C:\\Users\\Lenovo\\Documents\\crmgeofal\\servidor_reportes\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:42:17)","message":"Error when evaluating engine handlebars for template /cotizacion\n(because) unexpected token ':'"}
