import{r as c,aa as te,o as S,j as a,p as y,ab as Ee,ac as Be,ad as Te,ae as P,af as Ie,ag as ee,ah as De,ai as $e,n as se,aj as Ae,ak as Oe,al as Le,am as Ue,B as ae,H as Ge,O as He}from"./index-B6K4MeZ_.js";import{F as l}from"./Form-DajNugM3.js";import{R as qe,C as ze}from"./PageHeader-ZaYSeG4B.js";import{S as We}from"./Spinner-Cd5nug_F.js";function _e(n){const t=c.useRef(n);return t.current=n,t}function Ke(n){const t=_e(n);c.useEffect(()=>()=>t.current(),[])}var D;function ne(n){if((!D&&D!==0||n)&&te){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),D=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return D}function Ve(){return c.useState(null)}const re=c.forwardRef(({className:n,bsPrefix:t,as:h="div",...i},u)=>(t=S(t,"modal-body"),a.jsx(h,{ref:u,className:y(n,t),...i})));re.displayName="ModalBody";const q=c.forwardRef(({bsPrefix:n,className:t,contentClassName:h,centered:i,size:u,fullscreen:g,children:b,scrollable:f,...F},k)=>{n=S(n,"modal");const p=`${n}-dialog`,E=typeof g=="string"?`${n}-fullscreen-${g}`:`${n}-fullscreen`;return a.jsx("div",{...F,ref:k,className:y(p,t,u&&`${n}-${u}`,i&&`${p}-centered`,f&&`${p}-scrollable`,g&&E),children:a.jsx("div",{className:y(`${n}-content`,h),children:b})})});q.displayName="ModalDialog";const oe=c.forwardRef(({className:n,bsPrefix:t,as:h="div",...i},u)=>(t=S(t,"modal-footer"),a.jsx(h,{ref:u,className:y(n,t),...i})));oe.displayName="ModalFooter";const le=c.forwardRef(({bsPrefix:n,className:t,closeLabel:h="Close",closeButton:i=!1,...u},g)=>(n=S(n,"modal-header"),a.jsx(Ee,{ref:g,...u,className:y(t,n),closeLabel:h,closeButton:i})));le.displayName="ModalHeader";const Xe=Be("h4"),ce=c.forwardRef(({className:n,bsPrefix:t,as:h=Xe,...i},u)=>(t=S(t,"modal-title"),a.jsx(h,{ref:u,className:y(n,t),...i})));ce.displayName="ModalTitle";function Je(n){return a.jsx(se,{...n,timeout:null})}function Qe(n){return a.jsx(se,{...n,timeout:null})}const de=c.forwardRef(({bsPrefix:n,className:t,style:h,dialogClassName:i,contentClassName:u,children:g,dialogAs:b=q,"data-bs-theme":f,"aria-labelledby":F,"aria-describedby":k,"aria-label":p,show:E=!1,animation:m=!0,backdrop:N=!0,keyboard:x=!0,onEscapeKeyDown:v,onShow:$,onHide:C,container:M,autoFocus:w=!0,enforceFocus:A=!0,restoreFocus:O=!0,restoreFocusOptions:L,onEntered:e,onExit:r,onExiting:o,onEnter:j,onEntering:d,onExited:z,backdropClassName:W,manager:_,...ue},ie)=>{const[me,he]=c.useState({}),[pe,K]=c.useState(!1),U=c.useRef(!1),G=c.useRef(!1),B=c.useRef(null),[T,ge]=Ve(),xe=Te(ie,ge),V=P(C),je=Ie();n=S(n,"modal");const ye=c.useMemo(()=>({onHide:V}),[V]);function X(){return _||Ae({isRTL:je})}function J(s){if(!te)return;const R=X().getScrollbarWidth()>0,Z=s.scrollHeight>Le(s).documentElement.clientHeight;he({paddingRight:R&&!Z?ne():void 0,paddingLeft:!R&&Z?ne():void 0})}const H=P(()=>{T&&J(T.dialog)});Ke(()=>{ee(window,"resize",H),B.current==null||B.current()});const be=()=>{U.current=!0},Ne=s=>{U.current&&T&&s.target===T.dialog&&(G.current=!0),U.current=!1},Q=()=>{K(!0),B.current=Ue(T.dialog,()=>{K(!1)})},ve=s=>{s.target===s.currentTarget&&Q()},Ce=s=>{if(N==="static"){ve(s);return}if(G.current||s.target!==s.currentTarget){G.current=!1;return}C==null||C()},Me=s=>{x?v==null||v(s):(s.preventDefault(),N==="static"&&Q())},we=(s,R)=>{s&&J(s),j==null||j(s,R)},Re=s=>{B.current==null||B.current(),r==null||r(s)},Se=(s,R)=>{d==null||d(s,R),Oe(window,"resize",H)},fe=s=>{s&&(s.style.display=""),z==null||z(s),ee(window,"resize",H)},Fe=c.useCallback(s=>a.jsx("div",{...s,className:y(`${n}-backdrop`,W,!m&&"show")}),[m,W,n]),Y={...h,...me};Y.display="block";const ke=s=>a.jsx("div",{role:"dialog",...s,style:Y,className:y(t,n,pe&&`${n}-static`,!m&&"show"),onClick:N?Ce:void 0,onMouseUp:Ne,"data-bs-theme":f,"aria-label":p,"aria-labelledby":F,"aria-describedby":k,children:a.jsx(b,{...ue,onMouseDown:be,className:i,contentClassName:u,children:g})});return a.jsx(De.Provider,{value:ye,children:a.jsx($e,{show:E,ref:xe,backdrop:N,container:M,keyboard:!0,autoFocus:w,enforceFocus:A,restoreFocus:O,restoreFocusOptions:L,onEscapeKeyDown:Me,onShow:$,onHide:C,onEnter:we,onEntering:Se,onEntered:e,onExit:Re,onExiting:o,onExited:fe,manager:X(),transition:m?Je:void 0,backdropTransition:m?Qe:void 0,renderBackdrop:Fe,renderDialog:ke})})});de.displayName="Modal";const I=Object.assign(de,{Body:re,Header:le,Title:ce,Footer:oe,Dialog:q,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),aa=({show:n,onHide:t,title:h,data:i={},fields:u=[],onSubmit:g,loading:b=!1,size:f="lg",submitText:F="Guardar",cancelText:k="Cancelar",validation:p={},className:E=""})=>{const[m,N]=c.useState({}),[x,v]=c.useState({}),[$,C]=c.useState({});c.useEffect(()=>{n&&(N(i),v({}),C({}))},[n,i]);const M=(e,r)=>{N(o=>({...o,[e]:r})),x[e]&&v(o=>({...o,[e]:null}))},w=e=>{if(C(r=>({...r,[e]:!0})),p[e]){const r=p[e](m[e],m);r&&v(o=>({...o,[e]:r}))}},A=()=>{const e={};let r=!0;return u.forEach(o=>{if(o.required&&(!m[o.name]||m[o.name]===""))e[o.name]=`${o.label} es requerido`,r=!1;else if(p[o.name]){const j=p[o.name](m[o.name],m);j&&(e[o.name]=j,r=!1)}}),v(e),r},O=async e=>{if(e.preventDefault(),A())try{await g(m),t()}catch(r){console.error("Error submitting form:",r)}},L=e=>{var j;const r=$[e.name]&&x[e.name],o=m[e.name]||"";switch(e.type){case"text":case"email":case"password":return a.jsxs(l.Group,{className:"mb-3",children:[a.jsxs(l.Label,{children:[e.label,e.required&&a.jsx("span",{className:"text-danger ms-1",children:"*"})]}),a.jsx(l.Control,{type:e.type,name:e.name,value:o,onChange:d=>M(e.name,d.target.value),onBlur:()=>w(e.name),isInvalid:r,placeholder:e.placeholder,disabled:e.disabled}),r&&a.jsx(l.Control.Feedback,{type:"invalid",children:x[e.name]}),e.help&&a.jsx(l.Text,{className:"text-muted",children:e.help})]},e.name);case"textarea":return a.jsxs(l.Group,{className:"mb-3",children:[a.jsxs(l.Label,{children:[e.label,e.required&&a.jsx("span",{className:"text-danger ms-1",children:"*"})]}),a.jsx(l.Control,{as:"textarea",rows:e.rows||3,name:e.name,value:o,onChange:d=>M(e.name,d.target.value),onBlur:()=>w(e.name),isInvalid:r,placeholder:e.placeholder}),r&&a.jsx(l.Control.Feedback,{type:"invalid",children:x[e.name]})]},e.name);case"select":return a.jsxs(l.Group,{className:"mb-3",children:[a.jsxs(l.Label,{children:[e.label,e.required&&a.jsx("span",{className:"text-danger ms-1",children:"*"})]}),a.jsxs(l.Select,{name:e.name,value:o,onChange:d=>M(e.name,d.target.value),onBlur:()=>w(e.name),isInvalid:r,children:[a.jsx("option",{value:"",children:"Seleccionar..."}),(j=e.options)==null?void 0:j.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))]}),r&&a.jsx(l.Control.Feedback,{type:"invalid",children:x[e.name]})]},e.name);case"number":return a.jsxs(l.Group,{className:"mb-3",children:[a.jsxs(l.Label,{children:[e.label,e.required&&a.jsx("span",{className:"text-danger ms-1",children:"*"})]}),a.jsx(l.Control,{type:"number",name:e.name,value:o,onChange:d=>M(e.name,parseFloat(d.target.value)||""),onBlur:()=>w(e.name),isInvalid:r,placeholder:e.placeholder,min:e.min,max:e.max,step:e.step}),r&&a.jsx(l.Control.Feedback,{type:"invalid",children:x[e.name]})]},e.name);case"checkbox":return a.jsx(l.Group,{className:"mb-3",children:a.jsx(l.Check,{type:"checkbox",name:e.name,checked:!!o,onChange:d=>M(e.name,d.target.checked),label:e.label})},e.name);default:return null}};return a.jsxs(I,{show:n,onHide:t,size:f,className:E,children:[a.jsx(I.Header,{closeButton:!0,className:"border-0 pb-0",children:a.jsx(I.Title,{className:"fw-bold",children:h})}),a.jsxs(l,{onSubmit:O,children:[a.jsx(I.Body,{className:"pt-0",children:a.jsx(qe,{children:u.map(e=>a.jsx(ze,{md:e.col||12,children:L(e)},e.name))})}),a.jsxs(I.Footer,{className:"border-0 pt-0",children:[a.jsxs(ae,{variant:"outline-secondary",onClick:t,disabled:b,children:[a.jsx(Ge,{className:"me-1"}),k]}),a.jsx(ae,{type:"submit",variant:"primary",disabled:b,children:b?a.jsxs(a.Fragment,{children:[a.jsx(We,{size:"sm",className:"me-1"}),"Guardando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(He,{className:"me-1"}),F]})})]})]})]})};export{aa as M};
//# sourceMappingURL=ModalForm-DoSAJory.js.map
