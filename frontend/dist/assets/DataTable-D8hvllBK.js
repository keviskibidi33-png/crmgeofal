import{r as v,j as e,Y as E,D as a,J as U,R as W,y as Y,m as q,z as Q,A as X,B as N,v as Z}from"./index-xQVByYRi.js";import{R}from"./Row-mPOlevGM.js";import{C as k}from"./Col-Dz9zKzWQ.js";import{I as B}from"./InputGroup-tlKX9J39.js";import{F as O}from"./Form-BAZkilfb.js";import{T as F}from"./Table-6IySdngi.js";const le=({data:C=[],columns:h=[],searchable:b=!0,filterable:g=!0,actions:j=[],onEdit:I,onDelete:S,onView:T,loading:G=!1,emptyMessage:V="No hay datos disponibles",className:_="",totalItems:m=0,itemsPerPage:o=20,currentPage:d=1,onPageChange:c,onSearch:D,onFilter:r,filterOptions:y=null,getRowClassName:w=null})=>{const[f,$]=v.useState(""),[x,A]=v.useState(""),[p,M]=v.useState("asc"),u=v.useMemo(()=>{let s=C;return m>0||(f&&b&&(s=s.filter(t=>h.some(l=>{const i=l.accessor?t[l.accessor]:"";return String(i).toLowerCase().includes(f.toLowerCase())}))),x&&(s=[...s].sort((t,l)=>{const i=t[x],L=l[x];return i<L?p==="asc"?-1:1:i>L?p==="asc"?1:-1:0}))),s},[C,f,x,p,h,b,m]),n=m>0?Math.ceil(m/o):Math.ceil(u.length/o),z=m>0?C:u.slice((d-1)*o,d*o),H=s=>{x===s?M(p==="asc"?"desc":"asc"):(A(s),M("asc"))},J=s=>x!==s?null:p==="asc"?"↑":"↓",K=(s,t)=>{const l=t.accessor?s[t.accessor]:"";return t.render?t.render(l,s):t.type==="badge"?e.jsx(Z,{bg:t.badgeColor||"secondary",children:l}):t.type==="date"?new Date(l).toLocaleDateString("es-ES"):l};return G?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),e.jsx("p",{className:"mt-2 text-muted",children:"Cargando datos..."})]}):e.jsxs("div",{className:`data-table ${_}`,children:[(b||g)&&e.jsx("div",{className:"table-controls bg-light p-3 rounded-top border",children:e.jsxs(R,{className:"align-items-center",children:[b&&e.jsx(k,{md:6,children:e.jsxs(B,{children:[e.jsx(B.Text,{children:e.jsx(E,{})}),e.jsx(O.Control,{type:"text",placeholder:"Buscar por nombre, email, rol...",value:f,onChange:s=>{$(s.target.value),D&&(clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{D(s.target.value)},500))}})]})}),g&&e.jsx(k,{md:6,className:"text-end",children:e.jsxs(a,{children:[e.jsxs(a.Toggle,{variant:"outline-secondary",size:"sm",children:[e.jsx(U,{className:"me-1"}),"Filtros"]}),e.jsxs(a.Menu,{className:"data-table-filter-dropdown",children:[e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({}),children:"Limpiar filtros"}),e.jsx(a.Divider,{}),y?y.map((s,t)=>e.jsxs(W.Fragment,{children:[e.jsx(a.Header,{className:"data-table-filter-header",children:s.title}),s.options.map((l,i)=>e.jsx(a.Item,{onClick:()=>r&&r(l.filter),className:"data-table-filter-item",children:l.label},i)),t<y.length-1&&e.jsx(a.Divider,{})]},t)):e.jsxs(e.Fragment,{children:[e.jsx(a.Header,{className:"data-table-filter-header",children:"Por Rol"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({role:"admin"}),children:"Administradores"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({role:"vendedor_comercial"}),children:"Vendedores Comerciales"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({role:"jefa_comercial"}),children:"Jefas Comerciales"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({role:"jefe_laboratorio"}),children:"Jefes de Laboratorio"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({role:"usuario_laboratorio"}),children:"Usuarios de Laboratorio"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({role:"soporte"}),children:"Soporte"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({role:"gerencia"}),children:"Gerencia"}),e.jsx(a.Divider,{}),e.jsx(a.Header,{className:"data-table-filter-header",children:"Por Área"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({area:"Comercial"}),children:"Comercial"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({area:"Laboratorio"}),children:"Laboratorio"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({area:"Sistemas"}),children:"Sistemas"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({area:"Gerencia"}),children:"Gerencia"}),e.jsx(a.Item,{className:"data-table-filter-item",onClick:()=>r&&r({area:"Soporte"}),children:"Soporte"})]})]})]})})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs(F,{hover:!0,className:"mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[h.map((s,t)=>e.jsx("th",{className:`${s.sortable?"cursor-pointer":""} ${s.className||""}`,onClick:()=>s.sortable&&H(s.accessor),style:{minWidth:s.width||"auto"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[s.header,s.sortable&&e.jsx("span",{className:"ms-1 text-muted",children:J(s.accessor)})]})},t)),j.length>0&&e.jsx("th",{width:"120",className:"text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:z.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:h.length+(j.length>0?1:0),className:"text-center py-5",children:e.jsxs("div",{className:"text-muted",children:[e.jsx(E,{size:48,className:"mb-3 opacity-50"}),e.jsx("p",{className:"mb-0",children:V})]})})}):z.map((s,t)=>e.jsxs("tr",{className:w?w(s):"",children:[h.map((l,i)=>e.jsx("td",{className:l.className||"",children:K(s,l)},i)),j.length>0&&e.jsx("td",{className:"text-center",children:e.jsxs(a,{children:[e.jsx(a.Toggle,{variant:"link",size:"sm",className:"text-muted",children:e.jsx(Y,{})}),e.jsx(a.Menu,{children:j.length>0?j.map((l,i)=>e.jsxs(a.Item,{onClick:()=>l.onClick&&l.onClick(s),className:l.variant==="outline-danger"?"text-danger":"",children:[l.icon&&e.jsx(l.icon,{className:"me-2"}),l.label]},i)):e.jsxs(e.Fragment,{children:[T&&e.jsxs(a.Item,{onClick:()=>T(s),children:[e.jsx(q,{className:"me-2"}),"Ver"]}),I&&e.jsxs(a.Item,{onClick:()=>I(s),children:[e.jsx(Q,{className:"me-2"}),"Editar"]}),S&&e.jsxs(a.Item,{onClick:()=>S(s),className:"text-danger",children:[e.jsx(X,{className:"me-2"}),"Eliminar"]})]})})]})})]},s.id||t))})]})}),n>1&&e.jsx("div",{className:"table-footer bg-light p-3 rounded-bottom border border-top-0",children:e.jsxs(R,{className:"align-items-center",children:[e.jsx(k,{children:e.jsxs("small",{className:"text-muted",children:["Mostrando ",(d-1)*o+1," a ",Math.min(d*o,m||u.length)," de ",m||u.length," registros"]})}),e.jsx(k,{xs:"auto",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(N,{variant:"outline-secondary",size:"sm",disabled:d===1,onClick:()=>c&&c(1),title:"Primera página",children:"««"}),e.jsx(N,{variant:"outline-secondary",size:"sm",disabled:d===1,onClick:()=>c&&c(d-1),title:"Página anterior",children:"«"}),(()=>{const s=[],t=Math.max(1,d-1),l=Math.min(n,t+2);for(let i=t;i<=l;i++)s.push(e.jsx(N,{variant:d===i?"primary":"outline-secondary",size:"sm",onClick:()=>c&&c(i),className:"px-3",children:i},i));return s})(),e.jsx(N,{variant:"outline-secondary",size:"sm",disabled:d===n,onClick:()=>c&&c(d+1),title:"Página siguiente",children:"»"}),e.jsx(N,{variant:"outline-secondary",size:"sm",disabled:d===n,onClick:()=>c&&c(n),title:"Última página",children:"»»"}),e.jsxs("div",{className:"d-flex align-items-center gap-1 ms-3",children:[e.jsx("span",{className:"text-muted small",children:"Ir a:"}),e.jsx("input",{type:"number",min:"1",max:n,className:"form-control form-control-sm",style:{width:"60px"},placeholder:"...",onKeyPress:s=>{if(s.key==="Enter"){const t=parseInt(s.target.value);t>=1&&t<=n?(c&&c(t),s.target.value=""):(c&&c(n),s.target.value="")}},title:`Ingresa un número del 1 al ${n}`})]})]})})]})})]})};export{le as D};
//# sourceMappingURL=DataTable-D8hvllBK.js.map
