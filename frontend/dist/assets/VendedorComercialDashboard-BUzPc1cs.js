import{r as n,b as C,j as e,C as d,a7 as g,h as p,N,a9 as E,aG as S,l as R}from"./index-CJDD9_Aw.js";import{P as M}from"./PageHeader-Cfye0oPO.js";import{S as l}from"./StatsCard-DzydegCt.js";import{S as w}from"./Spinner-BVQsrHFz.js";import{A as $}from"./Alert-Cn54xJZ3.js";import{R as t,C as r}from"./Row-BGooJhRW.js";import{C as i}from"./Col-DkPevymr.js";function B(){var x,j,u;const[s,v]=n.useState(null),[f,o]=n.useState(!0),[h,m]=n.useState(null);n.useEffect(()=>{y()},[]);const y=async()=>{try{o(!0),m(null);const a=await C("/api/role-dashboard/vendedor-comercial");v(a)}catch(a){console.error("Error fetching dashboard data:",a),m("Error al cargar los datos del dashboard")}finally{o(!1)}};return f?e.jsx(d,{fluid:!0,className:"p-4",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:e.jsx(w,{animation:"border",size:"lg"})})}):h?e.jsx(d,{fluid:!0,className:"p-4",children:e.jsx($,{variant:"danger",children:h})}):e.jsxs(d,{fluid:!0,className:"p-4",children:[e.jsx(M,{title:"Mi Dashboard Comercial",subtitle:"Métricas personales y rendimiento",icon:g}),e.jsxs(t,{className:"mb-4",children:[e.jsx(i,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Mis Cotizaciones",value:(s==null?void 0:s.misCotizaciones)||0,icon:g,color:"primary",subtitle:`${(s==null?void 0:s.cotizacionesAprobadas)||0} aprobadas`})}),e.jsx(i,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Clientes",value:(s==null?void 0:s.totalClientes)||0,icon:p,color:"info",subtitle:`${(s==null?void 0:s.clientesNuevosEsteMes)||0} nuevos este mes`})}),e.jsx(i,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Ingresos Generados",value:`$${((s==null?void 0:s.ingresosGenerados)||0).toLocaleString()}`,icon:N,color:"success",subtitle:`${(s==null?void 0:s.cotizacionesFacturadas)||0} facturadas`})}),e.jsx(i,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Tasa de Conversión",value:`${(s==null?void 0:s.conversionRate)||0}%`,icon:E,color:"warning",subtitle:"Cotizaciones aprobadas"})})]}),e.jsxs(t,{className:"mb-4",children:[e.jsx(i,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Proyectos Activos",value:(s==null?void 0:s.proyectosActivos)||0,icon:S,color:"primary",subtitle:`${(s==null?void 0:s.proyectosCompletados)||0} completados`})}),e.jsx(i,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Cotizaciones Este Mes",value:(s==null?void 0:s.cotizacionesEsteMes)||0,icon:R,color:"info",subtitle:"Nuevas cotizaciones"})}),e.jsx(i,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Ingresos Este Mes",value:`$${((s==null?void 0:s.ingresosEsteMes)||0).toLocaleString()}`,icon:N,color:"success",subtitle:"Ingresos del mes actual"})}),e.jsx(i,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Clientes Nuevos",value:(s==null?void 0:s.clientesNuevosEsteMes)||0,icon:p,color:"warning",subtitle:"Este mes"})})]}),e.jsxs(t,{className:"mb-4",children:[e.jsx(i,{lg:6,children:e.jsxs(r,{className:"shadow-sm",children:[e.jsx(r.Header,{children:e.jsx("h5",{className:"mb-0",children:"Mis Cotizaciones Recientes"})}),e.jsx(r.Body,{children:((x=s==null?void 0:s.cotizacionesRecientes)==null?void 0:x.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Código"}),e.jsx("th",{children:"Cliente"}),e.jsx("th",{children:"Monto"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Fecha"})]})}),e.jsx("tbody",{children:s.cotizacionesRecientes.map((a,c)=>{var b;return e.jsxs("tr",{children:[e.jsx("td",{children:a.quote_number}),e.jsx("td",{children:a.client_contact}),e.jsxs("td",{children:["$",((b=a.total_amount)==null?void 0:b.toLocaleString())||0]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${a.status==="aprobada"?"bg-success":a.status==="facturada"?"bg-primary":a.status==="pendiente"?"bg-warning":"bg-secondary"}`,children:a.status})}),e.jsx("td",{children:new Date(a.created_at).toLocaleDateString()})]},c)})})]})}):e.jsx("p",{className:"text-muted",children:"No hay cotizaciones recientes"})})]})}),e.jsx(i,{lg:6,children:e.jsxs(r,{className:"shadow-sm",children:[e.jsx(r.Header,{children:e.jsx("h5",{className:"mb-0",children:"Mis Clientes Recientes"})}),e.jsx(r.Body,{children:((j=s==null?void 0:s.clientesRecientes)==null?void 0:j.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Empresa"}),e.jsx("th",{children:"RUC"}),e.jsx("th",{children:"Última Cotización"})]})}),e.jsx("tbody",{children:s.clientesRecientes.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:a.ruc}),e.jsx("td",{children:new Date(a.ultima_cotizacion).toLocaleDateString()})]},c))})]})}):e.jsx("p",{className:"text-muted",children:"No hay clientes recientes"})})]})})]}),e.jsx(t,{children:e.jsx(i,{children:e.jsxs(r,{className:"shadow-sm",children:[e.jsx(r.Header,{children:e.jsx("h5",{className:"mb-0",children:"Mis Proyectos Recientes"})}),e.jsx(r.Body,{children:((u=s==null?void 0:s.proyectosRecientes)==null?void 0:u.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Proyecto"}),e.jsx("th",{children:"Empresa"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Fecha Creación"})]})}),e.jsx("tbody",{children:s.proyectosRecientes.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:a.company_name}),e.jsx("td",{children:e.jsx("span",{className:`badge ${a.status==="activo"?"bg-success":a.status==="completado"?"bg-primary":a.status==="pendiente"?"bg-warning":"bg-secondary"}`,children:a.status})}),e.jsx("td",{children:new Date(a.created_at).toLocaleDateString()})]},c))})]})}):e.jsx("p",{className:"text-muted",children:"No hay proyectos recientes"})})]})})})]})}export{B as default};
//# sourceMappingURL=VendedorComercialDashboard-BUzPc1cs.js.map
