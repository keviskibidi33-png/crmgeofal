import{r as k,S as K,U as W,j as e,av as B,aw as r,ae as q,ag as Q,ax as X,k as Y,v as Z,O,B as C,n as F}from"./index-DHooE7hD.js";import{R,C as $}from"./PageHeader-DnOBhSeR.js";import{I as G}from"./InputGroup-D1Ua8Ud8.js";import{F as P}from"./Form-B2jByG-z.js";const V=k.forwardRef(({bsPrefix:u,className:h,striped:x,bordered:g,borderless:j,hover:y,size:b,variant:N,responsive:f,...w},T)=>{const n=K(u,"table"),m=W(h,n,N&&`${n}-${N}`,b&&`${n}-${b}`,x&&`${n}-${typeof x=="string"?`striped-${x}`:"striped"}`,g&&`${n}-bordered`,j&&`${n}-borderless`,y&&`${n}-hover`),d=e.jsx("table",{...w,className:m,ref:T});if(f){let l=`${n}-responsive`;return typeof f=="string"&&(l=`${l}-${f}`),e.jsx("div",{className:l,children:d})}return d});V.displayName="Table";const te=({data:u=[],columns:h=[],searchable:x=!0,filterable:g=!0,actions:j=[],onEdit:y,onDelete:b,onView:N,loading:f=!1,emptyMessage:w="No hay datos disponibles",className:T="",totalItems:n=0,itemsPerPage:m=20,currentPage:d=1,onPageChange:l,onSearch:M,onFilter:a,filterOptions:D=null})=>{const[I,_]=k.useState(""),[p,H]=k.useState(""),[v,L]=k.useState("asc"),S=k.useMemo(()=>{let s=u;return n>0||(I&&x&&(s=s.filter(t=>h.some(i=>{const c=i.accessor?t[i.accessor]:"";return String(c).toLowerCase().includes(I.toLowerCase())}))),p&&(s=[...s].sort((t,i)=>{const c=t[p],E=i[p];return c<E?v==="asc"?-1:1:c>E?v==="asc"?1:-1:0}))),s},[u,I,p,v,h,x,n]),o=n>0?Math.ceil(n/m):Math.ceil(S.length/m),z=n>0?u:S.slice((d-1)*m,d*m),A=s=>{p===s?L(v==="asc"?"desc":"asc"):(H(s),L("asc"))},J=s=>p!==s?null:v==="asc"?"↑":"↓",U=(s,t)=>{const i=t.accessor?s[t.accessor]:"";return t.render?t.render(i,s):t.type==="badge"?e.jsx(F,{bg:t.badgeColor||"secondary",children:i}):t.type==="date"?new Date(i).toLocaleDateString("es-ES"):i};return f?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),e.jsx("p",{className:"mt-2 text-muted",children:"Cargando datos..."})]}):e.jsxs("div",{className:`data-table ${T}`,children:[(x||g)&&e.jsx("div",{className:"table-controls bg-light p-3 rounded-top border",children:e.jsxs(R,{className:"align-items-center",children:[x&&e.jsx($,{md:6,children:e.jsxs(G,{children:[e.jsx(G.Text,{children:e.jsx(B,{})}),e.jsx(P.Control,{type:"text",placeholder:"Buscar por nombre, email, rol...",value:I,onChange:s=>{_(s.target.value),M&&(clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{M(s.target.value)},500))}})]})}),g&&e.jsx($,{md:6,className:"text-end",children:e.jsxs(r,{children:[e.jsxs(r.Toggle,{variant:"outline-secondary",size:"sm",children:[e.jsx(q,{className:"me-1"}),"Filtros"]}),e.jsxs(r.Menu,{children:[e.jsx(r.Item,{onClick:()=>a&&a({}),children:"Limpiar filtros"}),e.jsx(r.Divider,{}),D?D.map((s,t)=>e.jsxs(Q.Fragment,{children:[e.jsx(r.Header,{children:s.title}),s.options.map((i,c)=>e.jsx(r.Item,{onClick:()=>a&&a(i.filter),children:i.label},c)),t<D.length-1&&e.jsx(r.Divider,{})]},t)):e.jsxs(e.Fragment,{children:[e.jsx(r.Header,{children:"Por Rol"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"admin"}),children:"Administradores"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"vendedor_comercial"}),children:"Vendedores Comerciales"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"jefa_comercial"}),children:"Jefas Comerciales"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"jefe_laboratorio"}),children:"Jefes de Laboratorio"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"usuario_laboratorio"}),children:"Usuarios de Laboratorio"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"soporte"}),children:"Soporte"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"gerencia"}),children:"Gerencia"}),e.jsx(r.Divider,{}),e.jsx(r.Header,{children:"Por Área"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Comercial"}),children:"Comercial"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Laboratorio"}),children:"Laboratorio"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Sistemas"}),children:"Sistemas"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Gerencia"}),children:"Gerencia"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Soporte"}),children:"Soporte"})]})]})]})})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs(V,{hover:!0,className:"mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[h.map((s,t)=>e.jsx("th",{className:s.sortable?"cursor-pointer":"",onClick:()=>s.sortable&&A(s.accessor),style:{minWidth:s.width||"auto"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[s.header,s.sortable&&e.jsx("span",{className:"ms-1 text-muted",children:J(s.accessor)})]})},t)),j.length>0&&e.jsx("th",{width:"120",className:"text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:z.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:h.length+(j.length>0?1:0),className:"text-center py-5",children:e.jsxs("div",{className:"text-muted",children:[e.jsx(B,{size:48,className:"mb-3 opacity-50"}),e.jsx("p",{className:"mb-0",children:w})]})})}):z.map((s,t)=>e.jsxs("tr",{children:[h.map((i,c)=>e.jsx("td",{children:U(s,i)},c)),j.length>0&&e.jsx("td",{className:"text-center",children:e.jsxs(r,{children:[e.jsx(r.Toggle,{variant:"link",size:"sm",className:"text-muted",children:e.jsx(X,{})}),e.jsx(r.Menu,{children:j.length>0?j.map((i,c)=>e.jsxs(r.Item,{onClick:()=>i.onClick&&i.onClick(s),className:i.variant==="outline-danger"?"text-danger":"",children:[i.icon&&e.jsx(i.icon,{className:"me-2"}),i.label]},c)):e.jsxs(e.Fragment,{children:[N&&e.jsxs(r.Item,{onClick:()=>N(s),children:[e.jsx(Y,{className:"me-2"}),"Ver"]}),y&&e.jsxs(r.Item,{onClick:()=>y(s),children:[e.jsx(Z,{className:"me-2"}),"Editar"]}),b&&e.jsxs(r.Item,{onClick:()=>b(s),className:"text-danger",children:[e.jsx(O,{className:"me-2"}),"Eliminar"]})]})})]})})]},s.id||t))})]})}),o>1&&e.jsx("div",{className:"table-footer bg-light p-3 rounded-bottom border border-top-0",children:e.jsxs(R,{className:"align-items-center",children:[e.jsx($,{children:e.jsxs("small",{className:"text-muted",children:["Mostrando ",(d-1)*m+1," a ",Math.min(d*m,n||S.length)," de ",n||S.length," registros"]})}),e.jsx($,{xs:"auto",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(C,{variant:"outline-secondary",size:"sm",disabled:d===1,onClick:()=>l?l(1):setCurrentPage(1),title:"Primera página",children:"««"}),e.jsx(C,{variant:"outline-secondary",size:"sm",disabled:d===1,onClick:()=>l?l(d-1):setCurrentPage(d-1),title:"Página anterior",children:"«"}),(()=>{const s=[],t=Math.max(1,d-1),i=Math.min(o,t+2);for(let c=t;c<=i;c++)s.push(e.jsx(C,{variant:d===c?"primary":"outline-secondary",size:"sm",onClick:()=>l?l(c):setCurrentPage(c),className:"px-3",children:c},c));return s})(),e.jsx(C,{variant:"outline-secondary",size:"sm",disabled:d===o,onClick:()=>l?l(d+1):setCurrentPage(d+1),title:"Página siguiente",children:"»"}),e.jsx(C,{variant:"outline-secondary",size:"sm",disabled:d===o,onClick:()=>l?l(o):setCurrentPage(o),title:"Última página",children:"»»"}),e.jsxs("div",{className:"d-flex align-items-center gap-1 ms-3",children:[e.jsx("span",{className:"text-muted small",children:"Ir a:"}),e.jsx("input",{type:"number",min:"1",max:o,className:"form-control form-control-sm",style:{width:"60px"},placeholder:"...",onKeyPress:s=>{if(s.key==="Enter"){const t=parseInt(s.target.value);t>=1&&t<=o?(l?l(t):setCurrentPage(t),s.target.value=""):(l?l(o):setCurrentPage(o),s.target.value="")}},title:`Ingresa un número del 1 al ${o}`})]})]})})]})})]})};export{te as D};
//# sourceMappingURL=DataTable-Bvk6NRGo.js.map
