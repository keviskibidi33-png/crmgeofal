import{r as d,b as f,j as e,a0 as b,N as v,f as y,aC as C,F as S,$ as R}from"./index-_ax5caxz.js";import{P as $}from"./PageHeader-D9ORK77W.js";import{S as n}from"./StatsCard-yUry652J.js";import{C as t,R as o}from"./Row-DUT7dzcT.js";import{S as E}from"./Spinner-CWz_2665.js";import{A as F}from"./Alert-e0x4JDT9.js";import{C as r}from"./Col-DhWa0-63.js";import{C as l}from"./Card-DX68ND5N.js";function M(){var j,p;const[s,u]=d.useState(null),[g,m]=d.useState(!0),[h,x]=d.useState(null);d.useEffect(()=>{N()},[]);const N=async()=>{try{m(!0),x(null);const a=await f("/api/role-dashboard/facturacion");u(a)}catch(a){console.error("Error fetching dashboard data:",a),x("Error al cargar los datos del dashboard")}finally{m(!1)}};return g?e.jsx(t,{fluid:!0,className:"p-4",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:e.jsx(E,{animation:"border",size:"lg"})})}):h?e.jsx(t,{fluid:!0,className:"p-4",children:e.jsx(F,{variant:"danger",children:h})}):e.jsxs(t,{fluid:!0,className:"p-4",children:[e.jsx($,{title:"Dashboard Facturación",subtitle:"Comprobantes de pago y gestión financiera",icon:b}),e.jsxs(o,{className:"mb-4",children:[e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(n,{title:"Comprobantes Pendientes",value:(s==null?void 0:s.comprobantesPendientes)||0,icon:v,color:"warning",subtitle:`$${((s==null?void 0:s.montoTotalPendiente)||0).toLocaleString()}`})}),e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(n,{title:"Comprobantes Aprobados",value:(s==null?void 0:s.comprobantesAprobados)||0,icon:y,color:"success",subtitle:`$${((s==null?void 0:s.montoTotalAprobado)||0).toLocaleString()}`})}),e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(n,{title:"Comprobantes Rechazados",value:(s==null?void 0:s.comprobantesRechazados)||0,icon:C,color:"danger",subtitle:`$${((s==null?void 0:s.montoTotalRechazado)||0).toLocaleString()}`})}),e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(n,{title:"Total Comprobantes",value:(s==null?void 0:s.totalComprobantes)||0,icon:S,color:"info",subtitle:"Todos los estados"})})]}),e.jsxs(o,{className:"mb-4",children:[e.jsx(r,{lg:6,md:6,className:"mb-3",children:e.jsx(n,{title:"Comprobantes Este Mes",value:(s==null?void 0:s.comprobantesEsteMes)||0,icon:R,color:"primary",subtitle:"Nuevos comprobantes"})}),e.jsx(r,{lg:6,md:6,className:"mb-3",children:e.jsx(n,{title:"Monto Este Mes",value:`$${((s==null?void 0:s.montoEsteMes)||0).toLocaleString()}`,icon:b,color:"success",subtitle:"Ingresos del mes"})})]}),e.jsxs(o,{className:"mb-4",children:[e.jsx(r,{lg:6,children:e.jsxs(l,{className:"shadow-sm",children:[e.jsx(l.Header,{children:e.jsx("h5",{className:"mb-0",children:"Comprobantes Recientes"})}),e.jsx(l.Body,{children:((j=s==null?void 0:s.comprobantesRecientes)==null?void 0:j.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Monto"}),e.jsx("th",{children:"Empresa"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Subido por"})]})}),e.jsx("tbody",{children:s.comprobantesRecientes.map((a,i)=>{var c;return e.jsxs("tr",{children:[e.jsxs("td",{children:["$",((c=a.amount)==null?void 0:c.toLocaleString())||0]}),e.jsx("td",{children:a.company_name}),e.jsx("td",{children:e.jsx("span",{className:`badge ${a.status==="aprobado"?"bg-success":a.status==="rechazado"?"bg-danger":a.status==="pendiente"?"bg-warning":"bg-secondary"}`,children:a.status})}),e.jsx("td",{children:new Date(a.created_at).toLocaleDateString()}),e.jsx("td",{children:a.uploaded_by_name})]},i)})})]})}):e.jsx("p",{className:"text-muted",children:"No hay comprobantes recientes"})})]})}),e.jsx(r,{lg:6,children:e.jsxs(l,{className:"shadow-sm",children:[e.jsx(l.Header,{children:e.jsx("h5",{className:"mb-0",children:"Pagos Aprobados Recientes"})}),e.jsx(l.Body,{children:((p=s==null?void 0:s.pagosRecientes)==null?void 0:p.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Monto"}),e.jsx("th",{children:"Empresa"}),e.jsx("th",{children:"Fecha Aprobación"}),e.jsx("th",{children:"Aprobado por"})]})}),e.jsx("tbody",{children:s.pagosRecientes.map((a,i)=>{var c;return e.jsxs("tr",{children:[e.jsxs("td",{children:["$",((c=a.amount)==null?void 0:c.toLocaleString())||0]}),e.jsx("td",{children:a.company_name}),e.jsx("td",{children:new Date(a.approved_at).toLocaleDateString()}),e.jsx("td",{children:a.approved_by_name})]},i)})})]})}):e.jsx("p",{className:"text-muted",children:"No hay pagos recientes"})})]})})]}),e.jsx(o,{children:e.jsx(r,{children:e.jsxs(l,{className:"shadow-sm",children:[e.jsx(l.Header,{children:e.jsx("h5",{className:"mb-0",children:"Resumen de Estados de Comprobantes"})}),e.jsx(l.Body,{children:e.jsxs(o,{children:[e.jsx(r,{md:4,children:e.jsxs("div",{className:"text-center p-3",children:[e.jsx("div",{className:"display-6 text-warning",children:(s==null?void 0:s.comprobantesPendientes)||0}),e.jsx("div",{className:"text-muted",children:"Pendientes"}),e.jsxs("small",{className:"text-muted",children:["$",((s==null?void 0:s.montoTotalPendiente)||0).toLocaleString()]})]})}),e.jsx(r,{md:4,children:e.jsxs("div",{className:"text-center p-3",children:[e.jsx("div",{className:"display-6 text-success",children:(s==null?void 0:s.comprobantesAprobados)||0}),e.jsx("div",{className:"text-muted",children:"Aprobados"}),e.jsxs("small",{className:"text-muted",children:["$",((s==null?void 0:s.montoTotalAprobado)||0).toLocaleString()]})]})}),e.jsx(r,{md:4,children:e.jsxs("div",{className:"text-center p-3",children:[e.jsx("div",{className:"display-6 text-danger",children:(s==null?void 0:s.comprobantesRechazados)||0}),e.jsx("div",{className:"text-muted",children:"Rechazados"}),e.jsxs("small",{className:"text-muted",children:["$",((s==null?void 0:s.montoTotalRechazado)||0).toLocaleString()]})]})})]})})]})})})]})}export{M as default};
//# sourceMappingURL=FacturacionDashboard-R5FU223a.js.map
