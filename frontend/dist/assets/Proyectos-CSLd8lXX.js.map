{"version":3,"file":"Proyectos-CSLd8lXX.js","sources":["../../src/pages/Proyectos.jsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { Button, Badge, Row, Col, Card, Container } from 'react-bootstrap';\r\nimport { FiPlus, FiEdit, FiTrash2, FiHome, FiMapPin, FiCalendar, FiUser, FiCheckCircle, FiClock, FiX, FiRefreshCw, FiFolder, FiMessageCircle, FiCheck, FiSettings } from 'react-icons/fi';\r\nimport PageHeader from '../components/common/PageHeader';\r\nimport DataTable from '../components/common/DataTable';\r\nimport ModalForm from '../components/common/ModalForm';\r\nimport StatsCard from '../components/common/StatsCard';\r\nimport { listProjects, createProject, updateProject, deleteProject, getProjectStats, updateProjectStatus } from '../services/projects';\r\n\r\nconst emptyForm = { company_id: '', name: '', location: '', vendedor_id: '', laboratorio_id: '', requiere_laboratorio: false, requiere_ingenieria: false, contact_name: '', contact_phone: '', contact_email: '' };\r\n\r\nexport default function Proyectos() {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingProject, setEditingProject] = useState(null);\r\n  const [deletingProject, setDeletingProject] = useState(null);\r\n  const [showCategoriesModal, setShowCategoriesModal] = useState(false);\r\n  const [showQueriesModal, setShowQueriesModal] = useState(false);\r\n  const [showStatusModal, setShowStatusModal] = useState(false);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedStatus, setSelectedStatus] = useState('');\r\n  const [selectedCompany, setSelectedCompany] = useState('');\r\n  const [selectedProjectType, setSelectedProjectType] = useState('');\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  \r\n  // Obtener cliente pre-seleccionado desde la navegación\r\n  const selectedClient = location.state?.selectedClient;\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const { data, isLoading, refetch } = useQuery(\r\n    ['projects', currentPage, searchTerm, selectedStatus, selectedCompany, selectedProjectType],\r\n    () => listProjects({ \r\n      page: currentPage, \r\n      limit: 20, \r\n      search: searchTerm, \r\n      status: selectedStatus, \r\n      company_id: selectedCompany,\r\n      project_type: selectedProjectType\r\n    }),\r\n    { \r\n      keepPreviousData: true,\r\n      refetchOnWindowFocus: true,\r\n      refetchOnMount: true,\r\n      staleTime: 0,\r\n      cacheTime: 0\r\n    }\r\n  );\r\n\r\n  // Estadísticas separadas\r\n  const { data: statsData, isLoading: statsLoading } = useQuery(\r\n    ['projectStats'],\r\n    getProjectStats,\r\n    {\r\n      refetchOnWindowFocus: true,\r\n      refetchOnMount: true,\r\n      staleTime: 30000, // 30 segundos\r\n      cacheTime: 60000  // 1 minuto\r\n    }\r\n  );\r\n\r\n  const handleMutationSuccess = (message) => {\r\n    queryClient.invalidateQueries('projects');\r\n    queryClient.invalidateQueries('projectStats');\r\n    setShowModal(false);\r\n    setEditingProject(null);\r\n    setDeletingProject(null);\r\n  };\r\n\r\n  // Función para manejar búsqueda\r\n  const handleSearch = (searchValue) => {\r\n    console.log('🔍 handleSearch - Búsqueda:', searchValue);\r\n    setSearchTerm(searchValue);\r\n    setCurrentPage(1); // Resetear a la primera página\r\n    setIsSearching(true);\r\n    setTimeout(() => setIsSearching(false), 1000);\r\n  };\r\n\r\n  // Función para manejar filtros\r\n  const handleFilter = (filters) => {\r\n    console.log('🔍 handleFilter - Filtros:', filters);\r\n    setSelectedStatus(filters.status || '');\r\n    setSelectedCompany(filters.company_id || '');\r\n    setSelectedProjectType(filters.project_type || '');\r\n    setCurrentPage(1); // Resetear a la primera página\r\n  };\r\n\r\n  // Opciones de filtros específicas para proyectos\r\n  const projectFilterOptions = [\r\n    {\r\n      title: 'Por Estado',\r\n      options: [\r\n        { label: 'Pendientes', filter: { status: 'pendiente' } },\r\n        { label: 'Activos', filter: { status: 'activo' } },\r\n        { label: 'Completados', filter: { status: 'completado' } },\r\n        { label: 'Cancelados', filter: { status: 'cancelado' } }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Por Tipo de Proyecto',\r\n      options: [\r\n        { label: 'Análisis de Suelos', filter: { project_type: 'Análisis de Suelos' } },\r\n        { label: 'Estudio Geotécnico', filter: { project_type: 'Estudio Geotécnico' } },\r\n        { label: 'Evaluación Ambiental', filter: { project_type: 'Evaluación Ambiental' } },\r\n        { label: 'Control de Calidad', filter: { project_type: 'Control de Calidad' } },\r\n        { label: 'Análisis de Agua', filter: { project_type: 'Análisis de Agua' } },\r\n        { label: 'Estudio de Impacto', filter: { project_type: 'Estudio de Impacto' } },\r\n        { label: 'Análisis Químico', filter: { project_type: 'Análisis Químico' } },\r\n        { label: 'Pruebas de Laboratorio', filter: { project_type: 'Pruebas de Laboratorio' } },\r\n        { label: 'Inspección Técnica', filter: { project_type: 'Inspección Técnica' } },\r\n        { label: 'Certificación de Materiales', filter: { project_type: 'Certificación de Materiales' } }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  const createMutation = useMutation(createProject, {\r\n    onSuccess: () => handleMutationSuccess('Proyecto creado exitosamente'),\r\n    onError: (error) => console.error('Error creating project:', error)\r\n  });\r\n\r\n  const updateMutation = useMutation(updateProject, {\r\n    onSuccess: () => handleMutationSuccess('Proyecto actualizado exitosamente'),\r\n    onError: (error) => console.error('Error updating project:', error)\r\n  });\r\n\r\n  const deleteMutation = useMutation(deleteProject, {\r\n    onSuccess: () => handleMutationSuccess('Proyecto eliminado exitosamente'),\r\n    onError: (error) => console.error('Error deleting project:', error)\r\n  });\r\n\r\n  const updateStatusMutation = useMutation(\r\n    ({ id, ...data }) => updateProjectStatus(id, data),\r\n    {\r\n      onSuccess: () => handleMutationSuccess('Estado del proyecto actualizado exitosamente'),\r\n      onError: (error) => console.error('Error updating project status:', error)\r\n    }\r\n  );\r\n\r\n  const handleCreate = () => {\r\n    // Si hay un cliente pre-seleccionado, pre-llenar el formulario\r\n    const formData = selectedClient ? {\r\n      ...emptyForm,\r\n      company_id: selectedClient.id,\r\n      name: `${selectedClient.sector || 'Proyecto'} - ${selectedClient.name}`,\r\n      location: selectedClient.city || '',\r\n      contact_name: selectedClient.contact_name || '',\r\n      contact_phone: selectedClient.phone || '',\r\n      contact_email: selectedClient.email || ''\r\n    } : emptyForm;\r\n    \r\n    setEditingProject(formData);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleEdit = (project) => {\r\n    setEditingProject(project);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDelete = (project) => {\r\n    if (window.confirm(`¿Estás seguro de que quieres eliminar el proyecto \"${project.name}\"?`)) {\r\n      deleteMutation.mutate(project.id);\r\n    }\r\n  };\r\n\r\n  const handleViewCategories = (project) => {\r\n    setSelectedProject(project);\r\n    setShowCategoriesModal(true);\r\n  };\r\n\r\n  const handleViewQueries = (project) => {\r\n    setSelectedProject(project);\r\n    setShowQueriesModal(true);\r\n  };\r\n\r\n  const handleToggleMark = async (project) => {\r\n    try {\r\n      // Aquí implementarías la lógica para marcar/desmarcar\r\n      console.log('Marcar/desmarcar proyecto:', project);\r\n      // Por ahora solo mostramos un mensaje\r\n      alert(`Proyecto ${project.marked ? 'desmarcado' : 'marcado'}: ${project.name}`);\r\n    } catch (error) {\r\n      console.error('Error al marcar proyecto:', error);\r\n    }\r\n  };\r\n\r\n  const handleUpdateStatus = (project) => {\r\n    setSelectedProject(project);\r\n    setShowStatusModal(true);\r\n  };\r\n\r\n  const handleSubmit = async (formData) => {\r\n    if (editingProject.id) {\r\n      await updateMutation.mutateAsync({ id: editingProject.id, ...formData });\r\n    } else {\r\n      await createMutation.mutateAsync(formData);\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const statusConfig = {\r\n      'activo': { bg: 'success', text: 'Activo' },\r\n      'pendiente': { bg: 'warning', text: 'Pendiente' },\r\n      'completado': { bg: 'primary', text: 'Completado' },\r\n      'cancelado': { bg: 'danger', text: 'Cancelado' }\r\n    };\r\n    \r\n    const config = statusConfig[status] || { bg: 'secondary', text: status };\r\n    return <Badge bg={config.bg} className=\"status-badge\">{config.text}</Badge>;\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      header: 'ID',\r\n      accessor: 'id',\r\n      width: '80px'\r\n    },\r\n    {\r\n      header: 'Proyecto',\r\n      accessor: 'name',\r\n      render: (value, row) => (\r\n        <div>\r\n          <div className=\"fw-medium\">{row.name}</div>\r\n          {row.location && (\r\n            <small className=\"text-muted\">\r\n              <FiMapPin size={12} className=\"me-1\" />\r\n              {row.location}\r\n            </small>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Tipo de Proyecto',\r\n      accessor: 'project_type',\r\n      render: (value, row) => {\r\n        const projectType = row.project_type || 'General';\r\n        let typeColor = 'secondary';\r\n        \r\n        // Asignar colores según el tipo de proyecto\r\n        switch (projectType) {\r\n          case 'Análisis de Suelos':\r\n            typeColor = 'success';\r\n            break;\r\n          case 'Estudio Geotécnico':\r\n            typeColor = 'primary';\r\n            break;\r\n          case 'Evaluación Ambiental':\r\n            typeColor = 'info';\r\n            break;\r\n          case 'Control de Calidad':\r\n            typeColor = 'warning';\r\n            break;\r\n          case 'Análisis de Agua':\r\n            typeColor = 'info';\r\n            break;\r\n          case 'Estudio de Impacto':\r\n            typeColor = 'danger';\r\n            break;\r\n          case 'Análisis Químico':\r\n            typeColor = 'primary';\r\n            break;\r\n          case 'Pruebas de Laboratorio':\r\n            typeColor = 'success';\r\n            break;\r\n          case 'Inspección Técnica':\r\n            typeColor = 'warning';\r\n            break;\r\n          case 'Certificación de Materiales':\r\n            typeColor = 'info';\r\n            break;\r\n          default:\r\n            typeColor = 'secondary';\r\n        }\r\n        \r\n        return (\r\n          <Badge bg={typeColor} className=\"px-2 py-1\">\r\n            {projectType}\r\n          </Badge>\r\n        );\r\n      }\r\n    },\r\n    {\r\n      header: 'Empresa',\r\n      accessor: 'company_name',\r\n      render: (value, row) => (\r\n        <div>\r\n          <div className=\"fw-medium\">{row.company_name || 'Sin empresa'}</div>\r\n          {row.company_ruc && (\r\n            <small className=\"text-muted\">RUC: {row.company_ruc}</small>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Estado',\r\n      accessor: 'status',\r\n      render: (value) => getStatusBadge(value || 'activo')\r\n    },\r\n    {\r\n      header: 'Servicios Requeridos',\r\n      accessor: 'services',\r\n      render: (value, row) => (\r\n        <div className=\"d-flex flex-wrap gap-1\">\r\n          {row.requiere_laboratorio && (\r\n            <Badge bg=\"info\" className=\"px-2 py-1\">\r\n              <FiHome size={12} className=\"me-1\" />\r\n              Laboratorio\r\n            </Badge>\r\n          )}\r\n          {row.requiere_ingenieria && (\r\n            <Badge bg=\"primary\" className=\"px-2 py-1\">\r\n              <FiUser size={12} className=\"me-1\" />\r\n              Ingeniería\r\n            </Badge>\r\n          )}\r\n          {!row.requiere_laboratorio && !row.requiere_ingenieria && (\r\n            <Badge bg=\"secondary\" className=\"px-2 py-1\">\r\n              Sin servicios\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Contacto',\r\n      accessor: 'contacto',\r\n      render: (value, row) => (\r\n        <div className=\"small\">\r\n          {row.contact_name && (\r\n            <div><strong>{row.contact_name}</strong></div>\r\n          )}\r\n          {row.contact_phone && (\r\n            <div className=\"text-muted\">{row.contact_phone}</div>\r\n          )}\r\n          {row.contact_email && (\r\n            <div className=\"text-muted\">{row.contact_email}</div>\r\n          )}\r\n          {!row.contact_name && !row.contact_phone && !row.contact_email && (\r\n            <span className=\"text-muted\">Sin contacto</span>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Asignado a',\r\n      accessor: 'vendedor_name',\r\n      render: (value, row) => (\r\n        <div>\r\n          {row.vendedor_name && (\r\n            <div className=\"d-flex align-items-center\">\r\n              <FiUser size={14} className=\"me-1 text-muted\" />\r\n              <span>{row.vendedor_name}</span>\r\n            </div>\r\n          )}\r\n          {row.laboratorio_name && (\r\n            <div className=\"d-flex align-items-center mt-1\">\r\n              <FiHome size={14} className=\"me-1 text-muted\" />\r\n              <span className=\"small text-muted\">{row.laboratorio_name}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Fecha Creación',\r\n      accessor: 'created_at',\r\n      type: 'date'\r\n    }\r\n  ];\r\n\r\n  const formFields = [\r\n    {\r\n      name: 'company_id',\r\n      label: 'Empresa/Cliente',\r\n      type: 'select',\r\n      required: true,\r\n      options: data?.companies?.map(company => ({\r\n        value: company.id,\r\n        label: `${company.name} (${company.ruc || company.dni || 'Sin RUC/DNI'})`\r\n      })) || [],\r\n      description: 'Selecciona un cliente existente o crea uno nuevo desde el módulo de clientes'\r\n    },\r\n    {\r\n      name: 'name',\r\n      label: 'Nombre del Proyecto',\r\n      type: 'text',\r\n      required: true,\r\n      placeholder: 'Ingresa el nombre del proyecto'\r\n    },\r\n    {\r\n      name: 'location',\r\n      label: 'Ubicación del Proyecto',\r\n      type: 'text',\r\n      placeholder: 'Ingresa la ubicación del proyecto',\r\n      required: true\r\n    },\r\n    {\r\n      name: 'contact_name',\r\n      label: 'Persona de Contacto',\r\n      type: 'text',\r\n      placeholder: 'Nombre de la persona con quien negociar',\r\n      description: 'Persona responsable del proyecto en el cliente'\r\n    },\r\n    {\r\n      name: 'contact_phone',\r\n      label: 'Teléfono de Contacto',\r\n      type: 'text',\r\n      placeholder: 'Teléfono para comunicación directa',\r\n      description: 'Número para llamadas urgentes o seguimiento'\r\n    },\r\n    {\r\n      name: 'contact_email',\r\n      label: 'Email de Contacto',\r\n      type: 'email',\r\n      placeholder: 'Email para comunicación',\r\n      description: 'Email para envío de reportes y documentos'\r\n    },\r\n    {\r\n      name: 'vendedor_id',\r\n      label: 'Vendedor Asignado',\r\n      type: 'select',\r\n      options: data?.users?.filter(user => \r\n        ['vendedor_comercial', 'jefa_comercial'].includes(user.role)\r\n      ).map(user => ({\r\n        value: user.id,\r\n        label: `${user.name} ${user.apellido}`\r\n      })) || []\r\n    },\r\n    {\r\n      name: 'laboratorio_id',\r\n      label: 'Responsable de Laboratorio',\r\n      type: 'select',\r\n      options: data?.users?.filter(user => \r\n        ['jefe_laboratorio', 'usuario_laboratorio', 'laboratorio'].includes(user.role)\r\n      ).map(user => ({\r\n        value: user.id,\r\n        label: `${user.name} ${user.apellido}`\r\n      })) || []\r\n    },\r\n    {\r\n      name: 'requiere_laboratorio',\r\n      label: 'Requiere Servicios de Laboratorio',\r\n      type: 'checkbox',\r\n      description: 'Marcar si el proyecto necesita análisis o pruebas de laboratorio'\r\n    },\r\n    {\r\n      name: 'requiere_ingenieria',\r\n      label: 'Requiere Servicios de Ingeniería',\r\n      type: 'checkbox',\r\n      description: 'Marcar si el proyecto necesita estudios o consultoría de ingeniería'\r\n    }\r\n  ];\r\n\r\n  // Calcular estadísticas\r\n  const stats = useMemo(() => {\r\n    if (statsData) {\r\n      console.log('📊 Stats - Usando estadísticas reales del backend:', statsData);\r\n      return {\r\n        total: statsData.total || 0,\r\n        activos: statsData.activos || 0,\r\n        completados: statsData.completados || 0,\r\n        pendientes: statsData.pendientes || 0,\r\n        cancelados: statsData.cancelados || 0\r\n      };\r\n    }\r\n    // Fallback: calcular desde los datos de la página actual\r\n    const projects = data?.data || [];\r\n    console.log('📊 Stats - Fallback: calculando desde página actual:', projects);\r\n    return {\r\n      total: projects.length,\r\n      activos: projects.filter(p => p.status === 'activo').length,\r\n      completados: projects.filter(p => p.status === 'completado').length,\r\n      pendientes: projects.filter(p => p.status === 'pendiente').length,\r\n      cancelados: projects.filter(p => p.status === 'cancelado').length\r\n    };\r\n  }, [statsData, data]);\r\n\r\n  return (\r\n    <Container fluid className=\"py-4\">\r\n      <div className=\"fade-in\">\r\n        <PageHeader\r\n          title=\"Gestión de Proyectos\"\r\n          subtitle={selectedClient ? `Crear proyecto para: ${selectedClient.name}` : \"Crear, editar y gestionar proyectos del sistema\"}\r\n          icon={FiHome}\r\n          actions={\r\n            <div className=\"d-flex gap-2\">\r\n              {selectedClient && (\r\n                <Badge bg=\"info\" className=\"px-3 py-2 d-flex align-items-center\">\r\n                  <FiUser className=\"me-1\" />\r\n                  Cliente: {selectedClient.name}\r\n                </Badge>\r\n              )}\r\n              <Button variant=\"primary\" onClick={handleCreate}>\r\n                <FiPlus className=\"me-2\" />\r\n                {selectedClient ? 'Crear Proyecto' : 'Nuevo Proyecto'}\r\n              </Button>\r\n            </div>\r\n          }\r\n        />\r\n\r\n        {/* Estadísticas */}\r\n        <Row className=\"g-4 mb-4\">\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Total Proyectos\"\r\n              value={stats.total}\r\n              icon={FiHome}\r\n              color=\"primary\"\r\n              subtitle=\"Proyectos registrados\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Proyectos Activos\"\r\n              value={stats.activos}\r\n              icon={FiCheckCircle}\r\n              color=\"success\"\r\n              subtitle=\"En desarrollo\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Completados\"\r\n              value={stats.completados}\r\n              icon={FiCheckCircle}\r\n              color=\"info\"\r\n              subtitle=\"Finalizados\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Pendientes\"\r\n              value={stats.pendientes}\r\n              icon={FiClock}\r\n              color=\"warning\"\r\n              subtitle=\"Por iniciar\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Tabla de proyectos */}\r\n        <Card className=\"shadow-sm border-0\">\r\n          <Card.Header className=\"bg-white border-bottom\">\r\n            <div className=\"d-flex justify-content-between align-items-center\">\r\n              <h5 className=\"mb-0\">\r\n                <FiHome className=\"me-2 text-primary\" />\r\n                Lista de Proyectos\r\n              </h5>\r\n              <div className=\"d-flex align-items-center gap-2\">\r\n                <Button\r\n                  variant=\"outline-secondary\"\r\n                  size=\"sm\"\r\n                  onClick={() => refetch()}\r\n                  className=\"d-flex align-items-center\"\r\n                  title=\"Actualizar datos\"\r\n                >\r\n                  <FiRefreshCw className={`${isLoading ? 'spinning' : ''}`} />\r\n                </Button>\r\n                <Badge bg=\"light\" text=\"dark\" className=\"px-3 py-2\">\r\n                  {stats.total} proyectos\r\n                </Badge>\r\n              </div>\r\n            </div>\r\n          </Card.Header>\r\n          <Card.Body className=\"p-0\">\r\n            <DataTable\r\n              data={data?.data || []}\r\n              columns={columns}\r\n              loading={isLoading || isSearching}\r\n              onEdit={handleEdit}\r\n              onDelete={handleDelete}\r\n              actions={[\r\n                { label: 'Editar', icon: FiEdit, onClick: handleEdit, variant: 'outline-primary' },\r\n                { label: 'Estado', icon: FiSettings, onClick: handleUpdateStatus, variant: 'outline-secondary' },\r\n                { label: 'Categorías', icon: FiFolder, onClick: handleViewCategories, variant: 'outline-info' },\r\n                { label: 'Consultas', icon: FiMessageCircle, onClick: handleViewQueries, variant: 'outline-warning' },\r\n                { label: 'Marcar', icon: FiCheck, onClick: handleToggleMark, variant: 'outline-success' },\r\n                { label: 'Eliminar', icon: FiTrash2, onClick: handleDelete, variant: 'outline-danger' }\r\n              ]}\r\n              emptyMessage=\"No hay proyectos registrados\"\r\n              // Props para paginación del backend\r\n              totalItems={data?.total || 0}\r\n              itemsPerPage={20}\r\n              currentPage={currentPage}\r\n              onPageChange={setCurrentPage}\r\n              onSearch={handleSearch}\r\n              onFilter={handleFilter}\r\n              // Filtros específicos para proyectos\r\n              filterOptions={projectFilterOptions}\r\n            />\r\n          </Card.Body>\r\n        </Card>\r\n\r\n      <ModalForm\r\n        show={showModal}\r\n        onHide={() => setShowModal(false)}\r\n        title={editingProject?.id ? 'Editar Proyecto' : 'Nuevo Proyecto'}\r\n        data={editingProject || emptyForm}\r\n        fields={formFields}\r\n        onSubmit={handleSubmit}\r\n        loading={createMutation.isLoading || updateMutation.isLoading}\r\n        submitText={editingProject?.id ? 'Actualizar' : 'Crear'}\r\n      />\r\n\r\n      {/* Modal para Categorías */}\r\n      <ModalForm\r\n        show={showCategoriesModal}\r\n        onHide={() => setShowCategoriesModal(false)}\r\n        title={`Categorías - ${selectedProject?.name || ''}`}\r\n        data={selectedProject || {}}\r\n        fields={[\r\n          {\r\n            name: 'categories',\r\n            label: 'Categorías del Proyecto',\r\n            type: 'checkbox-group',\r\n            options: [\r\n              { value: 'laboratorio', label: 'Laboratorio' },\r\n              { value: 'ingenieria', label: 'Ingeniería' },\r\n              { value: 'consultoria', label: 'Consultoría' },\r\n              { value: 'capacitacion', label: 'Capacitación' },\r\n              { value: 'auditoria', label: 'Auditoría' }\r\n            ]\r\n          }\r\n        ]}\r\n        onSubmit={(data) => {\r\n          console.log('Categorías actualizadas:', data);\r\n          setShowCategoriesModal(false);\r\n        }}\r\n        submitText=\"Guardar Categorías\"\r\n      />\r\n\r\n      {/* Modal para Consultas */}\r\n      <ModalForm\r\n        show={showQueriesModal}\r\n        onHide={() => setShowQueriesModal(false)}\r\n        title={`Consultas - ${selectedProject?.name || ''}`}\r\n        data={selectedProject || {}}\r\n        fields={[\r\n          {\r\n            name: 'queries',\r\n            label: 'Consultas y Dudas',\r\n            type: 'textarea',\r\n            placeholder: 'Ingresa las consultas o dudas del cliente...',\r\n            rows: 5\r\n          }\r\n        ]}\r\n        onSubmit={(data) => {\r\n          console.log('Consultas actualizadas:', data);\r\n          setShowQueriesModal(false);\r\n        }}\r\n        submitText=\"Guardar Consultas\"\r\n      />\r\n\r\n      {/* Modal para Actualizar Estado */}\r\n      <ModalForm\r\n        show={showStatusModal}\r\n        onHide={() => setShowStatusModal(false)}\r\n        title={`Actualizar Estado - ${selectedProject?.name || ''}`}\r\n        data={selectedProject || {}}\r\n        fields={[\r\n          {\r\n            name: 'status',\r\n            label: 'Estado del Proyecto',\r\n            type: 'select',\r\n            required: true,\r\n            options: [\r\n              { value: 'pendiente', label: 'Pendiente' },\r\n              { value: 'en_proceso', label: 'En Proceso' },\r\n              { value: 'completado', label: 'Completado' },\r\n              { value: 'pausado', label: 'Pausado' },\r\n              { value: 'cancelado', label: 'Cancelado' }\r\n            ]\r\n          },\r\n          {\r\n            name: 'laboratorio_status',\r\n            label: 'Estado del Servicio de Laboratorio',\r\n            type: 'select',\r\n            options: [\r\n              { value: 'no_requerido', label: 'No Requerido' },\r\n              { value: 'pendiente', label: 'Pendiente' },\r\n              { value: 'en_proceso', label: 'En Proceso' },\r\n              { value: 'completado', label: 'Completado' },\r\n              { value: 'pausado', label: 'Pausado' },\r\n              { value: 'cancelado', label: 'Cancelado' }\r\n            ]\r\n          },\r\n          {\r\n            name: 'ingenieria_status',\r\n            label: 'Estado del Servicio de Ingeniería',\r\n            type: 'select',\r\n            options: [\r\n              { value: 'no_requerido', label: 'No Requerido' },\r\n              { value: 'pendiente', label: 'Pendiente' },\r\n              { value: 'en_proceso', label: 'En Proceso' },\r\n              { value: 'completado', label: 'Completado' },\r\n              { value: 'pausado', label: 'Pausado' },\r\n              { value: 'cancelado', label: 'Cancelado' }\r\n            ]\r\n          },\r\n          {\r\n            name: 'status_notes',\r\n            label: 'Notas del Estado',\r\n            type: 'textarea',\r\n            placeholder: 'Agrega comentarios sobre el cambio de estado...',\r\n            rows: 3\r\n          }\r\n        ]}\r\n        onSubmit={(data) => {\r\n          updateStatusMutation.mutate({ id: selectedProject.id, ...data });\r\n          setShowStatusModal(false);\r\n        }}\r\n        submitText=\"Actualizar Estado\"\r\n        loading={updateStatusMutation.isLoading}\r\n      />\r\n      </div>\r\n    </Container>\r\n  );\r\n};"],"names":["emptyForm","Proyectos","showModal","setShowModal","useState","editingProject","setEditingProject","deletingProject","setDeletingProject","showCategoriesModal","setShowCategoriesModal","showQueriesModal","setShowQueriesModal","showStatusModal","setShowStatusModal","selectedProject","setSelectedProject","currentPage","setCurrentPage","searchTerm","setSearchTerm","selectedStatus","setSelectedStatus","selectedCompany","setSelectedCompany","selectedProjectType","setSelectedProjectType","isSearching","setIsSearching","useNavigate","selectedClient","_a","useLocation","queryClient","useQueryClient","data","isLoading","refetch","useQuery","listProjects","statsData","statsLoading","getProjectStats","handleMutationSuccess","message","handleSearch","searchValue","handleFilter","filters","projectFilterOptions","createMutation","useMutation","createProject","error","updateMutation","updateProject","deleteMutation","deleteProject","updateStatusMutation","id","updateProjectStatus","handleCreate","formData","handleEdit","project","handleDelete","handleViewCategories","handleViewQueries","handleToggleMark","handleUpdateStatus","handleSubmit","getStatusBadge","status","config","jsx","Badge","columns","value","row","jsxs","FiMapPin","projectType","typeColor","FiHome","FiUser","formFields","_b","company","_c","user","_d","stats","useMemo","projects","p","Container","PageHeader","Button","FiPlus","Row","Col","StatsCard","FiCheckCircle","FiClock","Card","FiRefreshCw","DataTable","FiEdit","FiSettings","FiFolder","FiMessageCircle","FiCheck","FiTrash2","ModalForm"],"mappings":"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"}