{"version":3,"file":"Clientes-DzYEvZBn.js","sources":["../../src/components/ClientFormRedesigned.jsx","../../src/components/common/PermissionDeniedModal.jsx","../../src/components/ClientStatusDropdown.jsx","../../src/pages/Clientes.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { FiUser, FiMail, FiPhone, FiMapPin, FiHome, FiUserCheck, FiX, FiSave } from 'react-icons/fi';\r\nimport './ClientFormRedesigned.css';\r\n\r\nconst CLIENT_TYPES = [\r\n  { value: 'empresa', label: 'Empresa' },\r\n  { value: 'persona', label: 'Persona Natural' }\r\n];\r\n\r\nconst SECTORS = [\r\n  { value: 'construccion', label: 'Construcci√≥n' },\r\n  { value: 'mineria', label: 'Miner√≠a' },\r\n  { value: 'servicios', label: 'Servicios' },\r\n  { value: 'comercio', label: 'Comercio' },\r\n  { value: 'industria', label: 'Industria' },\r\n  { value: 'gobierno', label: 'Gobierno' },\r\n  { value: 'otro', label: 'Otro' }\r\n];\r\n\r\nconst CITIES = [\r\n  { value: 'lima', label: 'Lima' },\r\n  { value: 'arequipa', label: 'Arequipa' },\r\n  { value: 'trujillo', label: 'Trujillo' },\r\n  { value: 'chiclayo', label: 'Chiclayo' },\r\n  { value: 'piura', label: 'Piura' },\r\n  { value: 'cusco', label: 'Cusco' },\r\n  { value: 'otro', label: 'Otra' }\r\n];\r\n\r\nconst PRIORITIES = [\r\n  { value: 'urgent', label: 'URGENTE' },\r\n  { value: 'high', label: 'ALTA' },\r\n  { value: 'normal', label: 'NORMAL' },\r\n  { value: 'low', label: 'BAJA' }\r\n];\r\n\r\nconst ClientFormRedesigned = ({ \r\n  show, \r\n  onHide, \r\n  data = {}, \r\n  onSubmit, \r\n  loading = false, \r\n  isEditing = false \r\n}) => {\r\n  const [formData, setFormData] = useState({\r\n    type: data.type || 'empresa',\r\n    name: data.name || '',\r\n    ruc: data.ruc || '',\r\n    dni: data.dni || '',\r\n    contact_name: data.contact_name || '',\r\n    email: data.email || '',\r\n    phone: data.phone || '',\r\n    address: data.address || '',\r\n    city: data.city || 'lima',\r\n    sector: data.sector || 'servicios',\r\n    priority: data.priority || 'normal',\r\n    actividad: data.actividad || '',\r\n    servicios: data.servicios || ''\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Resetear formulario cuando cambien los datos o se abra/cierre el modal\r\n  React.useEffect(() => {\r\n    if (show) {\r\n      // Si es un nuevo cliente (no hay ID), usar valores vac√≠os\r\n      const isNewClient = !data.id;\r\n      \r\n      setFormData({\r\n        type: data.type || 'empresa',\r\n        name: isNewClient ? '' : (data.name || ''),\r\n        ruc: isNewClient ? '' : (data.ruc || ''),\r\n        dni: isNewClient ? '' : (data.dni || ''),\r\n        contact_name: isNewClient ? '' : (data.contact_name || ''),\r\n        email: isNewClient ? '' : (data.email || ''),\r\n        phone: isNewClient ? '' : (data.phone || ''),\r\n        address: isNewClient ? '' : (data.address || ''),\r\n        city: data.city || 'lima',\r\n        sector: data.sector || 'servicios',\r\n        priority: data.priority || 'normal',\r\n        actividad: isNewClient ? '' : (data.actividad || ''),\r\n        servicios: isNewClient ? '' : (data.servicios || '')\r\n      });\r\n      setErrors({});\r\n    }\r\n  }, [show, data, isEditing]);\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    \r\n    // Validaci√≥n en tiempo real para RUC y DNI\r\n    if (field === 'ruc' && formData.type === 'empresa') {\r\n      if (value && !validateRUC(value)) {\r\n        setErrors(prev => ({ ...prev, ruc: 'El RUC debe empezar con 20 o 209999999 y tener 11 d√≠gitos' }));\r\n      } else {\r\n        setErrors(prev => ({ ...prev, ruc: '' }));\r\n      }\r\n    }\r\n    \r\n    if (field === 'dni' && formData.type === 'persona') {\r\n      if (value && !validateDNI(value)) {\r\n        setErrors(prev => ({ ...prev, dni: 'El DNI debe tener exactamente 8 d√≠gitos' }));\r\n      } else {\r\n        setErrors(prev => ({ ...prev, dni: '' }));\r\n      }\r\n    }\r\n    \r\n    if (field === 'phone') {\r\n      if (value && !validatePhone(value)) {\r\n        setErrors(prev => ({ ...prev, phone: 'El tel√©fono debe tener 9 d√≠gitos' }));\r\n      } else {\r\n        setErrors(prev => ({ ...prev, phone: '' }));\r\n      }\r\n    }\r\n    \r\n    // Limpiar error cuando el usuario empiece a escribir\r\n    if (errors[field] && field !== 'ruc' && field !== 'dni') {\r\n      setErrors(prev => ({ ...prev, [field]: '' }));\r\n    }\r\n  };\r\n\r\n  // Funci√≥n para validar RUC peruano\r\n  const validateRUC = (ruc) => {\r\n    if (!ruc) return false;\r\n    // RUC debe empezar con 20 o 209999999 y tener 11 d√≠gitos\r\n    const rucRegex = /^(20|209999999)\\d{9}$/;\r\n    return rucRegex.test(ruc);\r\n  };\r\n\r\n  // Funci√≥n para validar DNI peruano\r\n  const validateDNI = (dni) => {\r\n    if (!dni) return false;\r\n    // DNI debe tener exactamente 8 d√≠gitos\r\n    const dniRegex = /^\\d{8}$/;\r\n    return dniRegex.test(dni);\r\n  };\r\n\r\n  // Funci√≥n para validar tel√©fono peruano\r\n  const validatePhone = (phone) => {\r\n    if (!phone) return true; // Tel√©fono es opcional\r\n    // Tel√©fono debe tener 9 d√≠gitos\r\n    const phoneRegex = /^\\d{9}$/;\r\n    return phoneRegex.test(phone);\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'El nombre/raz√≥n social es requerido';\r\n    }\r\n\r\n    if (formData.type === 'empresa') {\r\n      if (!formData.ruc.trim()) {\r\n        newErrors.ruc = 'El RUC es requerido para empresas';\r\n      } else if (!validateRUC(formData.ruc)) {\r\n        newErrors.ruc = 'El RUC debe empezar con 20 o 209999999 y tener 11 d√≠gitos';\r\n      }\r\n    }\r\n\r\n    if (formData.type === 'persona') {\r\n      if (!formData.dni.trim()) {\r\n        newErrors.dni = 'El DNI es requerido para personas naturales';\r\n      } else if (!validateDNI(formData.dni)) {\r\n        newErrors.dni = 'El DNI debe tener exactamente 8 d√≠gitos';\r\n      }\r\n    }\r\n\r\n    if (formData.email && !/\\S+@\\S+\\.\\S+/.test(formData.email)) {\r\n      newErrors.email = 'El email no es v√°lido';\r\n    }\r\n\r\n    if (formData.phone && !validatePhone(formData.phone)) {\r\n      newErrors.phone = 'El tel√©fono debe tener 9 d√≠gitos';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (validateForm()) {\r\n      const submitData = { ...formData };\r\n      \r\n      // Limpiar campos seg√∫n el tipo de cliente\r\n      if (submitData.type === 'empresa') {\r\n        delete submitData.dni;\r\n      } else {\r\n        delete submitData.ruc;\r\n      }\r\n      \r\n      onSubmit(submitData);\r\n    }\r\n  };\r\n\r\n  // Manejar errores del servidor\r\n  React.useEffect(() => {\r\n    if (data.error) {\r\n      if (data.error.includes('email') || data.error.includes('Email')) {\r\n        setErrors(prev => ({ ...prev, email: 'Este email ya est√° registrado' }));\r\n      }\r\n    }\r\n  }, [data.error]);\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"client-form-backdrop\" onClick={onHide}>\r\n      <div className=\"client-form-modal\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"client-form-header\">\r\n          <h4>\r\n            <FiUser className=\"client-form-icon\" />\r\n            {isEditing ? 'Editar Cliente' : 'Nuevo Cliente'}\r\n          </h4>\r\n          <button className=\"close-btn\" onClick={onHide}>\r\n            <FiX />\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"client-form-body\">\r\n          {/* Informaci√≥n B√°sica */}\r\n          <div className=\"client-form-section\">\r\n            <div className=\"client-form-section-title\">\r\n              <FiUser className=\"client-form-icon\" />\r\n              Informaci√≥n B√°sica\r\n            </div>\r\n            \r\n            <div className=\"client-form-row\">\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiHome className=\"client-form-icon\" />\r\n                  Tipo de Cliente <span className=\"required\">*</span>\r\n                </label>\r\n                <select\r\n                  className=\"client-form-select\"\r\n                  value={formData.type}\r\n                  onChange={(e) => handleInputChange('type', e.target.value)}\r\n                >\r\n                  {CLIENT_TYPES.map(type => (\r\n                    <option key={type.value} value={type.value}>\r\n                      {type.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiUserCheck className=\"client-form-icon\" />\r\n                  Nombre/Raz√≥n Social <span className=\"required\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className={`client-form-input ${errors.name ? 'error' : ''}`}\r\n                  value={formData.name}\r\n                  onChange={(e) => handleInputChange('name', e.target.value)}\r\n                  placeholder=\"Ingresa el nombre o raz√≥n social\"\r\n                />\r\n                {errors.name && <div className=\"client-form-error\">{errors.name}</div>}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"client-form-row\">\r\n              {formData.type === 'empresa' ? (\r\n                <div className=\"client-form-group\">\r\n                  <label className=\"client-form-label\">\r\n                    <FiHome className=\"client-form-icon\" />\r\n                    RUC <span className=\"required\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className={`client-form-input ${errors.ruc ? 'error' : (formData.ruc && validateRUC(formData.ruc) ? 'valid' : '')}`}\r\n                    value={formData.ruc}\r\n                    onChange={(e) => handleInputChange('ruc', e.target.value)}\r\n                    placeholder=\"20123456789\"\r\n                    maxLength=\"11\"\r\n                  />\r\n                  {errors.ruc && <div className=\"client-form-error\">{errors.ruc}</div>}\r\n                  <div className=\"client-form-help\">Solo para empresas - Debe empezar con 20 y tener 11 d√≠gitos</div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"client-form-group\">\r\n                  <label className=\"client-form-label\">\r\n                    <FiUser className=\"client-form-icon\" />\r\n                    DNI <span className=\"required\">*</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className={`client-form-input ${errors.dni ? 'error' : (formData.dni && validateDNI(formData.dni) ? 'valid' : '')}`}\r\n                    value={formData.dni}\r\n                    onChange={(e) => handleInputChange('dni', e.target.value)}\r\n                    placeholder=\"12345678\"\r\n                    maxLength=\"8\"\r\n                  />\r\n                  {errors.dni && <div className=\"client-form-error\">{errors.dni}</div>}\r\n                  <div className=\"client-form-help\">Solo para personas naturales - Debe tener exactamente 8 d√≠gitos</div>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiUser className=\"client-form-icon\" />\r\n                  Nombre de Contacto\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"client-form-input\"\r\n                  value={formData.contact_name}\r\n                  onChange={(e) => handleInputChange('contact_name', e.target.value)}\r\n                  placeholder=\"Ingresa el nombre del contacto\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Informaci√≥n de Contacto */}\r\n          <div className=\"client-form-section\">\r\n            <div className=\"client-form-section-title\">\r\n              <FiMail className=\"client-form-icon\" />\r\n              Informaci√≥n de Contacto\r\n            </div>\r\n            \r\n            <div className=\"client-form-row\">\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiMail className=\"client-form-icon\" />\r\n                  Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  className={`client-form-input ${errors.email ? 'error' : ''}`}\r\n                  value={formData.email}\r\n                  onChange={(e) => handleInputChange('email', e.target.value)}\r\n                  placeholder=\"contacto@empresa.com\"\r\n                />\r\n                {errors.email && <div className=\"client-form-error\">{errors.email}</div>}\r\n              </div>\r\n\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiPhone className=\"client-form-icon\" />\r\n                  Tel√©fono\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  className={`client-form-input ${errors.phone ? 'error' : (formData.phone && validatePhone(formData.phone) ? 'valid' : '')}`}\r\n                  value={formData.phone}\r\n                  onChange={(e) => handleInputChange('phone', e.target.value)}\r\n                  placeholder=\"930238631\"\r\n                  maxLength=\"9\"\r\n                />\r\n                {errors.phone && <div className=\"client-form-error\">{errors.phone}</div>}\r\n                <div className=\"client-form-help\">Debe tener 9 d√≠gitos</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Informaci√≥n de Ubicaci√≥n */}\r\n          <div className=\"client-form-section\">\r\n            <div className=\"client-form-section-title\">\r\n              <FiMapPin className=\"client-form-icon\" />\r\n              Informaci√≥n de Ubicaci√≥n\r\n            </div>\r\n            \r\n            <div className=\"client-form-row\">\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiMapPin className=\"client-form-icon\" />\r\n                  Direcci√≥n\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"client-form-input\"\r\n                  value={formData.address}\r\n                  onChange={(e) => handleInputChange('address', e.target.value)}\r\n                  placeholder=\"Ingresa la direcci√≥n\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiHome className=\"client-form-icon\" />\r\n                  Ciudad\r\n                </label>\r\n                <select\r\n                  className=\"client-form-select\"\r\n                  value={formData.city}\r\n                  onChange={(e) => handleInputChange('city', e.target.value)}\r\n                >\r\n                  {CITIES.map(city => (\r\n                    <option key={city.value} value={city.value}>\r\n                      {city.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"client-form-row\">\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiHome className=\"client-form-icon\" />\r\n                  Sector\r\n                </label>\r\n                <select\r\n                  className=\"client-form-select\"\r\n                  value={formData.sector}\r\n                  onChange={(e) => handleInputChange('sector', e.target.value)}\r\n                >\r\n                  {SECTORS.map(sector => (\r\n                    <option key={sector.value} value={sector.value}>\r\n                      {sector.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiUserCheck className=\"client-form-icon\" />\r\n                  Prioridad\r\n                </label>\r\n                <select\r\n                  className=\"client-form-select\"\r\n                  value={formData.priority}\r\n                  onChange={(e) => handleInputChange('priority', e.target.value)}\r\n                >\r\n                  {PRIORITIES.map(priority => (\r\n                    <option key={priority.value} value={priority.value}>\r\n                      {priority.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Informaci√≥n de Actividad y Servicios */}\r\n          <div className=\"client-form-section\">\r\n            <div className=\"client-form-section-title\">\r\n              <FiHome className=\"client-form-icon\" />\r\n              Actividad y Servicios\r\n            </div>\r\n            \r\n            <div className=\"client-form-row single\">\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiHome className=\"client-form-icon\" />\r\n                  Actividad Principal\r\n                </label>\r\n                <textarea\r\n                  className=\"client-form-input\"\r\n                  value={formData.actividad}\r\n                  onChange={(e) => handleInputChange('actividad', e.target.value)}\r\n                  placeholder=\"Describe la actividad principal de la empresa\"\r\n                  rows=\"3\"\r\n                />\r\n                <div className=\"client-form-help\">Describe brevemente a qu√© se dedica la empresa</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"client-form-row single\">\r\n              <div className=\"client-form-group\">\r\n                <label className=\"client-form-label\">\r\n                  <FiHome className=\"client-form-icon\" />\r\n                  Servicios\r\n                </label>\r\n                <textarea\r\n                  className=\"client-form-input\"\r\n                  value={formData.servicios}\r\n                  onChange={(e) => handleInputChange('servicios', e.target.value)}\r\n                  placeholder=\"Describe los servicios que ofrece o requiere la empresa\"\r\n                  rows=\"3\"\r\n                />\r\n                <div className=\"client-form-help\">Lista los servicios que ofrece o que necesita la empresa</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        <div className=\"client-form-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"client-form-btn client-form-btn-cancel\"\r\n            onClick={onHide}\r\n            disabled={loading}\r\n          >\r\n            <FiX />\r\n            Cancelar\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"client-form-btn client-form-btn-create\"\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <div className=\"spinner-border spinner-border-sm\" role=\"status\">\r\n                  <span className=\"visually-hidden\">Cargando...</span>\r\n                </div>\r\n                {isEditing ? 'Actualizando...' : 'Creando...'}\r\n              </>\r\n            ) : (\r\n              <>\r\n                <FiSave />\r\n                {isEditing ? 'Actualizar' : 'Crear'}\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientFormRedesigned;\r\n","import React from 'react';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { FiAlertTriangle, FiShield, FiX } from 'react-icons/fi';\r\n\r\nconst PermissionDeniedModal = ({ \r\n  show, \r\n  onHide, \r\n  action = \"realizar esta acci√≥n\",\r\n  requiredRole = \"administrador\",\r\n  currentRole = \"usuario\"\r\n}) => {\r\n  return (\r\n    <Modal show={show} onHide={onHide} centered backdrop=\"static\">\r\n      <Modal.Header className=\"bg-danger text-white border-0\">\r\n        <Modal.Title className=\"d-flex align-items-center\">\r\n          <FiShield className=\"me-2\" size={20} />\r\n          Acceso Denegado\r\n        </Modal.Title>\r\n        <Button \r\n          variant=\"link\" \r\n          className=\"text-white p-0 border-0\"\r\n          onClick={onHide}\r\n          style={{ fontSize: '1.5rem', lineHeight: 1 }}\r\n        >\r\n          <FiX />\r\n        </Button>\r\n      </Modal.Header>\r\n      \r\n      <Modal.Body className=\"py-4\">\r\n        <div className=\"text-center\">\r\n          <div className=\"mb-3\">\r\n            <FiAlertTriangle \r\n              size={48} \r\n              className=\"text-warning\"\r\n            />\r\n          </div>\r\n          \r\n          <h5 className=\"text-danger mb-3\">\r\n            No tienes permisos para {action}\r\n          </h5>\r\n          \r\n          <div className=\"alert alert-warning border-0 mb-3\">\r\n            <div className=\"d-flex align-items-center\">\r\n              <FiShield className=\"me-2 text-warning\" size={16} />\r\n              <div>\r\n                <strong>Rol requerido:</strong> {requiredRole}\r\n                <br />\r\n                <strong>Tu rol actual:</strong> {currentRole}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <p className=\"text-muted mb-0\">\r\n            Contacta al administrador del sistema si necesitas acceso a esta funcionalidad.\r\n          </p>\r\n        </div>\r\n      </Modal.Body>\r\n      \r\n      <Modal.Footer className=\"border-0 justify-content-center\">\r\n        <Button \r\n          variant=\"secondary\" \r\n          onClick={onHide}\r\n          className=\"px-4\"\r\n        >\r\n          Entendido\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default PermissionDeniedModal;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { Dropdown, Button, Spinner, Alert } from 'react-bootstrap';\r\nimport { createPortal } from 'react-dom';\r\nimport { useQueryClient } from 'react-query';\r\nimport { FiChevronDown, FiCheck, FiSearch, FiHeart, FiClock, FiSend, FiMessageSquare, FiCheckCircle, FiX, FiMoreHorizontal, FiUserCheck, FiPhoneOff } from 'react-icons/fi';\r\nimport { updateClientStatus } from '../services/companies';\r\n\r\n// Estados de clientes con iconos y colores\r\nconst CLIENT_STATUSES = {\r\n  prospeccion: {\r\n    label: 'Prospecci√≥n',\r\n    icon: FiSearch,\r\n    color: 'secondary',\r\n    bgColor: '#6c757d'\r\n  },\r\n  contactado: {\r\n    label: 'Contactado',\r\n    icon: FiUserCheck,\r\n    color: 'primary',\r\n    bgColor: '#007bff'\r\n  },\r\n  no_contesto: {\r\n    label: 'No contest√≥',\r\n    icon: FiPhoneOff,\r\n    color: 'warning',\r\n    bgColor: '#ffc107'\r\n  },\r\n  interesado: {\r\n    label: 'Interesado',\r\n    icon: FiHeart,\r\n    color: 'info',\r\n    bgColor: '#17a2b8'\r\n  },\r\n  pendiente_cotizacion: {\r\n    label: 'Pendiente de Cotizaci√≥n',\r\n    icon: FiClock,\r\n    color: 'warning',\r\n    bgColor: '#ffc107'\r\n  },\r\n  cotizacion_enviada: {\r\n    label: 'Cotizaci√≥n Enviada',\r\n    icon: FiSend,\r\n    color: 'info',\r\n    bgColor: '#17a2b8'\r\n  },\r\n  negociacion: {\r\n    label: 'Negociaci√≥n',\r\n    icon: FiMessageSquare,\r\n    color: 'secondary',\r\n    bgColor: '#6c757d'\r\n  },\r\n  ganado: {\r\n    label: 'Ganado',\r\n    icon: FiCheckCircle,\r\n    color: 'success',\r\n    bgColor: '#28a745'\r\n  },\r\n  perdido: {\r\n    label: 'Perdido',\r\n    icon: FiX,\r\n    color: 'danger',\r\n    bgColor: '#dc3545'\r\n  },\r\n  otro: {\r\n    label: 'Otro',\r\n    icon: FiMoreHorizontal,\r\n    color: 'light',\r\n    bgColor: '#f8f9fa'\r\n  }\r\n};\r\n\r\nconst ClientStatusDropdown = ({ \r\n  clientId, \r\n  currentStatus, \r\n  onStatusChange, \r\n  disabled = false,\r\n  size = 'sm',\r\n  showLabel = true \r\n}) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [show, setShow] = useState(false);\r\n  const [position, setPosition] = useState({ top: 0, left: 0 });\r\n  const buttonRef = useRef(null);\r\n  const menuRef = useRef(null);\r\n  const queryClient = useQueryClient();\r\n\r\n  const handleToggle = () => {\r\n    if (buttonRef.current) {\r\n      const rect = buttonRef.current.getBoundingClientRect();\r\n      setPosition({\r\n        top: rect.bottom + 5,\r\n        left: rect.left\r\n      });\r\n    }\r\n    setShow(!show);\r\n  };\r\n\r\n  const handleClickOutside = (event) => {\r\n    if (show && menuRef.current && !menuRef.current.contains(event.target) && \r\n        buttonRef.current && !buttonRef.current.contains(event.target)) {\r\n      setShow(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (show) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }\r\n  }, [show]);\r\n\r\n  const handleStatusChange = async (newStatus) => {\r\n    if (newStatus === currentStatus) return;\r\n    \r\n    console.log(`üîÑ ClientStatusDropdown - Iniciando cambio de estado del cliente ${clientId} de '${currentStatus}' a '${newStatus}'`);\r\n    \r\n    // Actualizaci√≥n optimista inmediata - cambiar el estado visual al instante\r\n    onStatusChange?.(newStatus);\r\n    setShow(false);\r\n    \r\n    // Luego hacer la llamada a la API en segundo plano\r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      console.log(`üîÑ ClientStatusDropdown - Llamando a updateClientStatus...`);\r\n      const result = await updateClientStatus(clientId, newStatus);\r\n      console.log(`‚úÖ ClientStatusDropdown - Estado actualizado exitosamente:`, result);\r\n      \r\n      // Invalidar queries para sincronizar con el servidor\r\n      queryClient.invalidateQueries(['clients']);\r\n      queryClient.invalidateQueries(['commercial-clients']);\r\n      queryClient.invalidateQueries(['commercial-clients-with-totals']);\r\n      queryClient.invalidateQueries('companiesList');\r\n      queryClient.invalidateQueries('clientStats');\r\n      queryClient.invalidateQueries('companyStats');\r\n      queryClient.invalidateQueries('clientFilterOptions');\r\n      \r\n      // Forzar refetch inmediato de las queries principales\r\n      queryClient.refetchQueries(['commercial-clients-with-totals']);\r\n      queryClient.refetchQueries(['clients']);\r\n    } catch (err) {\r\n      console.error(`‚ùå ClientStatusDropdown - Error al actualizar estado:`, err);\r\n      setError(err.message || 'Error al actualizar estado');\r\n      // Revertir el cambio si falla la API\r\n      console.log(`üîÑ ClientStatusDropdown - Revirtiendo estado a '${currentStatus}'`);\r\n      onStatusChange?.(currentStatus);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const currentStatusConfig = CLIENT_STATUSES[currentStatus] || CLIENT_STATUSES.prospeccion;\r\n  const CurrentIcon = currentStatusConfig.icon;\r\n\r\n  const dropdownMenu = show && createPortal(\r\n    <div\r\n      ref={menuRef}\r\n      className=\"dropdown-menu show\"\r\n      style={{\r\n        position: 'fixed',\r\n        top: position.top,\r\n        left: position.left,\r\n        zIndex: 99999,\r\n        minWidth: '200px',\r\n        maxHeight: '300px',\r\n        overflowY: 'auto',\r\n        boxShadow: '0 0.5rem 1rem rgba(0, 0, 0, 0.15)',\r\n        border: '1px solid rgba(0, 0, 0, 0.15)',\r\n        borderRadius: '0.375rem',\r\n        backgroundColor: 'white'\r\n      }}\r\n    >\r\n      {Object.entries(CLIENT_STATUSES).map(([status, config]) => {\r\n        const StatusIcon = config.icon;\r\n        const isCurrentStatus = status === currentStatus;\r\n        \r\n        return (\r\n          <button\r\n            key={status}\r\n            className={`dropdown-item d-flex align-items-center gap-2 ${isCurrentStatus ? 'active' : ''}`}\r\n            onClick={() => handleStatusChange(status)}\r\n            disabled={isCurrentStatus}\r\n            style={{\r\n              border: 'none',\r\n              background: isCurrentStatus ? config.bgColor : 'transparent',\r\n              color: isCurrentStatus ? 'white' : '#212529',\r\n              width: '100%',\r\n              textAlign: 'left',\r\n              padding: '0.5rem 1rem',\r\n              cursor: 'pointer'\r\n            }}\r\n            onMouseEnter={(e) => {\r\n              if (!isCurrentStatus) {\r\n                e.target.style.backgroundColor = '#f8f9fa';\r\n              }\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              if (!isCurrentStatus) {\r\n                e.target.style.backgroundColor = 'transparent';\r\n              }\r\n            }}\r\n          >\r\n            <StatusIcon size={14} />\r\n            <span>{config.label}</span>\r\n            {isCurrentStatus && <FiCheck size={14} className=\"ms-auto\" />}\r\n          </button>\r\n        );\r\n      })}\r\n    </div>,\r\n    document.body\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div className=\"client-status-dropdown\">\r\n        {error && (\r\n          <Alert variant=\"danger\" className=\"mb-2\" style={{ fontSize: '0.8rem' }}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n        \r\n        <button\r\n          ref={buttonRef}\r\n          className={`btn btn-${currentStatusConfig.color} btn-${size} d-flex align-items-center gap-1`}\r\n          onClick={handleToggle}\r\n          disabled={disabled || loading}\r\n          style={{ \r\n            backgroundColor: currentStatusConfig.bgColor,\r\n            borderColor: currentStatusConfig.bgColor,\r\n            minWidth: '140px'\r\n          }}\r\n        >\r\n          {loading ? (\r\n            <Spinner animation=\"border\" size=\"sm\" />\r\n          ) : (\r\n            <>\r\n              <CurrentIcon size={14} />\r\n              {showLabel && <span>{currentStatusConfig.label}</span>}\r\n            </>\r\n          )}\r\n          <FiChevronDown size={12} />\r\n        </button>\r\n      </div>\r\n      {dropdownMenu}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ClientStatusDropdown;","import React, { useState, useMemo } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button, Badge, Row, Col, Card, Container } from 'react-bootstrap';\r\nimport { FiPlus, FiEdit, FiTrash2, FiUser, FiHome, FiMail, FiPhone, FiMapPin, FiUsers, FiHome as FiBuilding, FiFolderPlus, FiClock, FiUserCheck, FiUpload, FiDollarSign } from 'react-icons/fi';\r\nimport PageHeader from '../components/common/PageHeader';\r\nimport DataTable from '../components/common/DataTable';\r\nimport ModalForm from '../components/common/ModalForm';\r\nimport ClientFormRedesigned from '../components/ClientFormRedesigned';\r\nimport StatsCard from '../components/common/StatsCard';\r\nimport ConfirmModal from '../components/common/ConfirmModal';\r\nimport PermissionDeniedModal from '../components/common/PermissionDeniedModal';\r\nimport ClientStatusDropdown from '../components/ClientStatusDropdown';\r\nimport ClientHistoryModal from '../components/ClientHistoryModal';\r\nimport ClientSuccessModal from '../components/ClientSuccessModal';\r\nimport { listCompanies, createCompany, updateCompany, deleteCompany, getCompanyStats, getCompanyFilterOptions } from '../services/companies';\r\nimport { getCurrentUser, canCreateClient, canEditClient, canDeleteClient, canViewClientHistory, canCreateProject, logUserInfo } from '../utils/authHelper';\r\nimport './Clientes.css';\r\n\r\nconst emptyForm = {\r\n  id: null,\r\n  type: 'empresa',\r\n  ruc: '',\r\n  dni: '',\r\n  name: '',\r\n  address: '',\r\n  email: '',\r\n  phone: '',\r\n  contact_name: '',\r\n  city: '',\r\n  sector: '',\r\n  priority: 'normal',\r\n  actividad: '',\r\n  servicios: '',\r\n};\r\n\r\nexport default function Clientes() {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingClient, setEditingClient] = useState(null);\r\n  const [deletingClient, setDeletingClient] = useState(null);\r\n  const [showHistoryModal, setShowHistoryModal] = useState(false);\r\n  const [selectedClientForHistory, setSelectedClientForHistory] = useState(null);\r\n  const [showPermissionDeniedModal, setShowPermissionDeniedModal] = useState(false);\r\n  const [permissionDeniedInfo, setPermissionDeniedInfo] = useState({});\r\n  \r\n  // Estados para notificaciones\r\n  const [showToast, setShowToast] = useState(false);\r\n  const [toastMessage, setToastMessage] = useState('');\r\n  const [toastVariant, setToastVariant] = useState('success');\r\n  \r\n  // Estados para modal de √©xito\r\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\r\n  const [successClientData, setSuccessClientData] = useState(null);\r\n  const [isEditSuccess, setIsEditSuccess] = useState(false);\r\n  \r\n  // Informaci√≥n del usuario actual\r\n  const currentUser = getCurrentUser();\r\n  const userCanCreateClient = canCreateClient();\r\n  const userCanEditClient = canEditClient();\r\n  const userCanDeleteClient = canDeleteClient();\r\n  const userCanViewClientHistory = canViewClientHistory();\r\n  const userCanCreateProject = canCreateProject();\r\n  \r\n  // Log de informaci√≥n de usuario al cargar el componente\r\n  React.useEffect(() => {\r\n    logUserInfo();\r\n  }, []);\r\n  \r\n  // Estado para paginaci√≥n y filtros\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedType, setSelectedType] = useState('');\r\n  const [selectedCity, setSelectedCity] = useState('');\r\n  const [selectedSector, setSelectedSector] = useState('');\r\n  const [isSearching, setIsSearching] = useState(false);\r\n\r\n  const queryClient = useQueryClient();\r\n  const navigate = useNavigate();\r\n\r\n  const { data, isLoading, refetch } = useQuery(\r\n    ['clients', currentPage, searchTerm, selectedType, selectedCity, selectedSector],\r\n    () => listCompanies({ \r\n      page: currentPage, \r\n      limit: 20, \r\n      search: searchTerm, \r\n      type: selectedType,\r\n      city: selectedCity,\r\n      sector: selectedSector\r\n    }),\r\n    { \r\n      keepPreviousData: true,\r\n      refetchOnWindowFocus: true,\r\n      refetchOnMount: true,\r\n      staleTime: 0,\r\n      cacheTime: 0\r\n    }\r\n  );\r\n\r\n  // Consulta separada para estad√≠sticas reales\r\n  const { data: statsData, isLoading: statsLoading, error: statsError } = useQuery(\r\n    ['clientStats'],\r\n    getCompanyStats,\r\n    {\r\n      refetchOnWindowFocus: true,\r\n      refetchOnMount: true,\r\n      staleTime: 30000, // 30 segundos\r\n      cacheTime: 60000  // 1 minuto\r\n    }\r\n  );\r\n\r\n  // Debug: Log de estad√≠sticas (simplificado)\r\n  React.useEffect(() => {\r\n    if (statsData && statsData.data) {\r\n      console.log('‚úÖ Estad√≠sticas cargadas correctamente:', {\r\n        total: statsData.data.total,\r\n        empresas: statsData.data.empresas,\r\n        personas: statsData.data.personas\r\n      });\r\n    }\r\n  }, [statsData]);\r\n\r\n  // Consulta para opciones de filtros din√°micos\r\n  const { data: filterOptionsData, isLoading: filterOptionsLoading } = useQuery(\r\n    ['clientFilterOptions'],\r\n    getCompanyFilterOptions,\r\n    {\r\n      refetchOnWindowFocus: true,\r\n      refetchOnMount: true,\r\n      staleTime: 60000, // 1 minuto\r\n      cacheTime: 300000  // 5 minutos\r\n    }\r\n  );\r\n\r\n  // Debug: Log de opciones de filtros\r\n  React.useEffect(() => {\r\n    if (filterOptionsData && filterOptionsData.data) {\r\n      console.log('‚úÖ Opciones de filtros cargadas correctamente:', {\r\n        types: filterOptionsData.data.types,\r\n        sectors: filterOptionsData.data.sectors,\r\n        cities: filterOptionsData.data.cities\r\n      });\r\n    }\r\n  }, [filterOptionsData]);\r\n\r\n  const showNotification = (message, variant = 'success') => {\r\n    setToastMessage(message);\r\n    setToastVariant(variant);\r\n    setShowToast(true);\r\n    \r\n    // Auto-close despu√©s de 5 segundos\r\n    setTimeout(() => {\r\n      setShowToast(false);\r\n    }, 5000);\r\n  };\r\n\r\n  const handleMutationSuccess = (message) => {\r\n    queryClient.invalidateQueries('clients');\r\n    queryClient.invalidateQueries('clientStats'); // Invalidar tambi√©n las estad√≠sticas\r\n    queryClient.invalidateQueries('clientFilterOptions'); // Invalidar tambi√©n las opciones de filtros\r\n    setShowModal(false);\r\n    setEditingClient(null);\r\n    setDeletingClient(null);\r\n    \r\n    // Mostrar notificaci√≥n de √©xito\r\n    showNotification(message, 'success');\r\n  };\r\n\r\n  // Funci√≥n para manejar b√∫squeda\r\n  const handleSearch = (searchValue) => {\r\n    console.log('üîç handleSearch - B√∫squeda:', searchValue);\r\n    setSearchTerm(searchValue);\r\n    setCurrentPage(1); // Resetear a la primera p√°gina\r\n    setIsSearching(true);\r\n    \r\n    // La consulta se actualizar√° autom√°ticamente por el useQuery\r\n    setTimeout(() => setIsSearching(false), 1000);\r\n  };\r\n\r\n  // Funci√≥n para manejar filtros\r\n  const handleFilter = (filters) => {\r\n    console.log('üîç handleFilter - Filtros recibidos:', filters);\r\n    console.log('üîç handleFilter - Estado actual:', { selectedType, selectedCity, selectedSector });\r\n    \r\n    const newType = filters.type || '';\r\n    const newCity = filters.city || '';\r\n    const newSector = filters.sector || '';\r\n    \r\n    // Si se est√° limpiando filtros (objeto vac√≠o), tambi√©n limpiar b√∫squeda\r\n    if (Object.keys(filters).length === 0) {\r\n      console.log('üîç handleFilter - Limpiando todos los filtros y b√∫squeda');\r\n      setSearchTerm('');\r\n    }\r\n    \r\n    setSelectedType(newType);\r\n    setSelectedCity(newCity);\r\n    setSelectedSector(newSector);\r\n    setCurrentPage(1); // Resetear a la primera p√°gina\r\n    \r\n    console.log('üîç handleFilter - Nuevos valores aplicados:', { \r\n      type: newType, \r\n      city: newCity, \r\n      sector: newSector \r\n    });\r\n    \r\n    // Forzar refetch de la query para asegurar que se actualice\r\n    setTimeout(() => {\r\n      refetch();\r\n    }, 100);\r\n  };\r\n\r\n  // Opciones de filtros din√°micas basadas en datos reales\r\n  const clientFilterOptions = useMemo(() => {\r\n    console.log('üîç clientFilterOptions - filterOptionsData:', filterOptionsData);\r\n    \r\n    if (!filterOptionsData || !filterOptionsData.data) {\r\n      console.log('üîç clientFilterOptions - Usando opciones por defecto');\r\n      return [\r\n        {\r\n          title: 'Por Tipo de Cliente',\r\n          options: [\r\n            { label: 'Empresas', filter: { type: 'empresa' } },\r\n            { label: 'Personas Naturales', filter: { type: 'persona_natural' } }\r\n          ]\r\n        }\r\n      ];\r\n    }\r\n\r\n    const data = filterOptionsData.data;\r\n    const options = [\r\n      {\r\n        title: 'Por Tipo de Cliente',\r\n        options: data.types?.map(type => ({\r\n          label: `${type.label} (${type.count})`,\r\n          filter: { type: type.value }\r\n        })) || []\r\n      },\r\n      {\r\n        title: 'Por Sector',\r\n        options: data.sectors?.map(sector => ({\r\n          label: `${sector.label} (${sector.count})`,\r\n          filter: { sector: sector.value }\r\n        })) || []\r\n      },\r\n      {\r\n        title: 'Por Ciudad',\r\n        options: data.cities?.map(city => ({\r\n          label: `${city.label} (${city.count})`,\r\n          filter: { city: city.value }\r\n        })) || []\r\n      }\r\n    ];\r\n    \r\n    console.log('üîç clientFilterOptions - Opciones generadas:', options);\r\n    return options;\r\n  }, [filterOptionsData]);\r\n\r\n  const createMutation = useMutation(createCompany, {\r\n    onSuccess: (data) => {\r\n      setSuccessClientData(data);\r\n      setIsEditSuccess(false);\r\n      setShowSuccessModal(true);\r\n      handleMutationSuccess('Cliente creado exitosamente');\r\n    },\r\n    onError: (error) => {\r\n      console.error('Error creating client:', error);\r\n      console.error('Error details:', {\r\n        message: error.message,\r\n        status: error.status,\r\n        body: error.body\r\n      });\r\n    }\r\n  });\r\n\r\n  const updateMutation = useMutation(updateCompany, {\r\n    onSuccess: (data) => {\r\n      setSuccessClientData(data);\r\n      setIsEditSuccess(true);\r\n      setShowSuccessModal(true);\r\n      handleMutationSuccess('Cliente actualizado exitosamente');\r\n    },\r\n    onError: (error) => console.error('Error updating client:', error)\r\n  });\r\n\r\n  const deleteMutation = useMutation(deleteCompany, {\r\n    onSuccess: () => handleMutationSuccess('Cliente eliminado exitosamente'),\r\n    onError: (error) => console.error('Error deleting client:', error)\r\n  });\r\n\r\n  const handleCreate = () => {\r\n    if (!userCanCreateClient) {\r\n      setPermissionDeniedInfo({\r\n        action: \"crear clientes\",\r\n        requiredRole: \"administrador, jefe comercial o vendedor comercial\",\r\n        currentRole: currentUser?.role || \"no autenticado\"\r\n      });\r\n      setShowPermissionDeniedModal(true);\r\n      return;\r\n    }\r\n    setEditingClient(emptyForm);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleEdit = (client) => {\r\n    if (!userCanEditClient) {\r\n      setPermissionDeniedInfo({\r\n        action: \"editar clientes\",\r\n        requiredRole: \"administrador, jefe comercial o vendedor comercial\",\r\n        currentRole: currentUser?.role || \"no autenticado\"\r\n      });\r\n      setShowPermissionDeniedModal(true);\r\n      return;\r\n    }\r\n    setEditingClient(client);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDelete = (client) => {\r\n    console.log('üîç handleDelete - Verificando permisos:', {\r\n      userCanDeleteClient,\r\n      currentUserRole: currentUser?.role,\r\n      currentUser: currentUser\r\n    });\r\n    \r\n    if (!userCanDeleteClient) {\r\n      console.log('üö´ handleDelete - Permisos insuficientes, mostrando modal');\r\n      setPermissionDeniedInfo({\r\n        action: \"eliminar clientes\",\r\n        requiredRole: \"administrador\",\r\n        currentRole: currentUser?.role || \"no autenticado\"\r\n      });\r\n      setShowPermissionDeniedModal(true);\r\n      return;\r\n    }\r\n    console.log('‚úÖ handleDelete - Permisos OK, procediendo con eliminaci√≥n');\r\n    setDeletingClient(client);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    try {\r\n      await deleteMutation.mutateAsync(deletingClient.id);\r\n      setDeletingClient(null);\r\n    } catch (error) {\r\n      console.error('Error eliminando cliente:', error);\r\n      setDeletingClient(null);\r\n    }\r\n  };\r\n\r\n  const handleCreateProject = (client) => {\r\n    if (!userCanCreateProject) {\r\n      setPermissionDeniedInfo({\r\n        action: \"crear cotizaciones\",\r\n        requiredRole: \"administrador, jefe comercial o vendedor comercial\",\r\n        currentRole: currentUser?.role || \"no autenticado\"\r\n      });\r\n      setShowPermissionDeniedModal(true);\r\n      return;\r\n    }\r\n    // Navegar a cotizaci√≥n inteligente con el cliente pre-seleccionado\r\n    navigate('/cotizaciones/inteligente', { \r\n      state: { \r\n        selectedClient: {\r\n          id: client.id,\r\n          name: client.name,\r\n          type: client.type,\r\n          sector: client.sector,\r\n          city: client.city,\r\n          ruc: client.ruc,\r\n          dni: client.dni,\r\n          email: client.email,\r\n          phone: client.phone,\r\n          contact_name: client.contact_name,\r\n          address: client.address\r\n        }\r\n      } \r\n    });\r\n  };\r\n\r\n  const handleShowHistory = (client) => {\r\n    if (!userCanViewClientHistory) {\r\n      setPermissionDeniedInfo({\r\n        action: \"ver historial de clientes\",\r\n        requiredRole: \"administrador, jefe comercial o vendedor comercial\",\r\n        currentRole: currentUser?.role || \"no autenticado\"\r\n      });\r\n      setShowPermissionDeniedModal(true);\r\n      return;\r\n    }\r\n    setSelectedClientForHistory(client);\r\n    setShowHistoryModal(true);\r\n  };\r\n\r\n\r\n  const handleStatusChange = (clientId, newStatus) => {\r\n    // La actualizaci√≥n se maneja autom√°ticamente por react-query\r\n    console.log(`Estado del cliente ${clientId} cambiado a: ${newStatus}`);\r\n  };\r\n\r\n  const handleSubmit = async (formData) => {\r\n    if (editingClient.id) {\r\n      await updateMutation.mutateAsync({ id: editingClient.id, ...formData });\r\n    } else {\r\n      await createMutation.mutateAsync(formData);\r\n    }\r\n  };\r\n\r\n  const getTypeBadge = (type) => {\r\n    const typeConfig = {\r\n      'empresa': { bg: 'primary', text: 'Empresa', icon: FiHome },\r\n      'persona': { bg: 'info', text: 'Persona Natural', icon: FiUser }\r\n    };\r\n    \r\n    const config = typeConfig[type] || { bg: 'secondary', text: type, icon: FiUser };\r\n    const Icon = config.icon;\r\n    \r\n    return (\r\n      <Badge bg={config.bg} className=\"status-badge d-flex align-items-center\">\r\n        <Icon size={12} className=\"me-1\" />\r\n        {config.text}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      header: 'ID',\r\n      accessor: 'id',\r\n      width: '50px'\r\n    },\r\n    {\r\n      header: 'Cliente',\r\n      accessor: 'name',\r\n      width: '180px',\r\n      render: (value, row) => (\r\n        <div>\r\n          <div className=\"fw-medium\" style={{fontSize: '0.8rem'}}>{row.name}</div>\r\n          <div className=\"d-flex align-items-center gap-1 mt-1\">\r\n            {getTypeBadge(row.type)}\r\n            {row.ruc && (\r\n              <small className=\"text-muted\" style={{fontSize: '0.7rem'}}>RUC: {row.ruc}</small>\r\n            )}\r\n            {row.dni && (\r\n              <small className=\"text-muted\" style={{fontSize: '0.7rem'}}>DNI: {row.dni}</small>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Contacto',\r\n      accessor: 'contact',\r\n      width: '150px',\r\n      render: (value, row) => (\r\n        <div>\r\n          {row.contact_name && (\r\n            <div className=\"fw-medium\" style={{fontSize: '0.8rem'}}>{row.contact_name}</div>\r\n          )}\r\n          {row.email && (\r\n            <div className=\"d-flex align-items-center mt-1\">\r\n              <FiMail size={10} className=\"me-1 text-muted\" />\r\n              <small className=\"text-muted\" style={{fontSize: '0.7rem'}}>{row.email}</small>\r\n            </div>\r\n          )}\r\n          {row.phone && (\r\n            <div className=\"d-flex align-items-center mt-1\">\r\n              <FiPhone size={10} className=\"me-1 text-muted\" />\r\n              <small className=\"text-muted\" style={{fontSize: '0.7rem'}}>{row.phone}</small>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Ciudad',\r\n      accessor: 'city',\r\n      width: '80px',\r\n      render: (value) => {\r\n        const city = value || 'No especificada';\r\n        let cityColor = 'secondary';\r\n        \r\n        // Asignar colores seg√∫n la ciudad\r\n        switch (city) {\r\n          case 'Lima':\r\n            cityColor = 'primary';\r\n            break;\r\n          case 'Arequipa':\r\n            cityColor = 'info';\r\n            break;\r\n          case 'Cusco':\r\n            cityColor = 'success';\r\n            break;\r\n          case 'Trujillo':\r\n            cityColor = 'warning';\r\n            break;\r\n          case 'Piura':\r\n            cityColor = 'danger';\r\n            break;\r\n          case 'Chiclayo':\r\n            cityColor = 'info';\r\n            break;\r\n          case 'Iquitos':\r\n            cityColor = 'success';\r\n            break;\r\n          case 'Huancayo':\r\n            cityColor = 'warning';\r\n            break;\r\n          default:\r\n            cityColor = 'secondary';\r\n        }\r\n        \r\n        return (\r\n          <Badge bg={cityColor} className=\"px-1 py-0\" style={{fontSize: '0.65rem'}}>\r\n            {city}\r\n          </Badge>\r\n        );\r\n      }\r\n    },\r\n    {\r\n      header: 'Sector',\r\n      accessor: 'sector',\r\n      width: '80px',\r\n      render: (value) => {\r\n        // Limpiar sector para mostrar solo el sector base\r\n        const cleanSector = (sector) => {\r\n          if (!sector) return 'General';\r\n          // Remover la informaci√≥n de prioridad\r\n          return sector.replace(/\\s*\\[PRIORIDAD:\\s*\\w+\\]/g, '').trim() || 'General';\r\n        };\r\n        \r\n        const sector = cleanSector(value);\r\n        let sectorColor = 'secondary';\r\n        \r\n        // Asignar colores seg√∫n el sector\r\n        switch (sector) {\r\n          case 'Construcci√≥n':\r\n            sectorColor = 'warning';\r\n            break;\r\n          case 'Miner√≠a':\r\n            sectorColor = 'dark';\r\n            break;\r\n          case 'Ingenier√≠a':\r\n            sectorColor = 'primary';\r\n            break;\r\n          case 'Laboratorio':\r\n            sectorColor = 'info';\r\n            break;\r\n          case 'Consultor√≠a':\r\n            sectorColor = 'success';\r\n            break;\r\n          case 'Tecnolog√≠a':\r\n            sectorColor = 'primary';\r\n            break;\r\n          case 'Ambiental':\r\n            sectorColor = 'success';\r\n            break;\r\n          case 'Geolog√≠a':\r\n            sectorColor = 'info';\r\n            break;\r\n          default:\r\n            sectorColor = 'secondary';\r\n        }\r\n        \r\n        return (\r\n          <Badge bg={sectorColor} className=\"px-1 py-0\" style={{fontSize: '0.65rem'}}>\r\n            {sector}\r\n          </Badge>\r\n        );\r\n      }\r\n    },\r\n    {\r\n      header: 'Estado',\r\n      accessor: 'status',\r\n      width: '120px',\r\n      render: (value, row) => (\r\n        <ClientStatusDropdown\r\n          clientId={row.id}\r\n          currentStatus={row.status || 'prospeccion'}\r\n          onStatusChange={(newStatus) => handleStatusChange(row.id, newStatus)}\r\n          size=\"sm\"\r\n          showLabel={true}\r\n        />\r\n      )\r\n    },\r\n    {\r\n      header: 'Prioridad',\r\n      accessor: 'priority',\r\n      width: '100px',\r\n      render: (value, row) => {\r\n        // Usar el campo priority de la base de datos directamente\r\n        const priority = row.priority || 'normal';\r\n        let priorityColor = 'secondary';\r\n        let priorityText = 'Normal';\r\n        \r\n        switch (priority) {\r\n          case 'urgent':\r\n            priorityColor = 'danger';\r\n            priorityText = 'URGENTE';\r\n            break;\r\n          case 'high':\r\n            priorityColor = 'warning';\r\n            priorityText = 'ALTA';\r\n            break;\r\n          case 'normal':\r\n            priorityColor = 'info';\r\n            priorityText = 'NORMAL';\r\n            break;\r\n          case 'low':\r\n            priorityColor = 'secondary';\r\n            priorityText = 'BAJA';\r\n            break;\r\n        }\r\n        \r\n        return (\r\n          <Badge bg={priorityColor} className=\"px-2 py-1\" style={{fontSize: '0.7rem'}}>\r\n            {priorityText}\r\n          </Badge>\r\n        );\r\n      }\r\n    },\r\n    {\r\n      header: 'Gestor',\r\n      accessor: 'managed_by',\r\n      width: '100px',\r\n      render: (value, row) => (\r\n        <div className=\"d-flex align-items-center\">\r\n          {row.managed_by_name ? (\r\n            <>\r\n              <FiUserCheck size={12} className=\"me-1 text-success\" />\r\n              <div>\r\n                <div className=\"fw-medium\" style={{fontSize: '0.8rem'}}>{row.managed_by_name}</div>\r\n                <small className=\"text-muted\" style={{fontSize: '0.7rem'}}>{row.managed_by_role}</small>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <span className=\"text-muted\" style={{fontSize: '0.8rem'}}>Sin asignar</span>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Direcci√≥n',\r\n      accessor: 'address',\r\n      width: '120px',\r\n      render: (value) => (\r\n        value ? (\r\n          <div className=\"d-flex align-items-center\">\r\n            <FiMapPin size={12} className=\"me-1 text-muted\" />\r\n            <small className=\"text-muted\">{value}</small>\r\n          </div>\r\n        ) : (\r\n          <small className=\"text-muted\">Sin direcci√≥n</small>\r\n        )\r\n      )\r\n    }, \r\n    {\r\n      header: 'Fecha Registro',\r\n      accessor: 'created_at',\r\n      type: 'date'\r\n    },\r\n    {\r\n      header: 'Acciones',\r\n      accessor: 'actions',\r\n      render: (value, row) => (\r\n        <div className=\"d-flex gap-1\">\r\n          {userCanEditClient && (\r\n            <Button\r\n              variant=\"outline-primary\"\r\n              size=\"sm\"\r\n              onClick={() => handleEdit(row)}\r\n              title=\"Editar cliente\"\r\n            >\r\n              <FiEdit size={14} />\r\n            </Button>\r\n          )}\r\n          {userCanViewClientHistory && (\r\n            <Button\r\n              variant=\"outline-info\"\r\n              size=\"sm\"\r\n              onClick={() => handleShowHistory(row)}\r\n              title=\"Ver historial de cotizaciones y proyectos\"\r\n            >\r\n              <FiClock size={14} />\r\n            </Button>\r\n          )}\r\n          {userCanCreateProject && (\r\n            <Button\r\n              variant=\"outline-success\"\r\n              size=\"sm\"\r\n              onClick={() => handleCreateProject(row)}\r\n              title=\"Crear cotizaci√≥n para este cliente\"\r\n            >\r\n              <FiFolderPlus size={14} />\r\n            </Button>\r\n          )}\r\n          {userCanDeleteClient && (\r\n            <Button\r\n              variant=\"outline-danger\"\r\n              size=\"sm\"\r\n              onClick={() => handleDelete(row)}\r\n              title=\"Eliminar cliente\"\r\n            >\r\n              <FiTrash2 size={14} />\r\n            </Button>\r\n          )}\r\n          {!userCanDeleteClient && (\r\n            <Button\r\n              variant=\"outline-secondary\"\r\n              size=\"sm\"\r\n              onClick={() => {\r\n                console.log('üö´ Bot√≥n eliminar clickeado sin permisos');\r\n                setPermissionDeniedInfo({\r\n                  action: \"eliminar clientes\",\r\n                  requiredRole: \"administrador\",\r\n                  currentRole: currentUser?.role || \"no autenticado\"\r\n                });\r\n                setShowPermissionDeniedModal(true);\r\n              }}\r\n              title=\"No tienes permisos para eliminar clientes\"\r\n            >\r\n              <FiTrash2 size={14} />\r\n            </Button>\r\n          )}\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const formFields = [\r\n    {\r\n      name: 'type',\r\n      label: 'Tipo de Cliente',\r\n      type: 'select',\r\n      required: true,\r\n      options: [\r\n        { value: 'empresa', label: 'Empresa' },\r\n        { value: 'persona', label: 'Persona Natural' }\r\n      ]\r\n    },\r\n    {\r\n      name: 'name',\r\n      label: 'Nombre/Raz√≥n Social',\r\n      type: 'text',\r\n      required: true,\r\n      placeholder: 'Ingresa el nombre o raz√≥n social'\r\n    },\r\n    {\r\n      name: 'ruc',\r\n      label: 'RUC',\r\n      type: 'text',\r\n      placeholder: 'Ingresa el RUC (solo para empresas)',\r\n      help: 'Solo para empresas'\r\n    },\r\n    {\r\n      name: 'dni',\r\n      label: 'DNI',\r\n      type: 'text',\r\n      placeholder: 'Ingresa el DNI (solo para personas)',\r\n      help: 'Solo para personas naturales'\r\n    },\r\n    {\r\n      name: 'contact_name',\r\n      label: 'Nombre de Contacto',\r\n      type: 'text',\r\n      placeholder: 'Ingresa el nombre del contacto'\r\n    },\r\n    {\r\n      name: 'email',\r\n      label: 'Email',\r\n      type: 'email',\r\n      placeholder: 'contacto@empresa.com'\r\n    },\r\n    {\r\n      name: 'phone',\r\n      label: 'Tel√©fono',\r\n      type: 'text',\r\n      placeholder: '+51 999 999 999'\r\n    },\r\n    {\r\n      name: 'address',\r\n      label: 'Direcci√≥n',\r\n      type: 'textarea',\r\n      placeholder: 'Ingresa la direcci√≥n completa'\r\n    },\r\n    {\r\n      name: 'city',\r\n      label: 'Ciudad',\r\n      type: 'text',\r\n      placeholder: 'Escribe la ciudad (ej: Lima, Arequipa, Cusco...)',\r\n      autocomplete: true,\r\n      suggestions: [\r\n        'Lima', 'Arequipa', 'Cusco', 'Trujillo', 'Piura', 'Chiclayo', 'Iquitos', 'Huancayo',\r\n        'Tacna', 'Cajamarca', 'Ayacucho', 'Puno', 'Juliaca', 'Chimbote', 'Huaraz', 'Abancay',\r\n        'Andahuaylas', 'Tumbes', 'Pucallpa', 'Tarapoto', 'Moyobamba', 'Cerro de Pasco', 'Hu√°nuco',\r\n        'Ica', 'Nazca', 'Chincha', 'Ca√±ete', 'Barranca', 'Huaral', 'Callao', 'Ventanilla',\r\n        'San Juan de Miraflores', 'Villa El Salvador', 'San Mart√≠n de Porres', 'Comas',\r\n        'Los Olivos', 'San Miguel', 'Pueblo Libre', 'Jes√∫s Mar√≠a', 'Magdalena', 'San Isidro',\r\n        'Miraflores', 'Surco', 'La Molina', 'Ate', 'Santa Anita', 'El Agustino', 'San Juan de Lurigancho',\r\n        'Lurigancho', 'Chosica', 'Chaclacayo', 'Cieneguilla', 'Pachac√°mac', 'Punta Hermosa',\r\n        'Punta Negra', 'San Bartolo', 'Santa Mar√≠a del Mar', 'Pucusana', 'Asia', 'Mala',\r\n        'San Vicente de Ca√±ete', 'Imperial', 'Nuevo Imperial', 'Quilman√°', 'San Luis',\r\n        'San Pedro de Lloc', 'Pacasmayo', 'Guadalupe', 'Jequetepeque', 'Chep√©n', 'Cascas',\r\n        'Contumaz√°', 'Cupisnique', 'Guzmango', 'San Benito', 'San Diego', 'San Jos√©',\r\n        'San Pablo', 'Tembladera', 'Yon√°n', 'Za√±a', 'Cajabamba', 'Cajamarca', 'Celend√≠n',\r\n        'Chota', 'Contumaz√°', 'Cutervo', 'Hualgayoc', 'Ja√©n', 'San Ignacio', 'San Marcos',\r\n        'San Miguel', 'San Pablo', 'Santa Cruz', 'Bagua', 'Bongar√°', 'Condorcanqui',\r\n        'Luya', 'Rodr√≠guez de Mendoza', 'Utcubamba', 'Chachapoyas', 'Asunci√≥n', 'Balsas',\r\n        'Cheto', 'Chiliqu√≠n', 'Chuquibamba', 'Granada', 'Huancas', 'La Jalca', 'Leimebamba',\r\n        'Levanto', 'Magdalena', 'Mariscal Castilla', 'Molinopampa', 'Montevideo', 'Olleros',\r\n        'Quinjalca', 'San Francisco de Daguas', 'San Isidro de Maino', 'Soloco', 'Sonche',\r\n        'Abancay', 'Andahuaylas', 'Antabamba', 'Aymaraes', 'Chincheros', 'Cotabambas',\r\n        'Grau', 'Huancarama', 'Huancaray', 'Huanipaca', 'Kishuara', 'Lambrama', 'Pacobamba',\r\n        'Pacucha', 'Pampachiri', 'Pomacocha', 'San Antonio de Cachi', 'San Jer√≥nimo',\r\n        'San Miguel de Chaccrampa', 'Santa Mar√≠a de Chicmo', 'Talavera', 'Tamburco',\r\n        'Andahuaylas', 'Antabamba', 'Aymaraes', 'Chincheros', 'Cotabambas', 'Grau',\r\n        'Huancarama', 'Huancaray', 'Huanipaca', 'Kishuara', 'Lambrama', 'Pacobamba',\r\n        'Pacucha', 'Pampachiri', 'Pomacocha', 'San Antonio de Cachi', 'San Jer√≥nimo',\r\n        'San Miguel de Chaccrampa', 'Santa Mar√≠a de Chicmo', 'Talavera', 'Tamburco'\r\n      ]\r\n    },\r\n    {\r\n      name: 'sector',\r\n      label: 'Sector',\r\n      type: 'text',\r\n      placeholder: 'Escribe el sector (ej: Construcci√≥n, Miner√≠a, Tecnolog√≠a...)',\r\n      autocomplete: true,\r\n      suggestions: [\r\n        'General', 'Construcci√≥n', 'Miner√≠a', 'Ingenier√≠a', 'Laboratorio', 'Consultor√≠a', \r\n        'Tecnolog√≠a', 'Ambiental', 'Geolog√≠a', 'Agricultura', 'Ganader√≠a', 'Pesca',\r\n        'Manufactura', 'Textil', 'Alimentario', 'Farmac√©utico', 'Qu√≠mico', 'Petroqu√≠mico',\r\n        'Energ√≠a', 'Electricidad', 'Gas', 'Agua', 'Saneamiento', 'Transporte', 'Log√≠stica',\r\n        'Comercio', 'Retail', 'Mayorista', 'Distribuci√≥n', 'Servicios Financieros', 'Banca',\r\n        'Seguros', 'Inversiones', 'Bienes Ra√≠ces', 'Inmobiliaria', 'Turismo', 'Hoteler√≠a',\r\n        'Restaurantes', 'Entretenimiento', 'Medios', 'Comunicaciones', 'Telecomunicaciones',\r\n        'Software', 'Hardware', 'Sistemas', 'Internet', 'E-commerce', 'Marketing', 'Publicidad',\r\n        'Educaci√≥n', 'Capacitaci√≥n', 'Investigaci√≥n', 'Desarrollo', 'Salud', 'Medicina',\r\n        'Farmac√©utica', 'Biotecnolog√≠a', 'Gobierno', 'P√∫blico', 'Defensa', 'Seguridad',\r\n        'Legal', 'Jur√≠dico', 'Contable', 'Auditor√≠a', 'Recursos Humanos', 'Administraci√≥n',\r\n        'Gesti√≥n', 'Consultor√≠a Empresarial', 'Outsourcing', 'Servicios Profesionales',\r\n        'Arquitectura', 'Dise√±o', 'Arte', 'Cultura', 'Deportes', 'Recreaci√≥n', 'ONG',\r\n        'Fundaciones', 'Religioso', 'Espiritual', 'Otro'\r\n      ]\r\n    }\r\n  ];\r\n\r\n  // Calcular estad√≠sticas\r\n  const stats = useMemo(() => {\r\n    // Usar estad√≠sticas reales del backend si est√°n disponibles\r\n    if (statsData && statsData.data) {\r\n      console.log('üìä Stats - Usando estad√≠sticas reales del backend:', statsData);\r\n      console.log('üìä Stats - Datos extra√≠dos:', statsData.data);\r\n      return {\r\n        total: statsData.data.total || 0,\r\n        empresas: statsData.data.empresas || 0,\r\n        personas: statsData.data.personas || 0,\r\n        conEmail: statsData.data.withEmail || 0,\r\n        conTelefono: statsData.data.withPhone || 0\r\n      };\r\n    }\r\n    \r\n    // Fallback: calcular desde los datos de la p√°gina actual\r\n    const companies = data?.data || [];\r\n    console.log('üìä Stats - Fallback: calculando desde p√°gina actual:', companies);\r\n    return {\r\n      total: companies.length,\r\n      empresas: companies.filter(c => c.type === 'empresa').length,\r\n      personas: companies.filter(c => c.type === 'persona').length,\r\n      conEmail: companies.filter(c => c.email).length,\r\n      conTelefono: companies.filter(c => c.phone).length\r\n    };\r\n  }, [statsData, data]);\r\n\r\n  return (\r\n    <div className=\"clientes-page\">\r\n      <Container fluid className=\"h-100 d-flex flex-column p-0\">\r\n        {/* Header compacto */}\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <div>\r\n            <h4 className=\"mb-0 fw-bold\">Gesti√≥n de Clientes</h4>\r\n            <small className=\"text-muted\">Crear, editar y gestionar clientes del sistema</small>\r\n          </div>\r\n          <div className=\"d-flex gap-2\">\r\n            {currentUser?.role === 'admin' && (\r\n              <Button \r\n                variant=\"outline-success\" \r\n                size=\"sm\"\r\n                onClick={() => navigate('/clientes/importar')}\r\n                title=\"Importar clientes desde archivo CSV\"\r\n              >\r\n                <FiUpload className=\"me-1\" />\r\n                Importar Clientes\r\n              </Button>\r\n            )}\r\n            <Button \r\n              variant=\"primary\" \r\n              size=\"sm\"\r\n              onClick={handleCreate}\r\n              disabled={!userCanCreateClient}\r\n              title={!userCanCreateClient ? `No tienes permisos para crear clientes. Rol actual: ${currentUser?.role || 'No autenticado'}` : 'Crear nuevo cliente'}\r\n            >\r\n              <FiPlus className=\"me-1\" />\r\n              Nuevo Cliente\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n\r\n        {/* Informaci√≥n de depuraci√≥n */}\r\n        {!userCanCreateClient && (\r\n          <div className=\"alert alert-warning py-1 mb-1\" role=\"alert\">\r\n            <small><strong>‚ö†Ô∏è Permisos insuficientes:</strong> Tu rol actual ({currentUser?.role || 'No autenticado'}) no tiene permisos para crear clientes.</small>\r\n          </div>\r\n        )}\r\n\r\n        {/* Estad√≠sticas compactas */}\r\n        <Row className=\"g-2 mb-3\">\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Total\"\r\n              value={stats.total}\r\n              icon={FiUsers}\r\n              color=\"primary\"\r\n              loading={statsLoading}\r\n              size=\"compact\"\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Empresas\"\r\n              value={stats.empresas}\r\n              icon={FiBuilding}\r\n              color=\"success\"\r\n              loading={statsLoading}\r\n              size=\"compact\"\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Personas\"\r\n              value={stats.personas}\r\n              icon={FiUser}\r\n              color=\"info\"\r\n              loading={statsLoading}\r\n              size=\"compact\"\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Con Email\"\r\n              value={stats.conEmail}\r\n              icon={FiMail}\r\n              color=\"warning\"\r\n              loading={statsLoading}\r\n              size=\"compact\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Tabla de clientes */}\r\n        <Card className=\"shadow-sm border-0 flex-grow-1 d-flex flex-column\">\r\n          <Card.Header className=\"bg-white border-bottom flex-shrink-0 py-2\">\r\n            <div className=\"d-flex justify-content-between align-items-center\">\r\n              <h6 className=\"mb-0\">\r\n                <FiUsers className=\"me-1 text-primary\" size={16} />\r\n                Lista de Clientes\r\n              </h6>\r\n              <Badge bg=\"light\" text=\"dark\" className=\"px-2 py-1\">\r\n                {stats.total} clientes\r\n              </Badge>\r\n            </div>\r\n          </Card.Header>\r\n          <Card.Body className=\"p-0 flex-grow-1 d-flex flex-column\">\r\n            <div className=\"client-table flex-grow-1 d-flex flex-column\">\r\n              <DataTable\r\n                data={data?.data || []}\r\n                columns={columns}\r\n                loading={isLoading || isSearching}\r\n                onEdit={handleEdit}\r\n                onDelete={handleDelete}\r\n                emptyMessage=\"No hay clientes registrados\"\r\n                // Props para paginaci√≥n del backend\r\n                totalItems={data?.pagination?.total || 0}\r\n                itemsPerPage={data?.pagination?.limit || 20}\r\n                currentPage={currentPage}\r\n                onPageChange={setCurrentPage}\r\n                onSearch={handleSearch}\r\n                onFilter={handleFilter}\r\n                // Filtros espec√≠ficos para clientes\r\n                filterOptions={clientFilterOptions}\r\n                // Deshabilitar ordenamiento autom√°tico para mantener posici√≥n\r\n                sortable={false}\r\n                // Usar flexbox para ajustar altura\r\n                useFlexbox={true}\r\n              />\r\n            </div>\r\n          </Card.Body>\r\n        </Card>\r\n\r\n      <ClientFormRedesigned\r\n        show={showModal}\r\n        onHide={() => setShowModal(false)}\r\n        data={editingClient || emptyForm}\r\n        onSubmit={handleSubmit}\r\n        loading={createMutation.isLoading || updateMutation.isLoading}\r\n        isEditing={!!editingClient?.id}\r\n      />\r\n\r\n      {/* Modal de confirmaci√≥n para eliminar cliente */}\r\n      <ConfirmModal\r\n        show={!!deletingClient}\r\n        onHide={() => setDeletingClient(null)}\r\n        onConfirm={confirmDelete}\r\n        title=\"Eliminar Cliente\"\r\n        message={`¬øEst√°s seguro de que quieres eliminar el cliente \"${deletingClient?.name}\"?`}\r\n        confirmText=\"Eliminar\"\r\n        variant=\"danger\"\r\n        isLoading={deleteMutation.isLoading}\r\n        alertMessage=\"Esta acci√≥n eliminar√° permanentemente el cliente y todos sus datos asociados (proyectos, cotizaciones, etc.).\"\r\n        alertVariant=\"danger\"\r\n      />\r\n\r\n      {/* Modal de historial del cliente */}\r\n      <ClientHistoryModal\r\n        show={showHistoryModal}\r\n        onHide={() => setShowHistoryModal(false)}\r\n        clientId={selectedClientForHistory?.id}\r\n        clientName={selectedClientForHistory?.name}\r\n      />\r\n\r\n      {/* Modal de permisos denegados */}\r\n      <PermissionDeniedModal\r\n        show={showPermissionDeniedModal}\r\n        onHide={() => setShowPermissionDeniedModal(false)}\r\n        action={permissionDeniedInfo.action}\r\n        requiredRole={permissionDeniedInfo.requiredRole}\r\n        currentRole={permissionDeniedInfo.currentRole}\r\n      />\r\n\r\n      {/* Modal de √©xito */}\r\n      <ClientSuccessModal\r\n        show={showSuccessModal}\r\n        onHide={() => setShowSuccessModal(false)}\r\n        clientData={successClientData}\r\n        isEdit={isEditSuccess}\r\n      />\r\n\r\n      {/* Toast de notificaciones */}\r\n      {showToast && (\r\n        <div \r\n          style={{\r\n            position: 'fixed',\r\n            top: '20px',\r\n            right: '20px',\r\n            zIndex: 99999,\r\n            backgroundColor: toastVariant === 'success' ? '#28a745' : '#dc3545',\r\n            color: 'white',\r\n            padding: '15px 20px',\r\n            borderRadius: '8px',\r\n            boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\r\n            minWidth: '300px',\r\n            border: 'none'\r\n          }}\r\n          onClick={() => setShowToast(false)}\r\n        >\r\n          <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>\r\n            {toastVariant === 'success' ? '‚úÖ √âxito' : '‚ùå Error'}\r\n          </div>\r\n          <div>{toastMessage}</div>\r\n        </div>\r\n      )}\r\n      </Container>\r\n      </div>\r\n  );\r\n};"],"names":["CLIENT_TYPES","SECTORS","CITIES","PRIORITIES","ClientFormRedesigned","show","onHide","data","onSubmit","loading","isEditing","formData","setFormData","useState","errors","setErrors","React","isNewClient","handleInputChange","field","value","prev","validateRUC","validateDNI","validatePhone","ruc","dni","phone","validateForm","newErrors","handleSubmit","e","submitData","jsx","jsxs","FiUser","FiX","FiHome","type","FiUserCheck","FiMail","FiPhone","FiMapPin","city","sector","priority","Fragment","FiSave","PermissionDeniedModal","action","requiredRole","currentRole","Modal","FiShield","Button","FiAlertTriangle","CLIENT_STATUSES","FiSearch","FiPhoneOff","FiHeart","FiClock","FiSend","FiMessageSquare","FiCheckCircle","FiMoreHorizontal","ClientStatusDropdown","clientId","currentStatus","onStatusChange","disabled","size","showLabel","setLoading","error","setError","setShow","position","setPosition","buttonRef","useRef","menuRef","queryClient","useQueryClient","handleToggle","rect","handleClickOutside","event","useEffect","handleStatusChange","newStatus","result","updateClientStatus","err","currentStatusConfig","CurrentIcon","dropdownMenu","createPortal","status","config","StatusIcon","isCurrentStatus","FiCheck","Alert","Spinner","FiChevronDown","emptyForm","Clientes","showModal","setShowModal","editingClient","setEditingClient","deletingClient","setDeletingClient","showHistoryModal","setShowHistoryModal","selectedClientForHistory","setSelectedClientForHistory","showPermissionDeniedModal","setShowPermissionDeniedModal","permissionDeniedInfo","setPermissionDeniedInfo","showToast","setShowToast","toastMessage","setToastMessage","toastVariant","setToastVariant","showSuccessModal","setShowSuccessModal","successClientData","setSuccessClientData","isEditSuccess","setIsEditSuccess","currentUser","getCurrentUser","userCanCreateClient","canCreateClient","userCanEditClient","canEditClient","userCanDeleteClient","canDeleteClient","userCanViewClientHistory","canViewClientHistory","userCanCreateProject","canCreateProject","logUserInfo","currentPage","setCurrentPage","searchTerm","setSearchTerm","selectedType","setSelectedType","selectedCity","setSelectedCity","selectedSector","setSelectedSector","isSearching","setIsSearching","navigate","useNavigate","isLoading","refetch","useQuery","listCompanies","statsData","statsLoading","statsError","getCompanyStats","filterOptionsData","filterOptionsLoading","getCompanyFilterOptions","showNotification","message","variant","handleMutationSuccess","handleSearch","searchValue","handleFilter","filters","newType","newCity","newSector","clientFilterOptions","useMemo","options","createMutation","useMutation","createCompany","updateMutation","updateCompany","deleteMutation","deleteCompany","handleCreate","handleEdit","client","handleDelete","confirmDelete","handleCreateProject","handleShowHistory","getTypeBadge","Icon","Badge","columns","row","cityColor","sectorColor","priorityColor","priorityText","FiEdit","FiFolderPlus","FiTrash2","stats","companies","c","Container","FiUpload","FiPlus","Row","Col","StatsCard","FiUsers","FiBuilding","Card","DataTable","_a","_b","ConfirmModal","ClientHistoryModal","ClientSuccessModal"],"mappings":"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"}