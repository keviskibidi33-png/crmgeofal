import{r as d,a as G,E as L,c as P,G as m,j as s,l as t,T as k,B as z,I as B,h as I,$ as T,J as H,f as Q,n as b,d as R}from"./index-DEOVmouH.js";import{P as x}from"./PageHeader-CQkDYjTq.js";import{D as f}from"./DataTable-DczKv8iu.js";import{M as _}from"./ModalForm-Bq7S27Np.js";import{d as $,c as J,u as U,l as V}from"./services-BDaT30cn.js";import{A as K}from"./Alert-DDQcQ1-v.js";import"./Row-BbuP-81J.js";import"./InputGroup-BKumZwLE.js";import"./Form-B65jexOv.js";import"./ElementChildren-gaW6uce3.js";import"./Table-CnkmMpGQ.js";import"./Spinner-C3m4zju4.js";const S={name:"",area:"laboratorio"},O=[{value:"laboratorio",label:"Laboratorio"},{value:"comercial",label:"Comercial"},{value:"soporte",label:"Soporte"},{value:"sistemas",label:"Sistemas"},{value:"gerencia",label:"Gerencia"}];function de(){const[h,r]=d.useState(!1),[a,o]=d.useState(null),[W,j]=d.useState(null),{user:n}=G(),y=["admin","jefe_laboratorio","jefa_comercial"].includes(n==null?void 0:n.role),N=L(),{data:i,isLoading:u}=P(["services"],()=>V(),{keepPreviousData:!0}),c=e=>{N.invalidateQueries("services"),r(!1),o(null),j(null)},g=m(J,{onSuccess:()=>c(),onError:e=>console.error("Error creating service:",e)}),v=m(U,{onSuccess:()=>c(),onError:e=>console.error("Error updating service:",e)}),E=m($,{onSuccess:()=>c(),onError:e=>console.error("Error deleting service:",e)}),C=()=>{o(S),r(!0)},M=e=>{o(e),r(!0)},w=e=>{window.confirm(`¿Estás seguro de que quieres eliminar el servicio "${e.name}"?`)&&E.mutate(e.id)},A=async e=>{a.id?await v.mutateAsync({id:a.id,...e}):await g.mutateAsync(e)},F=e=>{const l={laboratorio:{bg:"primary",text:"Laboratorio",icon:t},comercial:{bg:"success",text:"Comercial",icon:Q},soporte:{bg:"info",text:"Soporte",icon:H},sistemas:{bg:"warning",text:"Sistemas",icon:T},gerencia:{bg:"danger",text:"Gerencia",icon:I}}[e]||{bg:"secondary",text:e,icon:t},q=l.icon;return s.jsxs(b,{bg:l.bg,className:"status-badge d-flex align-items-center",children:[s.jsx(q,{size:12,className:"me-1"}),l.text]})},p=[{header:"ID",accessor:"id",width:"80px"},{header:"Nombre del Servicio",accessor:"name",render:e=>s.jsx("div",{className:"fw-medium",children:e})},{header:"Área",accessor:"area",render:e=>F(e)},{header:"Estado",accessor:"status",render:e=>s.jsxs(b,{bg:"success",className:"status-badge d-flex align-items-center",children:[s.jsx(R,{size:12,className:"me-1"}),"Activo"]})}],D=[{name:"name",label:"Nombre del Servicio",type:"text",required:!0,placeholder:"Ingresa el nombre del servicio"},{name:"area",label:"Área",type:"select",required:!0,options:O}];return y?s.jsxs("div",{className:"fade-in",children:[s.jsx(x,{title:"Gestión de Servicios",subtitle:"Crear, editar y gestionar servicios del sistema",icon:t,actions:s.jsxs(z,{variant:"primary",onClick:C,children:[s.jsx(B,{className:"me-2"}),"Nuevo Servicio"]})}),s.jsx(f,{data:(i==null?void 0:i.services)||[],columns:p,loading:u,onEdit:M,onDelete:w,emptyMessage:"No hay servicios registrados"}),s.jsx(_,{show:h,onHide:()=>r(!1),title:a!=null&&a.id?"Editar Servicio":"Nuevo Servicio",data:a||S,fields:D,onSubmit:A,loading:g.isLoading||v.isLoading,submitText:a!=null&&a.id?"Actualizar":"Crear"})]}):s.jsxs("div",{className:"fade-in",children:[s.jsx(x,{title:"Gestión de Servicios",subtitle:"Visualiza los servicios disponibles en el sistema",icon:t}),s.jsxs(K,{variant:"warning",className:"d-flex align-items-center",children:[s.jsx(k,{className:"me-2"}),"No tienes permisos para gestionar servicios. Contacta al administrador."]}),s.jsx(f,{data:(i==null?void 0:i.services)||[],columns:p,loading:u,emptyMessage:"No hay servicios registrados"})]})}export{de as default};
//# sourceMappingURL=Servicios-whLAhs6B.js.map
