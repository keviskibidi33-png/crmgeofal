{"version":3,"file":"Usuarios-DjXwXA9e.js","sources":["../../src/components/UserFormRedesigned.jsx","../../src/pages/Usuarios.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { FiUser, FiMail, FiPhone, FiShield, FiBriefcase, FiLock, FiX, FiSave } from 'react-icons/fi';\r\nimport './UserFormRedesigned.css';\r\n\r\nconst ROLES = [\r\n  { value: 'admin', label: 'Administrador' },\r\n  { value: 'jefa_comercial', label: 'Jefa Comercial' },\r\n  { value: 'vendedor_comercial', label: 'Vendedor Comercial' },\r\n  { value: 'jefe_laboratorio', label: 'Jefe Laboratorio' },\r\n  { value: 'usuario_laboratorio', label: 'Usuario Laboratorio' },\r\n  { value: 'facturacion', label: 'Facturación' },\r\n  { value: 'soporte', label: 'Soporte' },\r\n  { value: 'gerencia', label: 'Gerencia' },\r\n];\r\n\r\nconst AREAS = [\r\n  { value: 'Comercial', label: 'Comercial' },\r\n  { value: 'Laboratorio', label: 'Laboratorio' },\r\n  { value: 'Facturación', label: 'Facturación' },\r\n  { value: 'Sistemas', label: 'Sistemas' },\r\n  { value: 'Gerencia', label: 'Gerencia' },\r\n  { value: 'Soporte', label: 'Soporte' },\r\n];\r\n\r\nconst UserFormRedesigned = ({ \r\n  show, \r\n  onHide, \r\n  data = {}, \r\n  onSubmit, \r\n  loading = false, \r\n  isEditing = false \r\n}) => {\r\n  const [formData, setFormData] = useState({\r\n    name: data.name || '',\r\n    apellido: data.apellido || '',\r\n    email: data.email || '',\r\n    phone: data.phone || '',\r\n    role: data.role || 'vendedor_comercial',\r\n    area: data.area || 'Comercial',\r\n    password: ''\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Resetear formulario cuando cambien los datos o se abra/cierre el modal\r\n  React.useEffect(() => {\r\n    if (show) {\r\n      // Si es un nuevo usuario (no hay ID), usar valores vacíos\r\n      const isNewUser = !data.id;\r\n      \r\n      setFormData({\r\n        name: isNewUser ? '' : (data.name || ''),\r\n        apellido: isNewUser ? '' : (data.apellido || ''),\r\n        email: isNewUser ? '' : (data.email || ''),\r\n        phone: isNewUser ? '' : (data.phone || ''),\r\n        role: data.role || 'vendedor_comercial',\r\n        area: data.area || 'Comercial',\r\n        password: ''\r\n      });\r\n      setErrors({});\r\n    }\r\n  }, [show, data, isEditing]);\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    // Limpiar error cuando el usuario empiece a escribir\r\n    if (errors[field]) {\r\n      setErrors(prev => ({ ...prev, [field]: '' }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'El nombre es requerido';\r\n    }\r\n\r\n    if (!formData.apellido.trim()) {\r\n      newErrors.apellido = 'El apellido es requerido';\r\n    }\r\n\r\n    if (!formData.email.trim()) {\r\n      newErrors.email = 'El email es requerido';\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\r\n      newErrors.email = 'El email no es válido';\r\n    }\r\n\r\n    if (!isEditing && !formData.password.trim()) {\r\n      newErrors.password = 'La contraseña es requerida';\r\n    } else if (formData.password && formData.password.length < 6) {\r\n      newErrors.password = 'La contraseña debe tener al menos 6 caracteres';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (validateForm()) {\r\n      const submitData = { ...formData };\r\n      \r\n      // Si está editando y no hay contraseña, no enviar el campo password\r\n      if (isEditing && !submitData.password) {\r\n        delete submitData.password;\r\n      }\r\n      \r\n      onSubmit(submitData);\r\n    }\r\n  };\r\n\r\n  // Manejar errores del servidor\r\n  React.useEffect(() => {\r\n    if (data.error) {\r\n      if (data.error.includes('email') || data.error.includes('Email')) {\r\n        setErrors(prev => ({ ...prev, email: 'Este email ya está registrado' }));\r\n      }\r\n    }\r\n  }, [data.error]);\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <div className=\"user-form-backdrop\" onClick={onHide}>\r\n      <div className=\"user-form-modal\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"user-form-header\">\r\n          <h4>\r\n            <FiUser className=\"user-form-icon\" />\r\n            {isEditing ? 'Editar Usuario' : 'Nuevo Usuario'}\r\n          </h4>\r\n          <button className=\"close-btn\" onClick={onHide}>\r\n            <FiX />\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"user-form-body\">\r\n          {/* Información Personal */}\r\n          <div className=\"user-form-section\">\r\n            <div className=\"user-form-section-title\">\r\n              <FiUser className=\"user-form-icon\" />\r\n              Información Personal\r\n            </div>\r\n            \r\n            <div className=\"user-form-row\">\r\n              <div className=\"user-form-group\">\r\n                <label className=\"user-form-label\">\r\n                  Nombre <span className=\"required\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className={`user-form-input ${errors.name ? 'error' : ''}`}\r\n                  value={formData.name}\r\n                  onChange={(e) => handleInputChange('name', e.target.value)}\r\n                  placeholder=\"Ingresa el nombre\"\r\n                />\r\n                {errors.name && <div className=\"user-form-error\">{errors.name}</div>}\r\n              </div>\r\n\r\n              <div className=\"user-form-group\">\r\n                <label className=\"user-form-label\">\r\n                  Apellido <span className=\"required\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  className={`user-form-input ${errors.apellido ? 'error' : ''}`}\r\n                  value={formData.apellido}\r\n                  onChange={(e) => handleInputChange('apellido', e.target.value)}\r\n                  placeholder=\"Ingresa el apellido\"\r\n                />\r\n                {errors.apellido && <div className=\"user-form-error\">{errors.apellido}</div>}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"user-form-row\">\r\n              <div className=\"user-form-group\">\r\n                <label className=\"user-form-label\">\r\n                  <FiMail className=\"user-form-icon\" />\r\n                  Email <span className=\"required\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  className={`user-form-input ${errors.email ? 'error' : ''}`}\r\n                  value={formData.email}\r\n                  onChange={(e) => handleInputChange('email', e.target.value)}\r\n                  placeholder=\"usuario@ejemplo.com\"\r\n                />\r\n                {errors.email && <div className=\"user-form-error\">{errors.email}</div>}\r\n              </div>\r\n\r\n              <div className=\"user-form-group\">\r\n                <label className=\"user-form-label\">\r\n                  <FiPhone className=\"user-form-icon\" />\r\n                  Teléfono\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  className=\"user-form-input\"\r\n                  value={formData.phone}\r\n                  onChange={(e) => handleInputChange('phone', e.target.value)}\r\n                  placeholder=\"Número de teléfono\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Configuración del Sistema */}\r\n          <div className=\"user-form-section\">\r\n            <div className=\"user-form-section-title\">\r\n              <FiShield className=\"user-form-icon\" />\r\n              Configuración del Sistema\r\n            </div>\r\n            \r\n            <div className=\"user-form-row\">\r\n              <div className=\"user-form-group\">\r\n                <label className=\"user-form-label\">\r\n                  <FiShield className=\"user-form-icon\" />\r\n                  Rol <span className=\"required\">*</span>\r\n                </label>\r\n                <select\r\n                  className=\"user-form-select\"\r\n                  value={formData.role}\r\n                  onChange={(e) => handleInputChange('role', e.target.value)}\r\n                >\r\n                  {ROLES.map(role => (\r\n                    <option key={role.value} value={role.value}>\r\n                      {role.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"user-form-group\">\r\n                <label className=\"user-form-label\">\r\n                  <FiBriefcase className=\"user-form-icon\" />\r\n                  Área <span className=\"required\">*</span>\r\n                </label>\r\n                <select\r\n                  className=\"user-form-select\"\r\n                  value={formData.area}\r\n                  onChange={(e) => handleInputChange('area', e.target.value)}\r\n                >\r\n                  {AREAS.map(area => (\r\n                    <option key={area.value} value={area.value}>\r\n                      {area.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Seguridad */}\r\n          <div className=\"user-form-section\">\r\n            <div className=\"user-form-section-title\">\r\n              <FiLock className=\"user-form-icon\" />\r\n              Seguridad\r\n            </div>\r\n            \r\n            <div className=\"user-form-row single\">\r\n              <div className=\"user-form-group\">\r\n                <label className=\"user-form-label\">\r\n                  <FiLock className=\"user-form-icon\" />\r\n                  Contraseña {!isEditing && <span className=\"required\">*</span>}\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  className={`user-form-input ${errors.password ? 'error' : ''}`}\r\n                  value={formData.password}\r\n                  onChange={(e) => handleInputChange('password', e.target.value)}\r\n                  placeholder={isEditing ? 'Dejar vacío para mantener la contraseña actual' : 'Mínimo 6 caracteres'}\r\n                />\r\n                {errors.password && <div className=\"user-form-error\">{errors.password}</div>}\r\n                <div className=\"user-form-help\">\r\n                  {isEditing ? 'Dejar vacío para mantener la contraseña actual' : 'Mínimo 6 caracteres'}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        <div className=\"user-form-actions\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"user-form-btn user-form-btn-cancel\"\r\n            onClick={onHide}\r\n            disabled={loading}\r\n          >\r\n            <FiX />\r\n            Cancelar\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"user-form-btn user-form-btn-create\"\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <div className=\"spinner-border spinner-border-sm\" role=\"status\">\r\n                  <span className=\"visually-hidden\">Cargando...</span>\r\n                </div>\r\n                {isEditing ? 'Actualizando...' : 'Creando...'}\r\n              </>\r\n            ) : (\r\n              <>\r\n                <FiSave />\r\n                {isEditing ? 'Actualizar' : 'Crear'}\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserFormRedesigned;\r\n","import React, { useMemo, useState } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { Button, Badge, Row, Col, Card, Container, Dropdown, Modal, Form, Alert, Spinner } from 'react-bootstrap';\r\nimport { FiPlus, FiEdit, FiTrash2, FiLock, FiUser, FiUsers, FiShield, FiSettings, FiRefreshCw, FiMoreVertical, FiUserX, FiUserCheck } from 'react-icons/fi';\r\nimport PageHeader from '../components/common/PageHeader';\r\nimport DataTable from '../components/common/DataTable';\r\nimport ModalForm from '../components/common/ModalForm';\r\nimport UserFormRedesigned from '../components/UserFormRedesigned';\r\nimport StatsCard from '../components/common/StatsCard';\r\nimport ConfirmModal from '../components/common/ConfirmModal';\r\nimport { listUsers, createUser, updateUser, deleteUser, getUserStats } from '../services/users';\r\n\r\nconst emptyForm = { id: null, name: '', apellido: '', email: '', phone: '', role: 'vendedor_comercial', area: 'Comercial', password: '' };\r\n\r\nconst ROLES = [\r\n  { value: 'admin', label: 'Administrador' },\r\n  { value: 'jefa_comercial', label: 'Jefa Comercial' },\r\n  { value: 'vendedor_comercial', label: 'Vendedor Comercial' },\r\n  { value: 'jefe_laboratorio', label: 'Jefe Laboratorio' },\r\n  { value: 'usuario_laboratorio', label: 'Usuario Laboratorio' },\r\n  { value: 'facturacion', label: 'Facturación' },\r\n  // Eliminado rol 'laboratorio'. Usar 'usuario_laboratorio'\r\n  { value: 'soporte', label: 'Soporte' },\r\n  { value: 'gerencia', label: 'Gerencia' },\r\n];\r\n\r\nconst AREAS = [\r\n  { value: 'Comercial', label: 'Comercial' },\r\n  { value: 'Laboratorio', label: 'Laboratorio' },\r\n  { value: 'Facturación', label: 'Facturación' },\r\n  { value: 'Sistemas', label: 'Sistemas' },\r\n  { value: 'Gerencia', label: 'Gerencia' },\r\n  { value: 'Soporte', label: 'Soporte' },\r\n];\r\n\r\nexport default function Usuarios() {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingUser, setEditingUser] = useState(null);\r\n  const [deletingUser, setDeletingUser] = useState(null);\r\n  // Eliminado flujo de restablecer contraseña\r\n  const [deactivatingUser, setDeactivatingUser] = useState(null);\r\n  const [success, setSuccess] = useState('');\r\n  const [error, setError] = useState('');\r\n  \r\n  // Estado para paginación\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedRole, setSelectedRole] = useState('');\r\n  const [selectedArea, setSelectedArea] = useState('');\r\n  const [isSearching, setIsSearching] = useState(false);\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const { data, isLoading, refetch } = useQuery(\r\n    ['users', currentPage, searchTerm, selectedRole, selectedArea],\r\n    () => listUsers({ \r\n      page: currentPage, \r\n      limit: 20, \r\n      search: searchTerm, \r\n      role: selectedRole, \r\n      area: selectedArea \r\n    }),\r\n    { \r\n      keepPreviousData: true,\r\n      refetchOnWindowFocus: true,\r\n      refetchOnMount: true,\r\n      staleTime: 0, // Siempre considerar los datos como obsoletos\r\n      cacheTime: 0  // No mantener en caché\r\n    }\r\n  );\r\n\r\n  // Consulta separada para estadísticas reales\r\n  const { data: statsData, isLoading: statsLoading } = useQuery(\r\n    ['userStats'],\r\n    getUserStats,\r\n    {\r\n      refetchOnWindowFocus: true,\r\n      refetchOnMount: true,\r\n      staleTime: 30000, // 30 segundos\r\n      cacheTime: 60000  // 1 minuto\r\n    }\r\n  );\r\n\r\n  const handleMutationSuccess = (message) => {\r\n    queryClient.invalidateQueries('users');\r\n    queryClient.invalidateQueries('userStats'); // Invalidar también las estadísticas\r\n    setShowModal(false);\r\n    setEditingUser(null);\r\n    setDeletingUser(null);\r\n    // Eliminado flujo de restablecer contraseña\r\n  };\r\n\r\n  // Función para manejar búsqueda\r\n  const handleSearch = (searchValue) => {\r\n    console.log('🔍 handleSearch - Búsqueda:', searchValue);\r\n    setSearchTerm(searchValue);\r\n    setCurrentPage(1); // Resetear a la primera página\r\n    setIsSearching(true);\r\n    \r\n    // La consulta se actualizará automáticamente por el useQuery\r\n    setTimeout(() => setIsSearching(false), 1000);\r\n  };\r\n\r\n  // Función para manejar filtros\r\n  const handleFilter = (filters) => {\r\n    console.log('🔍 handleFilter - Filtros:', filters);\r\n    setSelectedRole(filters.role || '');\r\n    setSelectedArea(filters.area || '');\r\n    setCurrentPage(1); // Resetear a la primera página\r\n  };\r\n\r\n  const createMutation = useMutation(createUser, {\r\n    onSuccess: () => handleMutationSuccess('Usuario creado exitosamente'),\r\n    onError: (error) => console.error('Error creating user:', error)\r\n  });\r\n\r\n  const updateMutation = useMutation(\r\n    ({ id, ...userData }) => updateUser(id, userData),\r\n    {\r\n      onSuccess: () => handleMutationSuccess('Usuario actualizado exitosamente'),\r\n      onError: (error) => console.error('Error updating user:', error)\r\n    }\r\n  );\r\n\r\n  const deleteMutation = useMutation(deleteUser, {\r\n    onSuccess: () => handleMutationSuccess('Usuario eliminado exitosamente'),\r\n    onError: (error) => console.error('Error deleting user:', error)\r\n  });\r\n\r\n  // Eliminado resetPasswordMutation\r\n\r\n  const deactivateUserMutation = useMutation(\r\n    ({ id, userData }) => {\r\n      console.log('🔍 deactivateUserMutation - Llamando updateUser con:', { id, userData });\r\n      return updateUser(id, userData);\r\n    },\r\n    {\r\n      onSuccess: (data) => {\r\n        console.log('✅ deactivateUserMutation - Éxito:', data);\r\n        setSuccess('Usuario desactivado exitosamente');\r\n        setDeactivatingUser(null);\r\n        queryClient.invalidateQueries('users');\r\n        queryClient.invalidateQueries('userStats');\r\n      },\r\n      onError: (error) => {\r\n        console.error('❌ deactivateUserMutation - Error:', error);\r\n        setError('Error al desactivar usuario: ' + (error.message || 'Error desconocido'));\r\n      }\r\n    }\r\n  );\r\n\r\n  const activateUserMutation = useMutation(\r\n    ({ id, userData }) => updateUser(id, userData),\r\n    {\r\n      onSuccess: () => {\r\n        setSuccess('Usuario activado exitosamente');\r\n        setDeactivatingUser(null);\r\n        queryClient.invalidateQueries('users');\r\n        queryClient.invalidateQueries('userStats');\r\n      },\r\n      onError: (error) => {\r\n        setError('Error al activar usuario: ' + (error.message || 'Error desconocido'));\r\n        console.error('Error activating user:', error);\r\n      }\r\n    }\r\n  );\r\n\r\n\r\n  const handleCreate = () => {\r\n    setEditingUser(emptyForm);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleEdit = (user, event) => {\r\n    event?.stopPropagation();\r\n    setEditingUser(user);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDelete = (user, event) => {\r\n    event?.stopPropagation();\r\n    setDeletingUser(user);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    try {\r\n      console.log('🔍 confirmDelete - Eliminando usuario:', deletingUser.id);\r\n      await deleteMutation.mutateAsync(deletingUser.id);\r\n      console.log('✅ confirmDelete - Usuario eliminado exitosamente');\r\n      setDeletingUser(null);\r\n    } catch (error) {\r\n      console.error('❌ confirmDelete - Error:', error);\r\n      setError('Error al eliminar usuario: ' + error.message);\r\n      setDeletingUser(null);\r\n    }\r\n  };\r\n\r\n  // Eliminado handleResetPassword\r\n\r\n  const handleSubmit = async (formData) => {\r\n    if (editingUser.id) {\r\n      await updateMutation.mutateAsync({ id: editingUser.id, ...formData });\r\n    } else {\r\n      await createMutation.mutateAsync(formData);\r\n    }\r\n  };\r\n\r\n  // Eliminado handlePasswordReset\r\n\r\n  const handleDeactivateUser = (user, event) => {\r\n    event?.stopPropagation();\r\n    setDeactivatingUser(user);\r\n  };\r\n\r\n  const confirmDeactivate = async () => {\r\n    if (deactivatingUser) {\r\n      console.log('🔍 confirmDeactivate - Desactivando usuario:', deactivatingUser.id);\r\n      try {\r\n        const result = await deactivateUserMutation.mutateAsync({\r\n          id: deactivatingUser.id,\r\n          userData: { active: false }\r\n        });\r\n        console.log('✅ confirmDeactivate - Usuario desactivado exitosamente:', result);\r\n      } catch (error) {\r\n        console.error('❌ confirmDeactivate - Error:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  const handleActivateUser = (user, event) => {\r\n    event?.stopPropagation();\r\n    setDeactivatingUser(user);\r\n  };\r\n\r\n  const confirmActivate = async () => {\r\n    if (deactivatingUser) {\r\n      await activateUserMutation.mutateAsync({\r\n        id: deactivatingUser.id,\r\n        userData: { active: true }\r\n      });\r\n    }\r\n  };\r\n\r\n  const getRoleBadgeColor = (role) => {\r\n    const colors = {\r\n      admin: 'danger',\r\n      jefa_comercial: 'warning',\r\n      vendedor_comercial: 'primary',\r\n      jefe_laboratorio: 'info',\r\n      usuario_laboratorio: 'secondary',\r\n      laboratorio: 'secondary',\r\n      soporte: 'success',\r\n      gerencia: 'dark'\r\n    };\r\n    return colors[role] || 'secondary';\r\n  };\r\n\r\n  const getRoleLabel = (role) => {\r\n    const roleObj = ROLES.find(r => r.value === role);\r\n    return roleObj ? roleObj.label : role;\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      header: 'ID',\r\n      accessor: 'id',\r\n      width: '80px'\r\n    },\r\n    {\r\n      header: 'Nombre',\r\n      accessor: 'name',\r\n      render: (value, row) => (\r\n        <div>\r\n          <div className=\"fw-medium\">{row.name} {row.apellido}</div>\r\n          <small className=\"text-muted\">{row.email}</small>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Rol',\r\n      accessor: 'role',\r\n      render: (value) => (\r\n        <Badge bg={getRoleBadgeColor(value)} className=\"status-badge\">\r\n          {getRoleLabel(value)}\r\n        </Badge>\r\n      )\r\n    },\r\n    {\r\n      header: 'Área',\r\n      accessor: 'area',\r\n      render: (value) => (\r\n        <Badge bg=\"light\" text=\"dark\" className=\"status-badge\">\r\n          {value}\r\n        </Badge>\r\n      )\r\n    },\r\n    {\r\n      header: 'Estado',\r\n      accessor: 'active',\r\n      render: (value, row) => (\r\n        <Badge bg={value !== false ? 'success' : 'danger'} className=\"status-badge\">\r\n          {value !== false ? 'Activo' : 'Inactivo'}\r\n        </Badge>\r\n      )\r\n    },\r\n    {\r\n      header: 'Fecha Creación',\r\n      accessor: 'created_at',\r\n      type: 'date'\r\n    },\r\n    {\r\n      header: 'Acciones',\r\n      accessor: 'actions',\r\n      render: (value, row) => (\r\n        <Dropdown>\r\n          <Dropdown.Toggle variant=\"outline-secondary\" size=\"sm\" id={`dropdown-${row.id}`}>\r\n            <FiMoreVertical />\r\n          </Dropdown.Toggle>\r\n          <Dropdown.Menu>\r\n                <Dropdown.Item onClick={(e) => handleEdit(row, e)}>\r\n                  <FiEdit className=\"me-2\" />\r\n                  Editar Usuario\r\n                </Dropdown.Item>\r\n            <Dropdown.Divider />\r\n            {row.active !== false ? (\r\n              <Dropdown.Item onClick={(e) => handleDeactivateUser(row, e)} className=\"text-warning\">\r\n                <FiUserX className=\"me-2\" />\r\n                Desactivar Usuario\r\n              </Dropdown.Item>\r\n            ) : (\r\n              <Dropdown.Item onClick={(e) => handleActivateUser(row, e)} className=\"text-success\">\r\n                <FiUserCheck className=\"me-2\" />\r\n                Activar Usuario\r\n              </Dropdown.Item>\r\n            )}\r\n            <Dropdown.Item onClick={(e) => handleDelete(row, e)} className=\"text-danger\">\r\n              <FiTrash2 className=\"me-2\" />\r\n              Eliminar Usuario\r\n            </Dropdown.Item>\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const formFields = [\r\n    {\r\n      name: 'name',\r\n      label: 'Nombre',\r\n      type: 'text',\r\n      required: true,\r\n      placeholder: 'Ingresa el nombre'\r\n    },\r\n    {\r\n      name: 'apellido',\r\n      label: 'Apellido',\r\n      type: 'text',\r\n      required: true,\r\n      placeholder: 'Ingresa el apellido'\r\n    },\r\n    {\r\n      name: 'email',\r\n      label: 'Email',\r\n      type: 'email',\r\n      required: true,\r\n      placeholder: 'usuario@ejemplo.com'\r\n    },\r\n    {\r\n      name: 'phone',\r\n      label: 'Teléfono',\r\n      type: 'tel',\r\n      required: false,\r\n      placeholder: 'Número de teléfono'\r\n    },\r\n    {\r\n      name: 'role',\r\n      label: 'Rol',\r\n      type: 'select',\r\n      required: true,\r\n      options: ROLES\r\n    },\r\n    {\r\n      name: 'area',\r\n      label: 'Área',\r\n      type: 'select',\r\n      required: true,\r\n      options: AREAS\r\n    },\r\n    {\r\n      name: 'password',\r\n      label: 'Contraseña',\r\n      type: 'password',\r\n      required: !editingUser?.id,\r\n      placeholder: 'Mínimo 6 caracteres',\r\n      help: editingUser?.id ? 'Dejar vacío para mantener la contraseña actual' : 'Mínimo 6 caracteres'\r\n    }\r\n  ];\r\n\r\n  // Removemos las acciones antiguas ya que ahora usamos el menú desplegable\r\n\r\n  // Calcular estadísticas\r\n  const stats = useMemo(() => {\r\n    // Usar estadísticas reales del backend si están disponibles\r\n    if (statsData) {\r\n      console.log('📊 Stats - Usando estadísticas reales del backend:', statsData);\r\n      return {\r\n        total: statsData.total || 0,\r\n        admins: statsData.admins || 0,\r\n        vendedores: statsData.vendedores || 0,\r\n        laboratorio: statsData.laboratorio || 0,\r\n        activos: statsData.active || 0\r\n      };\r\n    }\r\n    \r\n    // Fallback: calcular desde los datos de la página actual\r\n    const users = data?.data || [];\r\n    console.log('📊 Stats - Fallback: calculando desde página actual:', users);\r\n    return {\r\n      total: users.length,\r\n      admins: users.filter(u => u.role === 'admin').length,\r\n      vendedores: users.filter(u => u.role === 'vendedor_comercial').length,\r\n      laboratorio: users.filter(u => ['jefe_laboratorio', 'usuario_laboratorio'].includes(u.role)).length,\r\n      activos: users.filter(u => u.active !== false).length\r\n    };\r\n  }, [statsData, data]);\r\n\r\n  return (\r\n    <Container fluid className=\"py-4\">\r\n      <div className=\"fade-in\">\r\n        <PageHeader\r\n          title=\"Gestión de Usuarios\"\r\n          subtitle=\"Crear, editar, eliminar y gestionar usuarios del sistema\"\r\n          icon={FiUsers}\r\n          actions={\r\n            <Button variant=\"primary\" onClick={handleCreate}>\r\n              <FiPlus className=\"me-2\" />\r\n              Nuevo Usuario\r\n            </Button>\r\n          }\r\n        />\r\n\r\n        {/* Estadísticas */}\r\n        <Row className=\"g-4 mb-4\">\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Total Usuarios\"\r\n              value={stats.total}\r\n              icon={FiUsers}\r\n              color=\"primary\"\r\n              subtitle=\"Usuarios registrados\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Administradores\"\r\n              value={stats.admins}\r\n              icon={FiShield}\r\n              color=\"danger\"\r\n              subtitle=\"Usuarios con privilegios\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Vendedores\"\r\n              value={stats.vendedores}\r\n              icon={FiUser}\r\n              color=\"success\"\r\n              subtitle=\"Equipo comercial\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Laboratorio\"\r\n              value={stats.laboratorio}\r\n              icon={FiSettings}\r\n              color=\"info\"\r\n              subtitle=\"Personal técnico\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Tabla de usuarios */}\r\n        <Card className=\"shadow-sm border-0\">\r\n          <Card.Header className=\"bg-white border-bottom\">\r\n            <div className=\"d-flex justify-content-between align-items-center\">\r\n              <h5 className=\"mb-0\">\r\n                <FiUsers className=\"me-2 text-primary\" />\r\n                Lista de Usuarios\r\n              </h5>\r\n              <div className=\"d-flex align-items-center gap-2\">\r\n                <Button\r\n                  variant=\"outline-primary\"\r\n                  size=\"sm\"\r\n                  onClick={() => refetch()}\r\n                  disabled={isLoading}\r\n                  className=\"refresh-btn\"\r\n                >\r\n                  <FiRefreshCw className={isLoading ? 'spinning' : ''} />\r\n                </Button>\r\n                <Badge bg=\"light\" text=\"dark\" className=\"px-3 py-2\">\r\n                  {stats.total} usuarios\r\n                </Badge>\r\n              </div>\r\n            </div>\r\n          </Card.Header>\r\n          <Card.Body className=\"p-0\">\r\n            <DataTable\r\n              data={data?.data || []}\r\n              columns={columns}\r\n              loading={isLoading || isSearching}\r\n              emptyMessage=\"No hay usuarios registrados\"\r\n              // Props para paginación del backend\r\n              totalItems={data?.total || 0}\r\n              itemsPerPage={20}\r\n              currentPage={currentPage}\r\n              onPageChange={setCurrentPage}\r\n              onSearch={handleSearch}\r\n              onFilter={handleFilter}\r\n            />\r\n          </Card.Body>\r\n        </Card>\r\n\r\n      <UserFormRedesigned\r\n        show={showModal}\r\n        onHide={() => setShowModal(false)}\r\n        data={editingUser || emptyForm}\r\n        onSubmit={handleSubmit}\r\n        loading={createMutation.isLoading || updateMutation.isLoading}\r\n        isEditing={!!editingUser?.id}\r\n      />\r\n\r\n      {/* Modal de restablecer contraseña eliminado */}\r\n\r\n      {/* Modal para desactivar usuario */}\r\n      <Modal show={!!deactivatingUser} onHide={() => setDeactivatingUser(null)} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>\r\n            <FiUserX className=\"me-2 text-warning\" />\r\n            {deactivatingUser?.active !== false ? 'Desactivar Usuario' : 'Activar Usuario'}\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>\r\n            ¿Estás seguro de que quieres {deactivatingUser?.active !== false ? 'desactivar' : 'activar'} al usuario{' '}\r\n            <strong>{deactivatingUser?.name} {deactivatingUser?.apellido}</strong>?\r\n          </p>\r\n          {deactivatingUser?.active !== false ? (\r\n            <Alert variant=\"warning\">\r\n              <strong>Nota:</strong> Al desactivar el usuario, no podrá acceder al sistema hasta que sea reactivado.\r\n            </Alert>\r\n          ) : (\r\n            <Alert variant=\"info\">\r\n              <strong>Nota:</strong> Al activar el usuario, podrá acceder nuevamente al sistema.\r\n            </Alert>\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setDeactivatingUser(null)}>\r\n            Cancelar\r\n          </Button>\r\n          <Button \r\n            variant={deactivatingUser?.active !== false ? 'warning' : 'success'}\r\n            onClick={deactivatingUser?.active !== false ? confirmDeactivate : confirmActivate}\r\n            disabled={deactivatingUser?.active !== false ? deactivateUserMutation.isLoading : activateUserMutation.isLoading}\r\n          >\r\n            {(deactivatingUser?.active !== false ? deactivateUserMutation.isLoading : activateUserMutation.isLoading) ? (\r\n              <>\r\n                <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />\r\n                Procesando...\r\n              </>\r\n            ) : (\r\n              <>\r\n                {deactivatingUser?.active !== false ? (\r\n                  <>\r\n                    <FiUserX className=\"me-2\" />\r\n                    Desactivar\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <FiUserCheck className=\"me-2\" />\r\n                    Activar\r\n                  </>\r\n                )}\r\n              </>\r\n            )}\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Modal para eliminar usuario */}\r\n      <ConfirmModal\r\n        show={!!deletingUser}\r\n        onHide={() => setDeletingUser(null)}\r\n        onConfirm={confirmDelete}\r\n        title=\"Eliminar Usuario\"\r\n        message={`¿Estás seguro de que quieres eliminar al usuario ${deletingUser?.name} ${deletingUser?.apellido}?`}\r\n        confirmText=\"Eliminar\"\r\n        variant=\"danger\"\r\n        isLoading={deleteMutation.isLoading}\r\n        alertMessage=\"¡Advertencia! Esta acción es irreversible. Se eliminarán todos los datos asociados al usuario.\"\r\n        alertVariant=\"danger\"\r\n      />\r\n\r\n\r\n      {/* Alertas de éxito y error */}\r\n      {success && (\r\n        <div className=\"position-fixed top-0 end-0 p-3\" style={{ zIndex: 1050 }}>\r\n          <Alert variant=\"success\" dismissible onClose={() => setSuccess('')}>\r\n            {success}\r\n          </Alert>\r\n        </div>\r\n      )}\r\n      \r\n      {error && (\r\n        <div className=\"position-fixed top-0 end-0 p-3\" style={{ zIndex: 1050 }}>\r\n          <Alert variant=\"danger\" dismissible onClose={() => setError('')}>\r\n            {error}\r\n          </Alert>\r\n        </div>\r\n      )}\r\n      </div>\r\n    </Container>\r\n  );\r\n};"],"names":["ROLES","AREAS","UserFormRedesigned","show","onHide","data","onSubmit","loading","isEditing","formData","setFormData","useState","errors","setErrors","React","isNewUser","handleInputChange","field","value","prev","validateForm","newErrors","handleSubmit","e","submitData","jsx","jsxs","FiUser","FiX","FiMail","FiPhone","FiShield","role","FiBriefcase","area","FiLock","Fragment","FiSave","emptyForm","Usuarios","showModal","setShowModal","editingUser","setEditingUser","deletingUser","setDeletingUser","deactivatingUser","setDeactivatingUser","success","setSuccess","error","setError","currentPage","setCurrentPage","searchTerm","setSearchTerm","selectedRole","setSelectedRole","selectedArea","setSelectedArea","isSearching","setIsSearching","queryClient","useQueryClient","isLoading","refetch","useQuery","listUsers","statsData","statsLoading","getUserStats","handleMutationSuccess","message","handleSearch","searchValue","handleFilter","filters","createMutation","useMutation","createUser","updateMutation","id","userData","updateUser","deleteMutation","deleteUser","deactivateUserMutation","activateUserMutation","handleCreate","handleEdit","user","event","handleDelete","confirmDelete","handleDeactivateUser","confirmDeactivate","result","handleActivateUser","confirmActivate","getRoleBadgeColor","getRoleLabel","roleObj","r","columns","row","Badge","Dropdown","FiMoreVertical","FiEdit","FiUserX","FiUserCheck","FiTrash2","stats","useMemo","users","u","Container","PageHeader","FiUsers","Button","FiPlus","Row","Col","StatsCard","FiSettings","Card","FiRefreshCw","DataTable","Modal","Alert","Spinner","ConfirmModal"],"mappings":"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"}