import{r as C,j as e,av as L,aw as r,X as K,Z as U,ax as W,k as X,v as Z,O as q,B as u,n as Q}from"./index-DEOVmouH.js";import{R as E,C as f}from"./Row-BbuP-81J.js";import{I as R}from"./InputGroup-BKumZwLE.js";import{F as Y}from"./Form-B65jexOv.js";import{T as O}from"./Table-CnkmMpGQ.js";const ae=({data:k=[],columns:h=[],searchable:N=!0,filterable:y=!0,actions:j=[],onEdit:I,onDelete:S,onView:T,loading:B=!1,emptyMessage:G="No hay datos disponibles",className:V="",totalItems:o=0,itemsPerPage:m=20,currentPage:c=1,onPageChange:d,onSearch:w,onFilter:a,filterOptions:g=null})=>{const[b,_]=C.useState(""),[x,H]=C.useState(""),[p,D]=C.useState("asc"),v=C.useMemo(()=>{let s=k;return o>0||(b&&N&&(s=s.filter(t=>h.some(i=>{const l=i.accessor?t[i.accessor]:"";return String(l).toLowerCase().includes(b.toLowerCase())}))),x&&(s=[...s].sort((t,i)=>{const l=t[x],z=i[x];return l<z?p==="asc"?-1:1:l>z?p==="asc"?1:-1:0}))),s},[k,b,x,p,h,N,o]),n=o>0?Math.ceil(o/m):Math.ceil(v.length/m),M=o>0?k:v.slice((c-1)*m,c*m),A=s=>{x===s?D(p==="asc"?"desc":"asc"):(H(s),D("asc"))},J=s=>x!==s?null:p==="asc"?"↑":"↓",$=(s,t)=>{const i=t.accessor?s[t.accessor]:"";return t.render?t.render(i,s):t.type==="badge"?e.jsx(Q,{bg:t.badgeColor||"secondary",children:i}):t.type==="date"?new Date(i).toLocaleDateString("es-ES"):i};return B?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),e.jsx("p",{className:"mt-2 text-muted",children:"Cargando datos..."})]}):e.jsxs("div",{className:`data-table ${V}`,children:[(N||y)&&e.jsx("div",{className:"table-controls bg-light p-3 rounded-top border",children:e.jsxs(E,{className:"align-items-center",children:[N&&e.jsx(f,{md:6,children:e.jsxs(R,{children:[e.jsx(R.Text,{children:e.jsx(L,{})}),e.jsx(Y.Control,{type:"text",placeholder:"Buscar por nombre, email, rol...",value:b,onChange:s=>{_(s.target.value),w&&(clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{w(s.target.value)},500))}})]})}),y&&e.jsx(f,{md:6,className:"text-end",children:e.jsxs(r,{children:[e.jsxs(r.Toggle,{variant:"outline-secondary",size:"sm",children:[e.jsx(K,{className:"me-1"}),"Filtros"]}),e.jsxs(r.Menu,{children:[e.jsx(r.Item,{onClick:()=>a&&a({}),children:"Limpiar filtros"}),e.jsx(r.Divider,{}),g?g.map((s,t)=>e.jsxs(U.Fragment,{children:[e.jsx(r.Header,{children:s.title}),s.options.map((i,l)=>e.jsx(r.Item,{onClick:()=>a&&a(i.filter),children:i.label},l)),t<g.length-1&&e.jsx(r.Divider,{})]},t)):e.jsxs(e.Fragment,{children:[e.jsx(r.Header,{children:"Por Rol"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"admin"}),children:"Administradores"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"vendedor_comercial"}),children:"Vendedores Comerciales"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"jefa_comercial"}),children:"Jefas Comerciales"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"jefe_laboratorio"}),children:"Jefes de Laboratorio"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"usuario_laboratorio"}),children:"Usuarios de Laboratorio"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"soporte"}),children:"Soporte"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"gerencia"}),children:"Gerencia"}),e.jsx(r.Divider,{}),e.jsx(r.Header,{children:"Por Área"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Comercial"}),children:"Comercial"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Laboratorio"}),children:"Laboratorio"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Sistemas"}),children:"Sistemas"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Gerencia"}),children:"Gerencia"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Soporte"}),children:"Soporte"})]})]})]})})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs(O,{hover:!0,className:"mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[h.map((s,t)=>e.jsx("th",{className:s.sortable?"cursor-pointer":"",onClick:()=>s.sortable&&A(s.accessor),style:{minWidth:s.width||"auto"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[s.header,s.sortable&&e.jsx("span",{className:"ms-1 text-muted",children:J(s.accessor)})]})},t)),j.length>0&&e.jsx("th",{width:"120",className:"text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:M.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:h.length+(j.length>0?1:0),className:"text-center py-5",children:e.jsxs("div",{className:"text-muted",children:[e.jsx(L,{size:48,className:"mb-3 opacity-50"}),e.jsx("p",{className:"mb-0",children:G})]})})}):M.map((s,t)=>e.jsxs("tr",{children:[h.map((i,l)=>e.jsx("td",{children:$(s,i)},l)),j.length>0&&e.jsx("td",{className:"text-center",children:e.jsxs(r,{children:[e.jsx(r.Toggle,{variant:"link",size:"sm",className:"text-muted",children:e.jsx(W,{})}),e.jsx(r.Menu,{children:j.length>0?j.map((i,l)=>e.jsxs(r.Item,{onClick:()=>i.onClick&&i.onClick(s),className:i.variant==="outline-danger"?"text-danger":"",children:[i.icon&&e.jsx(i.icon,{className:"me-2"}),i.label]},l)):e.jsxs(e.Fragment,{children:[T&&e.jsxs(r.Item,{onClick:()=>T(s),children:[e.jsx(X,{className:"me-2"}),"Ver"]}),I&&e.jsxs(r.Item,{onClick:()=>I(s),children:[e.jsx(Z,{className:"me-2"}),"Editar"]}),S&&e.jsxs(r.Item,{onClick:()=>S(s),className:"text-danger",children:[e.jsx(q,{className:"me-2"}),"Eliminar"]})]})})]})})]},s.id||t))})]})}),n>1&&e.jsx("div",{className:"table-footer bg-light p-3 rounded-bottom border border-top-0",children:e.jsxs(E,{className:"align-items-center",children:[e.jsx(f,{children:e.jsxs("small",{className:"text-muted",children:["Mostrando ",(c-1)*m+1," a ",Math.min(c*m,o||v.length)," de ",o||v.length," registros"]})}),e.jsx(f,{xs:"auto",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(u,{variant:"outline-secondary",size:"sm",disabled:c===1,onClick:()=>d?d(1):setCurrentPage(1),title:"Primera página",children:"««"}),e.jsx(u,{variant:"outline-secondary",size:"sm",disabled:c===1,onClick:()=>d?d(c-1):setCurrentPage(c-1),title:"Página anterior",children:"«"}),(()=>{const s=[],t=Math.max(1,c-1),i=Math.min(n,t+2);for(let l=t;l<=i;l++)s.push(e.jsx(u,{variant:c===l?"primary":"outline-secondary",size:"sm",onClick:()=>d?d(l):setCurrentPage(l),className:"px-3",children:l},l));return s})(),e.jsx(u,{variant:"outline-secondary",size:"sm",disabled:c===n,onClick:()=>d?d(c+1):setCurrentPage(c+1),title:"Página siguiente",children:"»"}),e.jsx(u,{variant:"outline-secondary",size:"sm",disabled:c===n,onClick:()=>d?d(n):setCurrentPage(n),title:"Última página",children:"»»"}),e.jsxs("div",{className:"d-flex align-items-center gap-1 ms-3",children:[e.jsx("span",{className:"text-muted small",children:"Ir a:"}),e.jsx("input",{type:"number",min:"1",max:n,className:"form-control form-control-sm",style:{width:"60px"},placeholder:"...",onKeyPress:s=>{if(s.key==="Enter"){const t=parseInt(s.target.value);t>=1&&t<=n?(d?d(t):setCurrentPage(t),s.target.value=""):(d?d(n):setCurrentPage(n),s.target.value="")}},title:`Ingresa un número del 1 al ${n}`})]})]})})]})})]})};export{ae as D};
//# sourceMappingURL=DataTable-DczKv8iu.js.map
