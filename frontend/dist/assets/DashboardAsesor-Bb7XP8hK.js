import{b as C,a as P,u as S,r as d,j as e,B as i,N as x,F as h,f as g,V as j,a0 as z,C as f,n as Q,k as A}from"./index-_ax5caxz.js";import{C as b,R as c}from"./Row-DUT7dzcT.js";import{S as B}from"./Spinner-CWz_2665.js";import{C as a}from"./Col-DhWa0-63.js";import{A as w}from"./Alert-e0x4JDT9.js";import{C as t}from"./Card-DX68ND5N.js";const F=async()=>{try{return await C("/api/asesor/stats")}catch(l){throw console.error("Error fetching asesor stats:",l),l}},L=()=>{const{user:l}=P(),o=S(),[v,p]=d.useState(!0),[u,m]=d.useState(null),[r,y]=d.useState({totalQuotes:0,pendingQuotes:0,approvedQuotes:0,totalProofs:0,pendingProofs:0,approvedProofs:0,recentQuotes:[],recentProofs:[]});d.useEffect(()=>{N()},[]);const N=async()=>{try{p(!0),m(null);const s=await F();y({totalQuotes:s.quotes.total,pendingQuotes:s.quotes.pending,approvedQuotes:s.quotes.approved,totalProofs:s.proofs.total,pendingProofs:s.proofs.pending,approvedProofs:s.proofs.approved,recentQuotes:s.recentQuotes,recentProofs:s.recentProofs})}catch(s){console.error("Error fetching asesor stats:",s),m("Error al cargar las estadÃ­sticas: "+(s.message||"Error desconocido"))}finally{p(!1)}};return v?e.jsx(b,{fluid:!0,className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:e.jsx(B,{animation:"border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):e.jsxs(b,{fluid:!0,children:[e.jsxs(c,{className:"mb-4",children:[e.jsxs(a,{children:[e.jsx("h2",{children:"ðŸ“Š Dashboard Asesor"}),e.jsx("p",{className:"text-muted",children:"Resumen de tu actividad comercial"})]}),e.jsx(a,{xs:"auto",children:e.jsxs(i,{variant:"outline-primary",onClick:N,children:[e.jsx(x,{className:"me-2"}),"Actualizar"]})})]}),u&&e.jsx(w,{variant:"danger",dismissible:!0,onClose:()=>m(null),children:u}),e.jsxs(c,{className:"mb-4",children:[e.jsx(a,{md:3,children:e.jsx(t,{className:"text-center",children:e.jsxs(t.Body,{children:[e.jsx(h,{className:"text-primary mb-2",style:{fontSize:"2rem"}}),e.jsx("h3",{children:r.totalQuotes}),e.jsx("p",{className:"text-muted mb-0",children:"Cotizaciones Totales"})]})})}),e.jsx(a,{md:3,children:e.jsx(t,{className:"text-center",children:e.jsxs(t.Body,{children:[e.jsx(x,{className:"text-warning mb-2",style:{fontSize:"2rem"}}),e.jsx("h3",{children:r.pendingQuotes}),e.jsx("p",{className:"text-muted mb-0",children:"Cotizaciones Pendientes"})]})})}),e.jsx(a,{md:3,children:e.jsx(t,{className:"text-center",children:e.jsxs(t.Body,{children:[e.jsx(g,{className:"text-success mb-2",style:{fontSize:"2rem"}}),e.jsx("h3",{children:r.approvedQuotes}),e.jsx("p",{className:"text-muted mb-0",children:"Cotizaciones Aprobadas"})]})})}),e.jsx(a,{md:3,children:e.jsx(t,{className:"text-center",children:e.jsxs(t.Body,{children:[e.jsx(j,{className:"text-info mb-2",style:{fontSize:"2rem"}}),e.jsx("h3",{children:r.totalProofs}),e.jsx("p",{className:"text-muted mb-0",children:"Comprobantes Enviados"})]})})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(a,{md:4,children:e.jsx(t,{className:"text-center",children:e.jsxs(t.Body,{children:[e.jsx(x,{className:"text-warning mb-2",style:{fontSize:"1.5rem"}}),e.jsx("h4",{children:r.pendingProofs}),e.jsx("p",{className:"text-muted mb-0",children:"Comprobantes Pendientes"})]})})}),e.jsx(a,{md:4,children:e.jsx(t,{className:"text-center",children:e.jsxs(t.Body,{children:[e.jsx(g,{className:"text-success mb-2",style:{fontSize:"1.5rem"}}),e.jsx("h4",{children:r.approvedProofs}),e.jsx("p",{className:"text-muted mb-0",children:"Comprobantes Aprobados"})]})})}),e.jsx(a,{md:4,children:e.jsx(t,{className:"text-center",children:e.jsxs(t.Body,{children:[e.jsx(z,{className:"text-primary mb-2",style:{fontSize:"1.5rem"}}),e.jsx("h4",{children:r.approvedProofs}),e.jsx("p",{className:"text-muted mb-0",children:"Pagos Procesados"})]})})})]}),e.jsxs(c,{children:[e.jsx(a,{lg:6,children:e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(h,{className:"me-2"}),"Cotizaciones Recientes"]})}),e.jsx(t.Body,{children:r.recentQuotes.length===0?e.jsx("p",{className:"text-muted text-center",children:"No tienes cotizaciones"}):e.jsx("div",{className:"list-group list-group-flush",children:r.recentQuotes.map(s=>{var n;return e.jsx("div",{className:"list-group-item",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"mb-1",children:s.quote_number}),e.jsxs("p",{className:"mb-1 text-muted",children:[e.jsx("strong",{children:"Cliente:"})," ",s.client_name,e.jsx("br",{}),e.jsx("strong",{children:"Monto:"})," $",(n=s.total_amount)==null?void 0:n.toLocaleString()]})]}),e.jsx(f,{bg:s.status==="approved"?"success":s.status==="pending"?"warning":"secondary",children:s.status==="approved"?"Aprobada":s.status==="pending"?"Pendiente":"Nueva"})]})},s.id)})})})]})}),e.jsx(a,{lg:6,children:e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(j,{className:"me-2"}),"Comprobantes Recientes"]})}),e.jsx(t.Body,{children:r.recentProofs.length===0?e.jsx("p",{className:"text-muted text-center",children:"No has enviado comprobantes"}):e.jsx("div",{className:"list-group list-group-flush",children:r.recentProofs.map(s=>{var n;return e.jsx("div",{className:"list-group-item",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsxs("h6",{className:"mb-1",children:["CotizaciÃ³n: ",s.quote_number]}),e.jsxs("p",{className:"mb-1 text-muted",children:[e.jsx("strong",{children:"Monto:"})," $",(n=s.amount_paid)==null?void 0:n.toLocaleString(),e.jsx("br",{}),e.jsx("strong",{children:"Fecha:"})," ",new Date(s.created_at).toLocaleDateString()]})]}),e.jsx(f,{bg:s.status==="approved"?"success":s.status==="pending"?"warning":"danger",children:s.status==="approved"?"Aprobado":s.status==="pending"?"Pendiente":"Rechazado"})]})},s.id)})})})]})})]}),e.jsx(c,{className:"mt-4",children:e.jsx(a,{children:e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsx("h5",{className:"mb-0",children:"Acciones RÃ¡pidas"})}),e.jsx(t.Body,{children:e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs(i,{variant:"primary",onClick:()=>o("/cotizaciones/inteligente"),className:"d-flex align-items-center",children:[e.jsx(h,{className:"me-2"}),"Nueva CotizaciÃ³n"]}),e.jsxs(i,{variant:"success",onClick:()=>o("/enviar-comprobante"),className:"d-flex align-items-center",children:[e.jsx(j,{className:"me-2"}),"Enviar Comprobante"]}),e.jsxs(i,{variant:"info",onClick:()=>o("/clientes"),className:"d-flex align-items-center",children:[e.jsx(Q,{className:"me-2"}),"Ver Clientes"]}),e.jsxs(i,{variant:"secondary",onClick:()=>o("/proyectos"),className:"d-flex align-items-center",children:[e.jsx(A,{className:"me-2"}),"Ver Proyectos"]})]})})]})})})]})};export{L as default};
//# sourceMappingURL=DashboardAsesor-Bb7XP8hK.js.map
