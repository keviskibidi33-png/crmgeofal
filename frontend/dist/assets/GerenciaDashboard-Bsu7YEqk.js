import{r as n,b as le,j as e,am as ie,W as re,Y as Q,h as X,ao as Z,l as d}from"./index-Bcrgukx7.js";import{P as ce}from"./PageHeader-BXdzGOF9.js";import{S as m}from"./StatsCard-Bg6TicJV.js";import{C as t,R as r}from"./Row-B5ljKXp5.js";import{S as ne}from"./Spinner-jUAz7otr.js";import{A as _}from"./Alert-C1-1JEUj.js";import{C as a}from"./Col-C5Zwr_ej.js";import{C as l}from"./Card-C96hNOBG.js";function ue(){var j,N,u,v,b,p,g,f,y,C,P,R,S,T,A,F,$,k,E,L,B,D,H,w,M,G,z,I,U,q,K,V,W,Y,J,O;const[s,ee]=n.useState(null),[se,o]=n.useState(!0),[h,x]=n.useState(null);n.useEffect(()=>{ae()},[]);const ae=async()=>{try{o(!0),x(null);const i=await le("/api/role-dashboard/gerencia");ee(i)}catch(i){console.error("Error fetching dashboard data:",i),x("Error al cargar los datos del dashboard")}finally{o(!1)}};return se?e.jsx(t,{fluid:!0,className:"p-4",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:e.jsx(ne,{animation:"border",size:"lg"})})}):h?e.jsx(t,{fluid:!0,className:"p-4",children:e.jsx(_,{variant:"danger",children:h})}):e.jsxs(t,{fluid:!0,className:"p-4",children:[e.jsx(ce,{title:"Dashboard Gerencia",subtitle:"KPIs ejecutivos, ingresos y rendimiento por área",icon:ie}),e.jsxs(r,{className:"mb-4",children:[e.jsx(a,{lg:3,md:6,className:"mb-3",children:e.jsx(m,{title:"Revenue Total",value:`$${(((j=s==null?void 0:s.kpis)==null?void 0:j.totalRevenue)||0).toLocaleString()}`,icon:re,color:"success",subtitle:`${((N=s==null?void 0:s.kpis)==null?void 0:N.revenueGrowth)||0}% crecimiento`})}),e.jsx(a,{lg:3,md:6,className:"mb-3",children:e.jsx(m,{title:"Revenue Mensual",value:`$${(((u=s==null?void 0:s.kpis)==null?void 0:u.monthlyRevenue)||0).toLocaleString()}`,icon:Q,color:"info",subtitle:"Mes actual"})}),e.jsx(a,{lg:3,md:6,className:"mb-3",children:e.jsx(m,{title:"Clientes Totales",value:((v=s==null?void 0:s.kpis)==null?void 0:v.totalClients)||0,icon:X,color:"primary",subtitle:`${((b=s==null?void 0:s.kpis)==null?void 0:b.activeClients)||0} activos`})}),e.jsx(a,{lg:3,md:6,className:"mb-3",children:e.jsx(m,{title:"Tasa de Conversión",value:`${(((p=s==null?void 0:s.kpis)==null?void 0:p.conversionRate)||0).toFixed(1)}%`,icon:Z,color:"warning",subtitle:"Cotizaciones"})})]}),e.jsxs(r,{className:"mb-4",children:[e.jsx(a,{lg:6,className:"mb-3",children:e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(d,{className:"me-2"}),"Rendimiento - Ventas"]})}),e.jsx(l.Body,{children:e.jsxs(r,{children:[e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Revenue"}),e.jsxs("div",{className:"h5",children:["$",(((f=(g=s==null?void 0:s.areaPerformance)==null?void 0:g.ventas)==null?void 0:f.revenue)||0).toLocaleString()]})]})}),e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Cotizaciones"}),e.jsx("div",{className:"h5",children:((C=(y=s==null?void 0:s.areaPerformance)==null?void 0:y.ventas)==null?void 0:C.quotesGenerated)||0})]})}),e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Conversión"}),e.jsxs("div",{className:"h5",children:[(((R=(P=s==null?void 0:s.areaPerformance)==null?void 0:P.ventas)==null?void 0:R.conversionRate)||0).toFixed(1),"%"]})]})}),e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Deals Activos"}),e.jsx("div",{className:"h5",children:((T=(S=s==null?void 0:s.areaPerformance)==null?void 0:S.ventas)==null?void 0:T.activeDeals)||0})]})})]})})]})}),e.jsx(a,{lg:6,className:"mb-3",children:e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(d,{className:"me-2"}),"Rendimiento - Laboratorio"]})}),e.jsx(l.Body,{children:e.jsxs(r,{children:[e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Proyectos Completados"}),e.jsx("div",{className:"h5",children:((F=(A=s==null?void 0:s.areaPerformance)==null?void 0:A.laboratorio)==null?void 0:F.projectsCompleted)||0})]})}),e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Tiempo Promedio"}),e.jsxs("div",{className:"h5",children:[((k=($=s==null?void 0:s.areaPerformance)==null?void 0:$.laboratorio)==null?void 0:k.avgProcessingTime)||0," días"]})]})}),e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Evidencias"}),e.jsx("div",{className:"h5",children:((L=(E=s==null?void 0:s.areaPerformance)==null?void 0:E.laboratorio)==null?void 0:L.evidencesSubmitted)||0})]})}),e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Eficiencia"}),e.jsxs("div",{className:"h5",children:[(((D=(B=s==null?void 0:s.areaPerformance)==null?void 0:B.laboratorio)==null?void 0:D.efficiency)||0).toFixed(1),"%"]})]})})]})})]})})]}),e.jsxs(r,{className:"mb-4",children:[e.jsx(a,{lg:6,className:"mb-3",children:e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(d,{className:"me-2"}),"Rendimiento - Soporte"]})}),e.jsx(l.Body,{children:e.jsxs(r,{children:[e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Tickets Resueltos"}),e.jsx("div",{className:"h5",children:((w=(H=s==null?void 0:s.areaPerformance)==null?void 0:H.soporte)==null?void 0:w.ticketsResolved)||0})]})}),e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Tiempo Resolución"}),e.jsxs("div",{className:"h5",children:[((G=(M=s==null?void 0:s.areaPerformance)==null?void 0:M.soporte)==null?void 0:G.avgResolutionTime)||0," días"]})]})}),e.jsx(a,{md:12,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"SLA Compliance"}),e.jsxs("div",{className:"h5",children:[(((I=(z=s==null?void 0:s.areaPerformance)==null?void 0:z.soporte)==null?void 0:I.slaCompliance)||0).toFixed(1),"%"]})]})})]})})]})}),e.jsx(a,{lg:6,className:"mb-3",children:e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(d,{className:"me-2"}),"Rendimiento - Facturación"]})}),e.jsx(l.Body,{children:e.jsxs(r,{children:[e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Comprobantes Procesados"}),e.jsx("div",{className:"h5",children:((q=(U=s==null?void 0:s.areaPerformance)==null?void 0:U.facturacion)==null?void 0:q.vouchersProcessed)||0})]})}),e.jsx(a,{md:6,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Tiempo Aprobación"}),e.jsxs("div",{className:"h5",children:[((V=(K=s==null?void 0:s.areaPerformance)==null?void 0:K.facturacion)==null?void 0:V.avgApprovalTime)||0," días"]})]})}),e.jsx(a,{md:12,children:e.jsxs("div",{className:"metric-item mb-3",children:[e.jsx("small",{className:"text-muted",children:"Monto Pendiente"}),e.jsxs("div",{className:"h5",children:["$",(((Y=(W=s==null?void 0:s.areaPerformance)==null?void 0:W.facturacion)==null?void 0:Y.pendingAmount)||0).toLocaleString()]})]})})]})})]})})]}),((J=s==null?void 0:s.clientAnalysis)==null?void 0:J.topClients)&&s.clientAnalysis.topClients.length>0&&e.jsx(r,{className:"mb-4",children:e.jsx(a,{lg:12,children:e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(X,{className:"me-2"}),"Top Clientes por Revenue"]})}),e.jsx(l.Body,{children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-borderless",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Cliente"}),e.jsx("th",{className:"text-end",children:"Revenue"})]})}),e.jsx("tbody",{children:s.clientAnalysis.topClients.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:i.name}),e.jsxs("td",{className:"text-end",children:["$",i.revenue.toLocaleString()]})]},c))})]})})})]})})}),(s==null?void 0:s.strategicAlerts)&&s.strategicAlerts.length>0&&e.jsx(r,{className:"mb-4",children:e.jsx(a,{lg:12,children:e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(Z,{className:"me-2"}),"Alertas Estratégicas"]})}),e.jsx(l.Body,{children:s.strategicAlerts.map((i,c)=>e.jsxs(_,{variant:i.type==="warning"?"warning":"info",className:"mb-2",children:[e.jsxs("strong",{children:[i.category,":"]})," ",i.message,e.jsxs("small",{className:"d-block text-muted",children:["Impacto: ",i.impact]})]},c))})]})})}),((O=s==null?void 0:s.financial)==null?void 0:O.monthlyTrends)&&s.financial.monthlyTrends.length>0&&e.jsx(r,{className:"mb-4",children:e.jsx(a,{lg:12,children:e.jsxs(l,{children:[e.jsx(l.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(Q,{className:"me-2"}),"Tendencias Mensuales (últimos 6 meses)"]})}),e.jsx(l.Body,{children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-borderless",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Mes"}),e.jsx("th",{className:"text-end",children:"Revenue"}),e.jsx("th",{className:"text-end",children:"Deals"})]})}),e.jsx("tbody",{children:s.financial.monthlyTrends.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:i.month}),e.jsxs("td",{className:"text-end",children:["$",i.revenue.toLocaleString()]}),e.jsx("td",{className:"text-end",children:i.deals})]},c))})]})})})]})})})]})}export{ue as default};
//# sourceMappingURL=GerenciaDashboard-Bsu7YEqk.js.map
