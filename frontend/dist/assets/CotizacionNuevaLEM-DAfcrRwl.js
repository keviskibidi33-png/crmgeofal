import{r as i,j as e}from"./index-DwZw-JFj.js";import{M as $}from"./ModuloBase-CvVreALB.js";import{l as X}from"./quoteVariants-BNSlHpot.js";import{c as Y,a as K}from"./quotes-DpNrPCOS.js";import{l as Q,c as H}from"./projects-CXFvgs-w.js";function J({value:u,onChange:l}){const[m,j]=i.useState([]),[v,y]=i.useState(!1),[t,N]=i.useState({company_id:"",project_name:"",location:""}),[x,g]=i.useState("");i.useEffect(()=>{(async()=>{try{y(!0);const n=await Q({page:1,limit:50}),h=Array.isArray(n==null?void 0:n.data)?n.data:n;j(h||[])}catch{g("No se pudo cargar empresas")}finally{y(!1)}})()},[]);const s=i.useMemo(()=>m.find(n=>String(n.id)===String(t.company_id)),[m,t.company_id]);i.useEffect(()=>{typeof l=="function"&&l({company_id:t.company_id?Number(t.company_id):null,company:s||null,project_name:t.project_name,location:t.location})},[t,s,l]);const E=async()=>{if(!(!t.company_id||!t.project_name))try{const n={company_id:Number(t.company_id),name:t.project_name,location:t.location},h=await H(n);typeof l=="function"&&l({...u,project_id:h.id,project:h})}catch(n){g(n.message||"No se pudo crear proyecto")}};return e.jsxs("div",{className:"border rounded p-3",children:[e.jsx("h6",{children:"Cliente y Proyecto"}),x&&e.jsx("div",{className:"alert alert-warning py-1 my-2",children:x}),e.jsxs("div",{className:"row g-2 align-items-end",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Cliente"}),e.jsxs("select",{className:"form-select",value:t.company_id,disabled:v,onChange:n=>N({...t,company_id:n.target.value}),children:[e.jsx("option",{value:"",children:"Seleccione..."}),m.map(n=>e.jsxs("option",{value:n.id,children:[n.name," ",n.ruc?`(RUC ${n.ruc})`:""]},n.id))]})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Nombre del proyecto"}),e.jsx("input",{className:"form-control",value:t.project_name,onChange:n=>N({...t,project_name:n.target.value}),placeholder:"Ej. Control de calidad de mezclas"})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"Ubicación"}),e.jsx("input",{className:"form-control",value:t.location,onChange:n=>N({...t,location:n.target.value})})]}),e.jsx("div",{className:"col-md-1 d-grid",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:E,disabled:!t.company_id||!t.project_name,children:"Crear"})})]}),s&&e.jsxs("div",{className:"small text-muted mt-2",children:["Contacto: ",s.contact_name," · Tel: ",s.phone," · Email: ",s.email]})]})}const W={company_name:"",ruc:"",contact_name:"",contact_phone:"",contact_email:"",project_location:"",project_name:"",service_name:""},Z={request_date:"",issue_date:"",commercial_name:"",payment_terms:"adelantado",acceptance:!1,reference:"",igv:!0},z={code:"",description:"",norm:"",unit_price:0,quantity:1};function S(u){const l=Number(u.unit_price||0),m=Number(u.quantity||0);return Number((l*m).toFixed(2))}function k(u="xxx-XX",l=""){const m=(l||"").toUpperCase().trim()||"NOMBRE DEL CLIENTE";return`Cotización ${u} LEM-GEOFAL-${m}`}const b=(u="")=>(u||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().trim(),_={[b("MUESTRA DE SUELO Y AGREGADO")]:`CONDICIONES ESPECÍFICAS:
- El cliente deberá enviar al laboratorio, para los ensayo en suelo y agregados, la cantidad minima de 100 kg por cada muestra.
- El cliente deberá de entregar las muestras debidamente identificadas.
- El cliente deberá especificar la Norma a ser utilizada para la ejecución del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.
- El cliente deberá entregar las muestras en las instalaciones del LEM, ubicado en la Av. Marañón N° 763, Los Olivos, Lima.`,[b("PROBETAS")]:`CONDICIONES ESPECÍFICAS:
- El cliente debe proporcionar las probetas antes del ingreso a obra.
- El cliente deberá de entregar las muestras debidamente identificadas.
- El cliente deberá especificar la Norma a ser utilizada para la ejecución del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.
- El cliente deberá entregar las muestras en las instalaciones del LEM, ubicado en la Av. Marañón N° 763, Los Olivos, Lima.`,[b("DENSIDAD DE CAMPO Y MUESTREO")]:`CONDICIONES ESPECÍFICAS:
- El cliente deberá enviar al laboratorio, para los ensayo en suelo y agregados, la cantidad minima de 100 kg por cada muestra.
- Para el ensayo de Densidad de campo, la cantidad de puntos/salida minimo 4 und.
- El cliente deberá de programar el servicio, Densidad de campo, con 24 horas de anticipación.
- El cliente deberá especificar la Norma a ser utilizada para la ejecución del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.
- El cliente deberá entregar las muestras en las instalaciones del LEM, ubicado en la Av. Marañón N° 763, Los Olivos, Lima.`,[b("EXTRACCIÓN DE DIAMANTINA")]:`CONDICIONES ESPECÍFICAS:
- Movilización y desmovilización de equipos y del personal técnico, estara a cargo de GEOFAL.
- Resane de estructura de concreto con sika rep 500 y Sikadur 32, estara a cargo de GEOFAL.
- El servicio no incluye trabajos de acabados como pintura, mayolica y otros.
- El area de trabajo, zona de extracción de diamantina, tiene que estar libre de interferencia.
- La extracción de diamantina se realizara en 2 dia en campo, en laboratorio se realizará el tallado y refrentado de diamantina, el ensayo de resistencia a la compresión de testigo de diamantina se realizara en 5 dias (el tiempo de ensayo obedece a la normativa vigente).
- Costo de resane insumos 250 soles, este costo se distribuira de acuerdo con el numero de perforaciones Donde se hara las extracciones de diamantina`,[b("EXTRACCION DE DIAMANTINA")]:`CONDICIONES ESPECÍFICAS:
- Movilización y desmovilización de equipos y del personal técnico, estara a cargo de GEOFAL.
- Resane de estructura de concreto con sika rep 500 y Sikadur 32, estara a cargo de GEOFAL.
- El servicio no incluye trabajos de acabados como pintura, mayolica y otros.
- El area de trabajo, zona de extracción de diamantina, tiene que estar libre de interferencia.
- La extracción de diamantina se realizara en 2 dia en campo, en laboratorio se realizará el tallado y refrentado de diamantina, el ensayo de resistencia a la compresión de testigo de diamantina se realizara en 5 dias (el tiempo de ensayo obedece a la normativa vigente).
- Costo de resane insumos 250 soles, este costo se distribuira de acuerdo con el numero de perforaciones Donde se hara las extracciones de diamantina`,[b("DIAMANTINA PARA PASES")]:`CONDICIONES ESPECÍFICAS:
- El cliente deberá de programar el servicio, Extracción diamantina, con 24 horas de anticipación.
- El area de trabajo, zona de extraccion de diamantina, debera estar libre de interferencia.
- Para extraer la diamantina, se ubicara el acero con un escaneador.
- Movilizacion y desmovilizacion de equipos y del personal tecnico, estara a cargo de Geofal.`,[b("ALBAÑILERÍA")]:`CONDICIONES ESPECÍFICAS:
- El cliente deberá enviar al laboratorio, 20 ladrillo de cada tipo, en buen estado y sin presentar fisuras.
- El cliente deberá de entregar las muestras debidamente identificadas.
- El cliente deberá especificar la Norma a ser utilizada para la ejecución del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.
- El cliente deberá entregar las muestras en las instalaciones del LEM, ubicado en la Av. Marañón N° 763, Los Olivos, Lima`,[b("ALBANILERIA")]:`CONDICIONES ESPECÍFICAS:
- El cliente deberá enviar al laboratorio, 20 ladrillo de cada tipo, en buen estado y sin presentar fisuras.
- El cliente deberá de entregar las muestras debidamente identificadas.
- El cliente deberá especificar la Norma a ser utilizada para la ejecución del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.
- El cliente deberá entregar las muestras en las instalaciones del LEM, ubicado en la Av. Marañón N° 763, Los Olivos, Lima`,[b("VIGA BECKELMAN")]:`CONDICIONES ESPECÍFICAS:
- El cliente deberá de programar el servicio, Ensayo de Deflexión, con 24 horas de anticipación.
- El area de trabajo tiene que estar habilitado.
- El cliente deberá especificar la Norma a ser utilizada para la ejecución del ensayo, caso contrario se considera Norma ASTM o NTP o MTC vigente de acuerdo con el alcance del laboratorio.
- Especificar las caracteristicas del camion`,[b("CONTROL DE CALIDAD DE CONCRETO FRESCO EN OBRA")]:`CONDICIONES ESPECÍFICAS:
- El cliente deberá de programar el servicio, con 24 horas de anticipación.
- Para el ensayo de control de calidad de concreto fresco en obra, se moldeara 6 probetas, ensayo slump, control de temperatura, en laboratorio las probetas se colocara en camara de curado, el ensayo de compresión de las probetas seran 3 a 7 dias y 3 a 28 dias.
- El control de calidad del concreto fresco se sacara cada 50m3 a uno de los mixer donde se hara todos los ensayos respectivos mencionados, o por dia asi no se halla llegado los 50m3.
- El cliente deberá especificar la Norma a ser utilizada para la ejecución del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.`,[b("CONTROL DE CALIDAD DE CONCRETO FRESCO")]:`CONDICIONES ESPECÍFICAS:
- El cliente deberá de programar el servicio, con 24 horas de anticipación.
- Para el ensayo de control de calidad de concreto fresco en obra, se moldeara 6 probetas, ensayo slump, control de temperatura, en laboratorio las probetas se colocara en camara de curado, el ensayo de compresión de las probetas seran 3 a 7 dias y 3 a 28 dias.
- El control de calidad del concreto fresco se sacara cada 50m3 a uno de los mixer donde se hara todos los ensayos respectivos mencionados, o por dia asi no se halla llegado los 50m3.
- El cliente deberá especificar la Norma a ser utilizada para la ejecución del ensayo, caso contrario se considera Norma ASTM o NTP vigente de acuerdo con el alcance del laboratorio.`},d=u=>{const l=b((u==null?void 0:u.title)||"");if(_[l])return _[l];const m=Object.entries(_).find(([j])=>l.includes(j)||j.includes(l));return m?m[1]:""},re=()=>{var F;const[u,l]=i.useState([]),[m,j]=i.useState(""),[v,y]=i.useState(!1),[t,N]=i.useState(W),[x,g]=i.useState({company_id:null,project_id:null,company:null,project:null}),[s,E]=i.useState(Z),[n,h]=i.useState([{...z}]),[O,I]=i.useState(!1),[D,T]=i.useState(""),[R,L]=i.useState("");i.useEffect(()=>{(async()=>{try{const o=await X({active:!0})||[];if(o.length>0){l(o);return}const r=[{id:"V1",code:"V1",title:"MUESTRA DE SUELO Y AGREGADO",description:d({title:"MUESTRA DE SUELO Y AGREGADO"})},{id:"V2",code:"V2",title:"PROBETAS",description:d({title:"PROBETAS"})},{id:"V3",code:"V3",title:"DENSIDAD DE CAMPO Y MUESTREO",description:d({title:"DENSIDAD DE CAMPO Y MUESTREO"})},{id:"V4",code:"V4",title:"EXTRACCIÓN DE DIAMANTINA",description:d({title:"EXTRACCIÓN DE DIAMANTINA"})},{id:"V5",code:"V5",title:"DIAMANTINA PARA PASES",description:d({title:"DIAMANTINA PARA PASES"})},{id:"V6",code:"V6",title:"ALBAÑILERÍA",description:d({title:"ALBAÑILERÍA"})},{id:"V7",code:"V7",title:"VIGA BECKELMAN",description:d({title:"VIGA BECKELMAN"})},{id:"V8",code:"V8",title:"CONTROL DE CALIDAD DE CONCRETO FRESCO EN OBRA",description:d({title:"CONTROL DE CALIDAD DE CONCRETO FRESCO EN OBRA"})}];l(r)}catch{const o=[{id:"V1",code:"V1",title:"MUESTRA DE SUELO Y AGREGADO",description:d({title:"MUESTRA DE SUELO Y AGREGADO"})},{id:"V2",code:"V2",title:"PROBETAS",description:d({title:"PROBETAS"})},{id:"V3",code:"V3",title:"DENSIDAD DE CAMPO Y MUESTREO",description:d({title:"DENSIDAD DE CAMPO Y MUESTREO"})},{id:"V4",code:"V4",title:"EXTRACCIÓN DE DIAMANTINA",description:d({title:"EXTRACCIÓN DE DIAMANTINA"})},{id:"V5",code:"V5",title:"DIAMANTINA PARA PASES",description:d({title:"DIAMANTINA PARA PASES"})},{id:"V6",code:"V6",title:"ALBAÑILERÍA",description:d({title:"ALBAÑILERÍA"})},{id:"V7",code:"V7",title:"VIGA BECKELMAN",description:d({title:"VIGA BECKELMAN"})},{id:"V8",code:"V8",title:"CONTROL DE CALIDAD DE CONCRETO FRESCO EN OBRA",description:d({title:"CONTROL DE CALIDAD DE CONCRETO FRESCO EN OBRA"})}];l(o)}})()},[]);const A=i.useMemo(()=>n.reduce((a,o)=>a+S(o),0),[n]),f=i.useMemo(()=>s.igv?Number((A*.18).toFixed(2)):0,[A,s.igv]),M=i.useMemo(()=>Number((A+f).toFixed(2)),[A,f]),G=()=>h([...n,{...z}]),w=a=>h(n.filter((o,r)=>r!==a)),C=(a,o)=>h(n.map((r,c)=>c===a?{...r,...o}:r));i.useEffect(()=>{if(!m)return;const a=(u||[]).find(c=>String(c.id)===String(m));if(!a)return;const o=a.conditions||{};E(c=>({...c,payment_terms:o.default_payment_terms||c.payment_terms,acceptance:typeof o.default_acceptance=="boolean"?o.default_acceptance:c.acceptance,igv:typeof o.default_igv=="boolean"?o.default_igv:c.igv,reference:o.default_reference||c.reference}));const r=d(a)||a.description||"";if(r&&L(r),Array.isArray(o.default_items)&&n.length<=1&&!n[0].code&&!n[0].description&&!n[0].norm){const c=o.default_items.map(p=>({code:p.code||"",description:p.description||"",norm:p.norm||"",unit_price:Number(p.unit_price||0),quantity:Number(p.quantity||1)}));c.length&&h(c)}o.default_service_name&&!t.service_name&&N(c=>({...c,service_name:o.default_service_name}))},[m]);const q=async a=>{var o;a.preventDefault(),I(!0),T("");try{const r={project_id:((o=x.project)==null?void 0:o.id)||x.project_id||null,variant_id:m||null,client_contact:t.contact_name,client_email:t.contact_email,client_phone:t.contact_phone,issue_date:s.issue_date||new Date().toISOString().slice(0,10),subtotal:A,igv:f,total:M,status:"borrador",meta:{customer:t,quote:s,conditions_text:R,payment_terms:s.payment_terms,acceptance:s.acceptance,reference:s.reference,subtotal:A,igv:f,file_name:k("xxx-XX",t.company_name)}},c=await Y(r);for(const p of n)await K({quote_id:c.id,code:p.code,description:p.description,norm:p.norm,unit_price:Number(p.unit_price||0),quantity:Number(p.quantity||0),partial_price:S(p)});alert("Cotización creada"),B(c.id)}catch(r){T(r.message||"Error al crear cotización")}finally{I(!1)}},[P,B]=i.useState(null),V=async a=>{try{const o=P;if(!o)return alert("Guarde la cotización antes de exportar");const r="http://localhost:4000/api".replace(/\/$/,"")||"",c=`/api/quotes/${o}/export/${a}`,p=r&&/\/api$/i.test(r)?`${r}${c.replace(/^\/api/,"")}`:`${r}${c}`;window.open(p,"_blank")}catch{alert("No se pudo exportar")}},U=async()=>{try{const a=P;if(!a)return alert("Guarde la cotización antes de generar el borrador");const o="http://localhost:4000/api".replace(/\/$/,"")||"",r=`/api/quotes/${a}/export/pdf-draft`,c=o&&/\/api$/i.test(o)?`${o}${r.replace(/^\/api/,"")}`:`${o}${r}`;window.open(c,"_blank")}catch{alert("No se pudo generar el borrador")}};return e.jsxs($,{titulo:"Nueva Cotización LEM",descripcion:"Plantilla de cotización para Laboratorio con variantes y condiciones",children:[D&&e.jsx("div",{className:"alert alert-danger",children:D}),e.jsxs("form",{onSubmit:q,children:[e.jsx(J,{value:x,onChange:g}),e.jsxs("div",{className:"row g-3 mt-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{children:"Datos del Cliente"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Empresa"}),e.jsx("input",{className:"form-control",value:t.company_name,onChange:a=>N({...t,company_name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"R.U.C."}),e.jsx("input",{className:"form-control",value:t.ruc,onChange:a=>N({...t,ruc:a.target.value})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Contacto"}),e.jsx("input",{className:"form-control",value:t.contact_name,onChange:a=>N({...t,contact_name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Teléfono"}),e.jsx("input",{className:"form-control",value:t.contact_phone,onChange:a=>N({...t,contact_phone:a.target.value})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Correo"}),e.jsx("input",{type:"email",className:"form-control",value:t.contact_email,onChange:a=>N({...t,contact_email:a.target.value})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Ubicación del proyecto"}),e.jsx("input",{className:"form-control",value:t.project_location,onChange:a=>N({...t,project_location:a.target.value})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Nombre del proyecto"}),e.jsx("input",{className:"form-control",value:t.project_name,onChange:a=>N({...t,project_name:a.target.value})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Nombre del servicio"}),e.jsx("input",{className:"form-control",value:t.service_name,onChange:a=>N({...t,service_name:a.target.value})})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{children:"Datos de la Cotización"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Fecha de Solicitud"}),e.jsx("input",{type:"date",className:"form-control",value:s.request_date,onChange:a=>E({...s,request_date:a.target.value})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Fecha de Emisión"}),e.jsx("input",{type:"date",className:"form-control",value:s.issue_date,onChange:a=>E({...s,issue_date:a.target.value})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Comercial"}),e.jsx("input",{className:"form-control",value:s.commercial_name,onChange:a=>E({...s,commercial_name:a.target.value})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Referencia"}),e.jsx("input",{className:"form-control",placeholder:"SEGÚN LO SOLICITADO VÍA correo / llamada",value:s.reference,onChange:a=>E({...s,reference:a.target.value})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("label",{className:"form-label mb-0",children:"Variante"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>y(!v),children:v?"Ver como lista":"Ver como cards"})]}),v?e.jsx("div",{className:"row row-cols-2 row-cols-md-3 g-2 mt-1",children:(u||[]).map(a=>{const o=d(a)||a.description||"";return e.jsx("div",{className:"col",children:e.jsx("div",{className:`card h-100 ${String(m)===String(a.id)?"border-primary":""}`,role:"button",onClick:()=>j(String(a.id)),children:e.jsxs("div",{className:"card-body py-2",children:[e.jsx("div",{className:"fw-semibold small",children:a.code}),e.jsx("div",{className:"small",children:a.title}),o?e.jsx("div",{className:"text-muted small mt-1",style:{whiteSpace:"pre-line",maxHeight:"8.5em",overflowY:"auto"},children:o}):null]})})},a.id)})}):e.jsxs("select",{className:"form-select mt-2",value:m,onChange:a=>j(a.target.value),children:[e.jsx("option",{value:"",children:"Sin variante"}),(u||[]).map(a=>e.jsxs("option",{value:a.id,children:[a.code," - ",a.title]},a.id))]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Forma de pago"}),e.jsxs("select",{className:"form-select",value:s.payment_terms,onChange:a=>E({...s,payment_terms:a.target.value}),children:[e.jsx("option",{value:"adelantado",children:"Adelantado"}),e.jsx("option",{value:"50%",children:"Adelanto 50% y saldo previo al informe"}),e.jsx("option",{value:"credito7",children:"Crédito 7 días con OS"}),e.jsx("option",{value:"credito15",children:"Crédito 15 días con OS"}),e.jsx("option",{value:"credito30",children:"Crédito 30 días con OS"})]})]}),e.jsxs("div",{className:"form-check mb-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"igv",checked:s.igv,onChange:a=>E({...s,igv:a.target.checked})}),e.jsx("label",{className:"form-check-label",htmlFor:"igv",children:"Aplicar IGV 18%"})]}),e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"acceptance",checked:s.acceptance,onChange:a=>E({...s,acceptance:a.target.checked})}),e.jsx("label",{className:"form-check-label",htmlFor:"acceptance",children:"Aceptación de cotización"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Condiciones específicas"}),e.jsx("textarea",{className:"form-control",rows:6,placeholder:"Aquí aparecerán las condiciones de la variante seleccionada; puedes editarlas si es necesario.",value:R,onChange:a=>L(a.target.value)})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"form-label",children:"Nombre de archivo sugerido"}),e.jsx("input",{className:"form-control",value:k("xxx-XX",t.company_name),readOnly:!0})]})]})]}),e.jsx("h5",{className:"mt-3",children:"Ítems"}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Código/N° ensayo"}),e.jsx("th",{children:"Descripción"}),e.jsx("th",{children:"Norma"}),e.jsx("th",{children:"Unitario (S/)"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Parcial (S/)"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:n.map((a,o)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{className:"form-control",value:a.code,onChange:r=>C(o,{code:r.target.value})})}),e.jsx("td",{children:e.jsx("textarea",{className:"form-control",rows:1,value:a.description,onChange:r=>C(o,{description:r.target.value})})}),e.jsx("td",{children:e.jsx("input",{className:"form-control",value:a.norm,onChange:r=>C(o,{norm:r.target.value})})}),e.jsx("td",{style:{width:120},children:e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:a.unit_price,onChange:r=>C(o,{unit_price:r.target.value})})}),e.jsx("td",{style:{width:100},children:e.jsx("input",{type:"number",className:"form-control",value:a.quantity,onChange:r=>C(o,{quantity:r.target.value})})}),e.jsx("td",{style:{width:120},children:S(a)}),e.jsx("td",{style:{width:80},children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>w(o),disabled:n.length===1,children:"-"})})]},o))})]})}),e.jsx("div",{className:"mb-3",children:e.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:G,children:"Agregar ítem"})}),e.jsxs("div",{className:"d-flex justify-content-end align-items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"text-end",children:[e.jsxs("div",{children:["Subtotal: S/ ",A.toFixed(2)]}),e.jsxs("div",{children:["IGV 18%: S/ ",f.toFixed(2)]}),e.jsx("div",{children:e.jsxs("strong",{children:["Total: S/ ",M.toFixed(2)]})})]}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:O||!((F=x.project)!=null&&F.id)&&!x.project_id,children:O?"Guardando...":"Guardar borrador"}),e.jsx("button",{type:"button",className:"btn btn-outline-warning",onClick:U,children:"Guardar PDF Borrador"}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>V("pdf"),children:"Exportar PDF"}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>V("excel"),children:"Exportar Excel"})]})]})]})};export{re as default};
//# sourceMappingURL=CotizacionNuevaLEM-DAfcrRwl.js.map
