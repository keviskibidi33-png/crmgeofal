import{r as l,j as s,B as F,K,V as X}from"./index-xQVByYRi.js";/* empty css                     */import{M as h}from"./Modal-BPoSYaBi.js";import{F as t}from"./Form-BAZkilfb.js";import{R as $}from"./Row-mPOlevGM.js";import{C as A}from"./Col-Dz9zKzWQ.js";import{S as J}from"./Spinner-C2jXaFYJ.js";const _=({show:b,onHide:g,title:k,data:S={},fields:d=[],onSubmit:w,loading:C=!1,size:B="lg",submitText:E="Guardar",cancelText:G="Cancelar",validation:p={},className:q=""})=>{const[c,v]=l.useState({}),[m,x]=l.useState({}),[I,y]=l.useState({}),[N,L]=l.useState({}),[M,i]=l.useState({});l.useEffect(()=>{b&&(v(S),x({}),y({}))},[b,S]);const u=(e,a)=>{v(o=>({...o,[e]:a})),m[e]&&x(o=>({...o,[e]:null}));const r=d.find(o=>o.name===e);if(r&&r.autocomplete&&r.suggestions&&a.length>0){const o=r.suggestions.filter(n=>n.toLowerCase().includes(a.toLowerCase()));L(n=>({...n,[e]:o.slice(0,5)})),i(n=>({...n,[e]:!0}))}else i(o=>({...o,[e]:!1}))},j=e=>{if(y(a=>({...a,[e]:!0})),setTimeout(()=>{i(a=>({...a,[e]:!1}))},200),p[e]){const a=p[e](c[e],c);a&&x(r=>({...r,[e]:a}))}},T=(e,a)=>{v(r=>({...r,[e]:a})),i(r=>({...r,[e]:!1}))},z=()=>{const e={};let a=!0;return d.forEach(r=>{if(r.required&&(!c[r.name]||c[r.name]===""))e[r.name]=`${r.label} es requerido`,a=!1;else if(p[r.name]){const o=p[r.name](c[r.name],c);o&&(e[r.name]=o,a=!1)}}),x(e),a},D=async e=>{if(e.preventDefault(),z())try{await w(c),g()}catch(a){console.error("Error submitting form:",a)}},R=e=>{var o;const a=I[e.name]&&m[e.name],r=c[e.name]||"";switch(e.type){case"text":case"email":case"password":return s.jsxs(t.Group,{className:"mb-3 position-relative",children:[s.jsxs(t.Label,{children:[e.label,e.required&&s.jsx("span",{className:"text-danger ms-1",children:"*"})]}),s.jsx(t.Control,{type:e.type,name:e.name,value:r,onChange:n=>u(e.name,n.target.value),onBlur:()=>j(e.name),isInvalid:a,placeholder:e.placeholder,disabled:e.disabled}),a&&s.jsx(t.Control.Feedback,{type:"invalid",children:m[e.name]}),e.help&&s.jsx(t.Text,{className:"text-muted",children:e.help}),e.autocomplete&&M[e.name]&&N[e.name]&&N[e.name].length>0&&s.jsx("div",{className:"autocomplete-suggestions position-absolute w-100",style:{zIndex:1e3,top:"100%"},children:s.jsx("div",{className:"list-group",children:N[e.name].map((n,V)=>s.jsx("button",{type:"button",className:"list-group-item list-group-item-action",onClick:()=>T(e.name,n),style:{fontSize:"0.875rem",padding:"0.5rem 0.75rem"},children:n},V))})})]},e.name);case"textarea":return s.jsxs(t.Group,{className:"mb-3",children:[s.jsxs(t.Label,{children:[e.label,e.required&&s.jsx("span",{className:"text-danger ms-1",children:"*"})]}),s.jsx(t.Control,{as:"textarea",rows:e.rows||3,name:e.name,value:r,onChange:n=>u(e.name,n.target.value),onBlur:()=>j(e.name),isInvalid:a,placeholder:e.placeholder}),a&&s.jsx(t.Control.Feedback,{type:"invalid",children:m[e.name]})]},e.name);case"select":return s.jsxs(t.Group,{className:"mb-3",children:[s.jsxs(t.Label,{children:[e.label,e.required&&s.jsx("span",{className:"text-danger ms-1",children:"*"})]}),s.jsxs(t.Select,{name:e.name,value:r,onChange:n=>u(e.name,n.target.value),onBlur:()=>j(e.name),isInvalid:a,children:[s.jsx("option",{value:"",children:"Seleccionar..."}),(o=e.options)==null?void 0:o.map(n=>s.jsx("option",{value:n.value,children:n.label},n.value))]}),a&&s.jsx(t.Control.Feedback,{type:"invalid",children:m[e.name]})]},e.name);case"number":return s.jsxs(t.Group,{className:"mb-3",children:[s.jsxs(t.Label,{children:[e.label,e.required&&s.jsx("span",{className:"text-danger ms-1",children:"*"})]}),s.jsx(t.Control,{type:"number",name:e.name,value:r,onChange:n=>u(e.name,parseFloat(n.target.value)||""),onBlur:()=>j(e.name),isInvalid:a,placeholder:e.placeholder,min:e.min,max:e.max,step:e.step}),a&&s.jsx(t.Control.Feedback,{type:"invalid",children:m[e.name]})]},e.name);case"checkbox":return s.jsx(t.Group,{className:"mb-3",children:s.jsx(t.Check,{type:"checkbox",name:e.name,checked:!!r,onChange:n=>u(e.name,n.target.checked),label:e.label})},e.name);case"custom":return s.jsx("div",{className:"mb-3",children:e.render&&e.render(c)},e.name);default:return null}};return s.jsxs(h,{show:b,onHide:g,size:B,className:q,children:[s.jsx(h.Header,{closeButton:!0,className:"border-0 pb-0",children:s.jsx(h.Title,{className:"fw-bold",children:k})}),s.jsxs(t,{onSubmit:D,children:[s.jsx(h.Body,{className:"pt-0",children:s.jsx($,{children:d.map(e=>s.jsx(A,{md:e.col||12,children:R(e)},e.name))})}),s.jsxs(h.Footer,{className:"border-0 pt-0",children:[s.jsxs(F,{variant:"outline-secondary",onClick:g,disabled:C,children:[s.jsx(K,{className:"me-1"}),G]}),s.jsx(F,{type:"submit",variant:"primary",disabled:C,children:C?s.jsxs(s.Fragment,{children:[s.jsx(J,{size:"sm",className:"me-1"}),"Guardando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(X,{className:"me-1"}),E]})})]})]})]})};export{_ as M};
//# sourceMappingURL=ModalForm-DneapZfs.js.map
