{"version":3,"file":"tickets-D4kLk3Yp.js","sources":["../../src/services/tickets.js"],"sourcesContent":["import { apiFetch } from './api';\r\n\r\nexport const listTickets = (params = {}) => {\r\n  const qs = new URLSearchParams(params).toString();\r\n  const path = qs ? `/api/tickets?${qs}` : '/api/tickets';\r\n  return apiFetch(path);\r\n};\r\n\r\nexport const getTicket = (id) => apiFetch(`/api/tickets/${id}`);\r\n\r\nexport const createTicket = async ({ title, description, priority, file }) => {\r\n  // multipart form for optional attachment under field name 'attachment'\r\n  const form = new FormData();\r\n  if (title) form.append('title', title);\r\n  if (description) form.append('description', description);\r\n  if (priority) form.append('priority', priority);\r\n  if (file) form.append('attachment', file);\r\n  return apiFetch('/api/tickets', {\r\n    method: 'POST',\r\n    body: form,\r\n    headers: { 'Content-Type': undefined },\r\n  });\r\n};\r\n\r\nexport const updateTicketStatus = (id, status) =>\r\n  apiFetch(`/api/tickets/${id}/status`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify({ status }),\r\n  });\r\n\r\nexport const listTicketHistory = (ticket_id, params = {}) => {\r\n  const sp = new URLSearchParams();\r\n  if (params.page) sp.set('page', params.page);\r\n  if (params.limit) sp.set('limit', params.limit);\r\n  const qs = sp.toString();\r\n  const path = qs ? `/api/tickets/${ticket_id}/history?${qs}` : `/api/tickets/${ticket_id}/history`;\r\n  return apiFetch(path);\r\n};\r\n\r\nexport const listTicketHistoryGlobal = (params = {}) => {\r\n  const sp = new URLSearchParams();\r\n  if (params.page) sp.set('page', params.page);\r\n  if (params.limit) sp.set('limit', params.limit);\r\n  if (params.q) sp.set('q', params.q);\r\n  if (params.action) sp.set('action', params.action);\r\n  if (params.range) sp.set('range', params.range);\r\n  const qs = sp.toString();\r\n  return apiFetch('/api/tickets/history/global' + (qs ? `?${qs}` : ''));\r\n};\r\n\r\nexport default { listTickets, getTicket, createTicket, updateTicketStatus, listTicketHistory, listTicketHistoryGlobal };\r\n"],"names":["listTickets","params","qs","path","apiFetch","createTicket","title","description","priority","file","form","updateTicketStatus","id","status","listTicketHistory","ticket_id","sp","listTicketHistoryGlobal"],"mappings":"wCAEY,MAACA,EAAc,CAACC,EAAS,KAAO,CAC1C,MAAMC,EAAK,IAAI,gBAAgBD,CAAM,EAAE,SAAQ,EACzCE,EAAOD,EAAK,gBAAgBA,CAAE,GAAK,eACzC,OAAOE,EAASD,CAAI,CACtB,EAIaE,EAAe,MAAO,CAAE,MAAAC,EAAO,YAAAC,EAAa,SAAAC,EAAU,KAAAC,CAAI,IAAO,CAE5E,MAAMC,EAAO,IAAI,SACjB,OAAIJ,GAAOI,EAAK,OAAO,QAASJ,CAAK,EACjCC,GAAaG,EAAK,OAAO,cAAeH,CAAW,EACnDC,GAAUE,EAAK,OAAO,WAAYF,CAAQ,EAC1CC,GAAMC,EAAK,OAAO,aAAcD,CAAI,EACjCL,EAAS,eAAgB,CAC9B,OAAQ,OACR,KAAMM,EACN,QAAS,CAAE,eAAgB,MAAS,CACxC,CAAG,CACH,EAEaC,EAAqB,CAACC,EAAIC,IACrCT,EAAS,gBAAgBQ,CAAE,UAAW,CACpC,OAAQ,MACR,KAAM,KAAK,UAAU,CAAE,OAAAC,CAAM,CAAE,CACnC,CAAG,EAEUC,EAAoB,CAACC,EAAWd,EAAS,KAAO,CAC3D,MAAMe,EAAK,IAAI,gBACXf,EAAO,MAAMe,EAAG,IAAI,OAAQf,EAAO,IAAI,EACvCA,EAAO,OAAOe,EAAG,IAAI,QAASf,EAAO,KAAK,EAC9C,MAAMC,EAAKc,EAAG,WACRb,EAAOD,EAAK,gBAAgBa,CAAS,YAAYb,CAAE,GAAK,gBAAgBa,CAAS,WACvF,OAAOX,EAASD,CAAI,CACtB,EAEac,EAA0B,CAAChB,EAAS,KAAO,CACtD,MAAMe,EAAK,IAAI,gBACXf,EAAO,MAAMe,EAAG,IAAI,OAAQf,EAAO,IAAI,EACvCA,EAAO,OAAOe,EAAG,IAAI,QAASf,EAAO,KAAK,EAC1CA,EAAO,GAAGe,EAAG,IAAI,IAAKf,EAAO,CAAC,EAC9BA,EAAO,QAAQe,EAAG,IAAI,SAAUf,EAAO,MAAM,EAC7CA,EAAO,OAAOe,EAAG,IAAI,QAASf,EAAO,KAAK,EAC9C,MAAMC,EAAKc,EAAG,WACd,OAAOZ,EAAS,+BAAiCF,EAAK,IAAIA,CAAE,GAAK,GAAG,CACtE"}