{"version":3,"file":"Notificaciones-BbOV6I9N.js","sources":["../../src/pages/Notificaciones.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { Container, Row, Col, Card, Badge, Button, Alert, Spinner, Modal } from 'react-bootstrap';\r\nimport { FiBell, FiCheck, FiX, FiEye, FiTrash2, FiExternalLink } from 'react-icons/fi';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getNotifications, markNotificationAsRead, markAllNotificationsAsRead, deleteNotification } from '../services/notifications';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nconst Notificaciones = () => {\r\n  const { user } = useAuth();\r\n  const queryClient = useQueryClient();\r\n  const navigate = useNavigate();\r\n  const [selectedNotification, setSelectedNotification] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  // Obtener todas las notificaciones\r\n  const { data: notifications, isLoading, error } = useQuery(\r\n    ['notifications-all', user?.id],\r\n    () => getNotifications({ limit: 50, unreadOnly: false }),\r\n    {\r\n      enabled: !!user,\r\n      refetchInterval: 30000, // Refrescar cada 30 segundos\r\n    }\r\n  );\r\n\r\n  // Mutaci√≥n para marcar como le√≠da\r\n  const markAsReadMutation = useMutation(markNotificationAsRead, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['notifications-all']);\r\n      queryClient.invalidateQueries(['notifications']);\r\n      queryClient.invalidateQueries(['notificationStats']);\r\n    }\r\n  });\r\n\r\n  // Mutaci√≥n para marcar todas como le√≠das\r\n  const markAllAsReadMutation = useMutation(markAllNotificationsAsRead, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['notifications-all']);\r\n      queryClient.invalidateQueries(['notifications']);\r\n      queryClient.invalidateQueries(['notificationStats']);\r\n    }\r\n  });\r\n\r\n  // Mutaci√≥n para eliminar notificaci√≥n\r\n  const deleteMutation = useMutation(deleteNotification, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['notifications-all']);\r\n      queryClient.invalidateQueries(['notifications']);\r\n      queryClient.invalidateQueries(['notificationStats']);\r\n    }\r\n  });\r\n\r\n  const handleMarkAsRead = (notificationId) => {\r\n    markAsReadMutation.mutate(notificationId);\r\n  };\r\n\r\n  const handleMarkAllAsRead = () => {\r\n    markAllAsReadMutation.mutate();\r\n  };\r\n\r\n  const handleDelete = (notificationId) => {\r\n    if (window.confirm('¬øEst√°s seguro de que quieres eliminar esta notificaci√≥n?')) {\r\n      deleteMutation.mutate(notificationId);\r\n    }\r\n  };\r\n\r\n  const handleViewNotification = (notification) => {\r\n    setSelectedNotification(notification);\r\n    setShowModal(true);\r\n    \r\n    // Marcar como le√≠da si no lo est√°\r\n    if (!notification.read_at) {\r\n      handleMarkAsRead(notification.id);\r\n    }\r\n  };\r\n\r\n  const handleGoToProject = (notification) => {\r\n    // Cerrar el modal primero\r\n    setShowModal(false);\r\n    \r\n    // Navegar al proyecto espec√≠fico\r\n    if (notification.type === 'project_assignment' && notification.data) {\r\n      const data = typeof notification.data === 'string' ? JSON.parse(notification.data) : notification.data;\r\n      if (data.project_id) {\r\n        navigate(`/proyectos?view=${data.project_id}`);\r\n      } else {\r\n        navigate('/proyectos');\r\n      }\r\n    } else {\r\n      navigate('/proyectos');\r\n    }\r\n  };\r\n\r\n  const getNotificationIcon = (type) => {\r\n    const icons = {\r\n      payment_proof_uploaded: 'üí∞',\r\n      payment_proof_approved: '‚úÖ',\r\n      payment_proof_rejected: '‚ùå',\r\n      quote_created: 'üìÑ',\r\n      quote_approved: '‚úÖ',\r\n      quote_rejected: '‚ùå',\r\n      project_created: 'üèóÔ∏è',\r\n      project_updated: 'üîÑ',\r\n      project_assignment: 'üéØ',\r\n      ticket_created: 'üé´',\r\n      ticket_updated: 'üîÑ',\r\n      system_update: 'üÜï'\r\n    };\r\n    return icons[type] || 'üîî';\r\n  };\r\n\r\n  const getNotificationColor = (type) => {\r\n    const colors = {\r\n      payment_proof_uploaded: 'primary',\r\n      payment_proof_approved: 'success',\r\n      payment_proof_rejected: 'danger',\r\n      quote_created: 'info',\r\n      quote_approved: 'success',\r\n      quote_rejected: 'danger',\r\n      project_created: 'primary',\r\n      project_updated: 'info',\r\n      project_assignment: 'warning',\r\n      ticket_created: 'warning',\r\n      ticket_updated: 'info',\r\n      system_update: 'secondary'\r\n    };\r\n    return colors[type] || 'secondary';\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffInMinutes = Math.floor((now - date) / (1000 * 60));\r\n    \r\n    if (diffInMinutes < 1) return 'Ahora';\r\n    if (diffInMinutes < 60) return `Hace ${diffInMinutes} min`;\r\n    \r\n    const diffInHours = Math.floor(diffInMinutes / 60);\r\n    if (diffInHours < 24) return `Hace ${diffInHours} h`;\r\n    \r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n    if (diffInDays < 7) return `Hace ${diffInDays} d√≠as`;\r\n    \r\n    return date.toLocaleDateString('es-ES', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Container className=\"py-4\">\r\n        <div className=\"text-center\">\r\n          <Spinner animation=\"border\" />\r\n          <p className=\"mt-2\">Cargando notificaciones...</p>\r\n        </div>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Container className=\"py-4\">\r\n        <Alert variant=\"danger\">\r\n          Error al cargar las notificaciones: {error.message}\r\n        </Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  const unreadCount = notifications?.filter(n => !n.read_at).length || 0;\r\n\r\n  return (\r\n    <Container className=\"py-4\">\r\n      <Row>\r\n        <Col>\r\n          <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n            <h2 className=\"mb-0\">\r\n              <FiBell className=\"me-2\" />\r\n              Notificaciones\r\n            </h2>\r\n            <div className=\"d-flex gap-2\">\r\n              {unreadCount > 0 && (\r\n                <Button\r\n                  variant=\"outline-primary\"\r\n                  size=\"sm\"\r\n                  onClick={handleMarkAllAsRead}\r\n                  disabled={markAllAsReadMutation.isLoading}\r\n                >\r\n                  <FiCheck className=\"me-1\" />\r\n                  Marcar todas como le√≠das\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {notifications?.length === 0 ? (\r\n            <Card>\r\n              <Card.Body className=\"text-center py-5\">\r\n                <FiBell size={48} className=\"text-muted mb-3\" />\r\n                <h5 className=\"text-muted\">No hay notificaciones</h5>\r\n                <p className=\"text-muted\">Cuando recibas notificaciones, aparecer√°n aqu√≠.</p>\r\n              </Card.Body>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"notification-list\">\r\n              {notifications?.map((notification) => (\r\n                <Card \r\n                  key={notification.id} \r\n                  className={`mb-3 ${!notification.read_at ? 'border-primary' : ''}`}\r\n                >\r\n                  <Card.Body>\r\n                    <div className=\"d-flex align-items-start\">\r\n                      <div className=\"me-3\">\r\n                        <span className=\"fs-4\">{getNotificationIcon(notification.type)}</span>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex-grow-1\">\r\n                        <div className=\"d-flex justify-content-between align-items-start mb-2\">\r\n                          <div>\r\n                            <h6 className=\"mb-1\">\r\n                              {notification.title}\r\n                              {!notification.read_at && (\r\n                                <Badge bg=\"primary\" className=\"ms-2\">Nueva</Badge>\r\n                              )}\r\n                            </h6>\r\n                            <p className=\"text-muted mb-2\">{notification.message}</p>\r\n                          </div>\r\n                          \r\n                          <div className=\"text-end\">\r\n                            <small className=\"text-muted\">\r\n                              {formatDate(notification.created_at)}\r\n                            </small>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <div className=\"d-flex gap-2\">\r\n                          <Button\r\n                            variant=\"outline-primary\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleViewNotification(notification)}\r\n                          >\r\n                            <FiEye className=\"me-1\" />\r\n                            Ver detalles\r\n                          </Button>\r\n                          \r\n                          {!notification.read_at && (\r\n                            <Button\r\n                              variant=\"outline-success\"\r\n                              size=\"sm\"\r\n                              onClick={() => handleMarkAsRead(notification.id)}\r\n                              disabled={markAsReadMutation.isLoading}\r\n                            >\r\n                              <FiCheck className=\"me-1\" />\r\n                              Marcar como le√≠da\r\n                            </Button>\r\n                          )}\r\n                          \r\n                          <Button\r\n                            variant=\"outline-danger\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleDelete(notification.id)}\r\n                            disabled={deleteMutation.isLoading}\r\n                          >\r\n                            <FiTrash2 className=\"me-1\" />\r\n                            Eliminar\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </Card.Body>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Modal para ver detalles de la notificaci√≥n - COMPACTO */}\r\n      <Modal show={showModal} onHide={() => setShowModal(false)} size=\"md\" centered>\r\n        <Modal.Header closeButton className=\"bg-primary text-white\">\r\n          <Modal.Title className=\"fw-bold\">\r\n            {selectedNotification && getNotificationIcon(selectedNotification.type)} \r\n            {selectedNotification?.title}\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"p-3\">\r\n          {selectedNotification && (\r\n            <div>\r\n              <div className=\"alert alert-info mb-3\">\r\n                <strong>üìù Mensaje:</strong>\r\n                <p className=\"mb-0 mt-2\">{selectedNotification.message}</p>\r\n              </div>\r\n              \r\n              <div className=\"row g-2\">\r\n                <div className=\"col-6\">\r\n                  <div className=\"bg-light p-2 rounded\">\r\n                    <small className=\"text-muted\">Tipo</small>\r\n                    <div className=\"fw-bold\">{selectedNotification.type}</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                  <div className=\"bg-light p-2 rounded\">\r\n                    <small className=\"text-muted\">Prioridad</small>\r\n                    <div className=\"fw-bold\">\r\n                      <Badge bg={selectedNotification.priority === 'high' ? 'danger' : 'secondary'}>\r\n                        {selectedNotification.priority}\r\n                      </Badge>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                  <div className=\"bg-light p-2 rounded\">\r\n                    <small className=\"text-muted\">Fecha</small>\r\n                    <div className=\"fw-bold\" style={{ fontSize: '12px' }}>\r\n                      {new Date(selectedNotification.created_at).toLocaleString('es-ES')}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                  <div className=\"bg-light p-2 rounded\">\r\n                    <small className=\"text-muted\">Estado</small>\r\n                    <div className=\"fw-bold\">\r\n                      <Badge bg={selectedNotification.read_at ? 'success' : 'warning'}>\r\n                        {selectedNotification.read_at ? 'Le√≠da' : 'No le√≠da'}\r\n                      </Badge>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              {selectedNotification.data && (\r\n                <div className=\"mt-3\">\r\n                  <small className=\"text-muted\">Datos adicionales:</small>\r\n                  <div className=\"bg-light p-2 rounded mt-1\" style={{ fontSize: '11px', maxHeight: '100px', overflowY: 'auto' }}>\r\n                    <pre className=\"mb-0\">{JSON.stringify(selectedNotification.data, null, 2)}</pre>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer className=\"p-2\">\r\n          <div className=\"d-flex gap-2 w-100\">\r\n            {selectedNotification?.type === 'project_assignment' && (\r\n              <Button \r\n                variant=\"primary\" \r\n                onClick={() => handleGoToProject(selectedNotification)} \r\n                size=\"sm\"\r\n                className=\"flex-grow-1\"\r\n                style={{ backgroundColor: '#f84616', borderColor: '#f84616' }}\r\n              >\r\n                <FiExternalLink className=\"me-1\" />\r\n                üéØ Ver Proyecto\r\n              </Button>\r\n            )}\r\n            <Button \r\n              variant=\"primary\" \r\n              onClick={() => setShowModal(false)} \r\n              size=\"sm\"\r\n              className={selectedNotification?.type === 'project_assignment' ? '' : 'w-100'}\r\n            >\r\n              ‚úÖ Entendido\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Notificaciones;\r\n"],"names":["Notificaciones","user","useAuth","queryClient","useQueryClient","navigate","useNavigate","selectedNotification","setSelectedNotification","useState","showModal","setShowModal","notifications","isLoading","error","useQuery","getNotifications","markAsReadMutation","useMutation","markNotificationAsRead","markAllAsReadMutation","markAllNotificationsAsRead","deleteMutation","deleteNotification","handleMarkAsRead","notificationId","handleMarkAllAsRead","handleDelete","handleViewNotification","notification","handleGoToProject","data","getNotificationIcon","type","formatDate","dateString","date","diffInMinutes","diffInHours","diffInDays","Container","jsxs","jsx","Spinner","Alert","unreadCount","n","Row","Col","FiBell","Button","FiCheck","Card","Badge","FiEye","FiTrash2","Modal","FiExternalLink"],"mappings":"yZAQA,MAAMA,GAAiB,IAAM,CAC3B,KAAM,CAAE,KAAAC,CAAA,EAASC,EAAA,EACXC,EAAcC,EAAA,EACdC,EAAWC,EAAA,EACX,CAACC,EAAsBC,CAAuB,EAAIC,EAAAA,SAAS,IAAI,EAC/D,CAACC,EAAWC,CAAY,EAAIF,EAAAA,SAAS,EAAK,EAG1C,CAAE,KAAMG,EAAe,UAAAC,EAAW,MAAAC,GAAUC,EAChD,CAAC,oBAAqBd,GAAA,YAAAA,EAAM,EAAE,EAC9B,IAAMe,EAAiB,CAAE,MAAO,GAAI,WAAY,GAAO,EACvD,CACE,QAAS,CAAC,CAACf,EACX,gBAAiB,GAAA,CACnB,EAIIgB,EAAqBC,EAAYC,EAAwB,CAC7D,UAAW,IAAM,CACfhB,EAAY,kBAAkB,CAAC,mBAAmB,CAAC,EACnDA,EAAY,kBAAkB,CAAC,eAAe,CAAC,EAC/CA,EAAY,kBAAkB,CAAC,mBAAmB,CAAC,CACrD,CAAA,CACD,EAGKiB,EAAwBF,EAAYG,EAA4B,CACpE,UAAW,IAAM,CACflB,EAAY,kBAAkB,CAAC,mBAAmB,CAAC,EACnDA,EAAY,kBAAkB,CAAC,eAAe,CAAC,EAC/CA,EAAY,kBAAkB,CAAC,mBAAmB,CAAC,CACrD,CAAA,CACD,EAGKmB,EAAiBJ,EAAYK,EAAoB,CACrD,UAAW,IAAM,CACfpB,EAAY,kBAAkB,CAAC,mBAAmB,CAAC,EACnDA,EAAY,kBAAkB,CAAC,eAAe,CAAC,EAC/CA,EAAY,kBAAkB,CAAC,mBAAmB,CAAC,CACrD,CAAA,CACD,EAEKqB,EAAoBC,GAAmB,CAC3CR,EAAmB,OAAOQ,CAAc,CAC1C,EAEMC,EAAsB,IAAM,CAChCN,EAAsB,OAAA,CACxB,EAEMO,EAAgBF,GAAmB,CACnC,OAAO,QAAQ,0DAA0D,GAC3EH,EAAe,OAAOG,CAAc,CAExC,EAEMG,EAA0BC,GAAiB,CAC/CrB,EAAwBqB,CAAY,EACpClB,EAAa,EAAI,EAGZkB,EAAa,SAChBL,EAAiBK,EAAa,EAAE,CAEpC,EAEMC,EAAqBD,GAAiB,CAK1C,GAHAlB,EAAa,EAAK,EAGdkB,EAAa,OAAS,sBAAwBA,EAAa,KAAM,CACnE,MAAME,EAAO,OAAOF,EAAa,MAAS,SAAW,KAAK,MAAMA,EAAa,IAAI,EAAIA,EAAa,KAC9FE,EAAK,WACP1B,EAAS,mBAAmB0B,EAAK,UAAU,EAAE,EAE7C1B,EAAS,YAAY,CAEzB,MACEA,EAAS,YAAY,CAEzB,EAEM2B,EAAuBC,IACb,CACZ,uBAAwB,KACxB,uBAAwB,IACxB,uBAAwB,IACxB,cAAe,KACf,eAAgB,IAChB,eAAgB,IAChB,gBAAiB,MACjB,gBAAiB,KACjB,mBAAoB,KACpB,eAAgB,KAChB,eAAgB,KAChB,cAAe,IAAA,GAEJA,CAAI,GAAK,KAqBlBC,EAAcC,GAAe,CACjC,MAAMC,EAAO,IAAI,KAAKD,CAAU,EAE1BE,EAAgB,KAAK,WADX,KACwBD,IAAS,IAAO,GAAG,EAE3D,GAAIC,EAAgB,EAAG,MAAO,QAC9B,GAAIA,EAAgB,GAAI,MAAO,QAAQA,CAAa,OAEpD,MAAMC,EAAc,KAAK,MAAMD,EAAgB,EAAE,EACjD,GAAIC,EAAc,GAAI,MAAO,QAAQA,CAAW,KAEhD,MAAMC,EAAa,KAAK,MAAMD,EAAc,EAAE,EAC9C,OAAIC,EAAa,EAAU,QAAQA,CAAU,QAEtCH,EAAK,mBAAmB,QAAS,CACtC,IAAK,UACL,MAAO,UACP,KAAM,UACN,KAAM,UACN,OAAQ,SAAA,CACT,CACH,EAEA,GAAIvB,EACF,aACG2B,EAAA,CAAU,UAAU,OACnB,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAQ,UAAU,QAAA,CAAS,EAC5BD,EAAAA,IAAC,IAAA,CAAE,UAAU,OAAO,SAAA,4BAAA,CAA0B,CAAA,CAAA,CAChD,CAAA,CACF,EAIJ,GAAI5B,EACF,aACG0B,EAAA,CAAU,UAAU,OACnB,SAAAC,EAAAA,KAACG,EAAA,CAAM,QAAQ,SAAS,SAAA,CAAA,uCACe9B,EAAM,OAAA,CAAA,CAC7C,CAAA,CACF,EAIJ,MAAM+B,GAAcjC,GAAA,YAAAA,EAAe,OAAOkC,GAAK,CAACA,EAAE,SAAS,SAAU,EAErE,OACEL,EAAAA,KAACD,EAAA,CAAU,UAAU,OACnB,SAAA,CAAAE,EAAAA,IAACK,EAAA,CACC,gBAACC,EAAA,CACC,SAAA,CAAAP,EAAAA,KAAC,MAAA,CAAI,UAAU,yDACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,OACZ,SAAA,CAAAC,EAAAA,IAACO,EAAA,CAAO,UAAU,MAAA,CAAO,EAAE,gBAAA,EAE7B,EACAP,EAAAA,IAAC,MAAA,CAAI,UAAU,eACZ,WAAc,GACbD,EAAAA,KAACS,EAAA,CACC,QAAQ,kBACR,KAAK,KACL,QAASxB,EACT,SAAUN,EAAsB,UAEhC,SAAA,CAAAsB,EAAAA,IAACS,EAAA,CAAQ,UAAU,MAAA,CAAO,EAAE,0BAAA,CAAA,CAAA,CAE9B,CAEJ,CAAA,EACF,GAECvC,GAAA,YAAAA,EAAe,UAAW,EACzB8B,EAAAA,IAACU,EAAA,CACC,gBAACA,EAAK,KAAL,CAAU,UAAU,mBACnB,SAAA,CAAAV,EAAAA,IAACO,EAAA,CAAO,KAAM,GAAI,UAAU,kBAAkB,EAC9CP,EAAAA,IAAC,KAAA,CAAG,UAAU,aAAa,SAAA,wBAAqB,EAChDA,EAAAA,IAAC,IAAA,CAAE,UAAU,aAAa,SAAA,iDAAA,CAA+C,CAAA,CAAA,CAC3E,CAAA,CACF,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,oBACZ,SAAA9B,GAAA,YAAAA,EAAe,IAAKiB,GACnBa,EAAAA,IAACU,EAAA,CAEC,UAAW,QAASvB,EAAa,QAA6B,GAAnB,gBAAqB,GAEhE,eAACuB,EAAK,KAAL,CACC,SAAAX,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAQ,SAAAV,EAAoBH,EAAa,IAAI,CAAA,CAAE,EACjE,EAEAY,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wDACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,OACX,SAAA,CAAAZ,EAAa,MACb,CAACA,EAAa,SACba,EAAAA,IAACW,GAAM,GAAG,UAAU,UAAU,OAAO,SAAA,OAAA,CAAK,CAAA,EAE9C,EACAX,EAAAA,IAAC,IAAA,CAAE,UAAU,kBAAmB,WAAa,OAAA,CAAQ,CAAA,EACvD,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,WACb,SAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,aACd,SAAAR,EAAWL,EAAa,UAAU,CAAA,CACrC,CAAA,CACF,CAAA,EACF,EAEAY,EAAAA,KAAC,MAAA,CAAI,UAAU,eACb,SAAA,CAAAA,EAAAA,KAACS,EAAA,CACC,QAAQ,kBACR,KAAK,KACL,QAAS,IAAMtB,EAAuBC,CAAY,EAElD,SAAA,CAAAa,EAAAA,IAACY,EAAA,CAAM,UAAU,MAAA,CAAO,EAAE,cAAA,CAAA,CAAA,EAI3B,CAACzB,EAAa,SACbY,EAAAA,KAACS,EAAA,CACC,QAAQ,kBACR,KAAK,KACL,QAAS,IAAM1B,EAAiBK,EAAa,EAAE,EAC/C,SAAUZ,EAAmB,UAE7B,SAAA,CAAAyB,EAAAA,IAACS,EAAA,CAAQ,UAAU,MAAA,CAAO,EAAE,mBAAA,CAAA,CAAA,EAKhCV,EAAAA,KAACS,EAAA,CACC,QAAQ,iBACR,KAAK,KACL,QAAS,IAAMvB,EAAaE,EAAa,EAAE,EAC3C,SAAUP,EAAe,UAEzB,SAAA,CAAAoB,EAAAA,IAACa,EAAA,CAAS,UAAU,MAAA,CAAO,EAAE,UAAA,CAAA,CAAA,CAE/B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EA9DK1B,EAAa,EAAA,EAgErB,CACH,CAAA,CAAA,CAEJ,CAAA,CACF,EAGAY,EAAAA,KAACe,EAAA,CAAM,KAAM9C,EAAW,OAAQ,IAAMC,EAAa,EAAK,EAAG,KAAK,KAAK,SAAQ,GAC3E,SAAA,CAAA+B,EAAAA,IAACc,EAAM,OAAN,CAAa,YAAW,GAAC,UAAU,wBAClC,SAAAf,EAAAA,KAACe,EAAM,MAAN,CAAY,UAAU,UACpB,SAAA,CAAAjD,GAAwByB,EAAoBzB,EAAqB,IAAI,EACrEA,GAAA,YAAAA,EAAsB,KAAA,CAAA,CACzB,CAAA,CACF,EACAmC,EAAAA,IAACc,EAAM,KAAN,CAAW,UAAU,MACnB,SAAAjD,UACE,MAAA,CACC,SAAA,CAAAkC,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,UAAO,SAAA,aAAA,CAAW,EACnBA,EAAAA,IAAC,IAAA,CAAE,UAAU,YAAa,WAAqB,OAAA,CAAQ,CAAA,EACzD,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,UACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,QACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,aAAa,SAAA,OAAI,EAClCA,EAAAA,IAAC,MAAA,CAAI,UAAU,UAAW,WAAqB,IAAA,CAAK,CAAA,CAAA,CACtD,CAAA,CACF,QACC,MAAA,CAAI,UAAU,QACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,aAAa,SAAA,YAAS,EACvCA,EAAAA,IAAC,MAAA,CAAI,UAAU,UACb,eAACW,EAAA,CAAM,GAAI9C,EAAqB,WAAa,OAAS,SAAW,YAC9D,SAAAA,EAAqB,SACxB,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QACC,MAAA,CAAI,UAAU,QACb,SAAAkC,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,aAAa,SAAA,QAAK,QAClC,MAAA,CAAI,UAAU,UAAU,MAAO,CAAE,SAAU,MAAA,EACzC,SAAA,IAAI,KAAKnC,EAAqB,UAAU,EAAE,eAAe,OAAO,CAAA,CACnE,CAAA,CAAA,CACF,CAAA,CACF,QACC,MAAA,CAAI,UAAU,QACb,SAAAkC,EAAAA,KAAC,MAAA,CAAI,UAAU,uBACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,aAAa,SAAA,SAAM,EACpCA,MAAC,MAAA,CAAI,UAAU,UACb,eAACW,EAAA,CAAM,GAAI9C,EAAqB,QAAU,UAAY,UACnD,SAAAA,EAAqB,QAAU,QAAU,WAC5C,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAECA,EAAqB,MACpBkC,OAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,aAAa,SAAA,qBAAkB,EAChDA,EAAAA,IAAC,MAAA,CAAI,UAAU,4BAA4B,MAAO,CAAE,SAAU,OAAQ,UAAW,QAAS,UAAW,MAAA,EACnG,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,OAAQ,SAAA,KAAK,UAAUnC,EAAqB,KAAM,KAAM,CAAC,CAAA,CAAE,CAAA,CAC5E,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAEJ,EACAmC,EAAAA,IAACc,EAAM,OAAN,CAAa,UAAU,MACtB,SAAAf,EAAAA,KAAC,MAAA,CAAI,UAAU,qBACZ,SAAA,EAAAlC,GAAA,YAAAA,EAAsB,QAAS,sBAC9BkC,EAAAA,KAACS,EAAA,CACC,QAAQ,UACR,QAAS,IAAMpB,EAAkBvB,CAAoB,EACrD,KAAK,KACL,UAAU,cACV,MAAO,CAAE,gBAAiB,UAAW,YAAa,SAAA,EAElD,SAAA,CAAAmC,EAAAA,IAACe,EAAA,CAAe,UAAU,MAAA,CAAO,EAAE,iBAAA,CAAA,CAAA,EAIvCf,EAAAA,IAACQ,EAAA,CACC,QAAQ,UACR,QAAS,IAAMvC,EAAa,EAAK,EACjC,KAAK,KACL,WAAWJ,GAAA,YAAAA,EAAsB,QAAS,qBAAuB,GAAK,QACvE,SAAA,aAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}