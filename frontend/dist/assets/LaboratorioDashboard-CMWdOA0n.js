import{r as n,b as v,j as e,l as u,f as p,V as E,N as g,ak as S}from"./index-CDayYYh0.js";import{P as C}from"./PageHeader-TwGN4X1N.js";import{S as l}from"./StatsCard-CwkDyVPe.js";import{C as d,R as t}from"./Row-CeY1UBxE.js";import{S as P}from"./Spinner-BFSKMpy4.js";import{A as R}from"./Alert-pvqi0VvY.js";import{C as r}from"./Col-Bcdl2XMD.js";import{C as i}from"./Card-DxGUdTXm.js";function $(){var x,j,b;const[s,N]=n.useState(null),[y,o]=n.useState(!0),[h,m]=n.useState(null);n.useEffect(()=>{f()},[]);const f=async()=>{try{o(!0),m(null);const a=await v("/api/role-dashboard/laboratorio");N(a)}catch(a){console.error("Error fetching dashboard data:",a),m("Error al cargar los datos del dashboard")}finally{o(!1)}};return y?e.jsx(d,{fluid:!0,className:"p-4",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:e.jsx(P,{animation:"border",size:"lg"})})}):h?e.jsx(d,{fluid:!0,className:"p-4",children:e.jsx(R,{variant:"danger",children:h})}):e.jsxs(d,{fluid:!0,className:"p-4",children:[e.jsx(C,{title:"Dashboard Laboratorio",subtitle:"Proyectos, evidencias y envíos de laboratorio",icon:u}),e.jsxs(t,{className:"mb-4",children:[e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Proyectos Asignados",value:(s==null?void 0:s.proyectosAsignados)||0,icon:u,color:"primary",subtitle:`${(s==null?void 0:s.proyectosEnProceso)||0} en proceso`})}),e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Proyectos Completados",value:(s==null?void 0:s.proyectosCompletados)||0,icon:p,color:"success",subtitle:"Proyectos finalizados"})}),e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Evidencias Subidas",value:(s==null?void 0:s.evidenciasSubidas)||0,icon:E,color:"info",subtitle:`${(s==null?void 0:s.evidenciasEsteMes)||0} este mes`})}),e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Proyectos Nuevos",value:(s==null?void 0:s.proyectosNuevosEsteMes)||0,icon:g,color:"warning",subtitle:"Este mes"})})]}),e.jsxs(t,{className:"mb-4",children:[e.jsx(r,{lg:4,md:6,className:"mb-3",children:e.jsx(l,{title:"Envíos Recibidos",value:(s==null?void 0:s.enviosRecibidos)||0,icon:S,color:"primary",subtitle:"Muestras recibidas"})}),e.jsx(r,{lg:4,md:6,className:"mb-3",children:e.jsx(l,{title:"En Proceso",value:(s==null?void 0:s.enviosEnProceso)||0,icon:g,color:"warning",subtitle:"En análisis"})}),e.jsx(r,{lg:4,md:6,className:"mb-3",children:e.jsx(l,{title:"Completados",value:(s==null?void 0:s.enviosCompletados)||0,icon:p,color:"success",subtitle:"Análisis finalizados"})})]}),e.jsxs(t,{className:"mb-4",children:[e.jsx(r,{lg:6,children:e.jsxs(i,{className:"shadow-sm",children:[e.jsx(i.Header,{children:e.jsx("h5",{className:"mb-0",children:"Proyectos Recientes"})}),e.jsx(i.Body,{children:((x=s==null?void 0:s.proyectosRecientes)==null?void 0:x.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Proyecto"}),e.jsx("th",{children:"Empresa"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Creado por"})]})}),e.jsx("tbody",{children:s.proyectosRecientes.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:a.company_name}),e.jsx("td",{children:e.jsx("span",{className:`badge ${a.status==="activo"?"bg-success":a.status==="completado"?"bg-primary":a.status==="pendiente"?"bg-warning":"bg-secondary"}`,children:a.status})}),e.jsx("td",{children:new Date(a.created_at).toLocaleDateString()}),e.jsx("td",{children:a.created_by_name})]},c))})]})}):e.jsx("p",{className:"text-muted",children:"No hay proyectos recientes"})})]})}),e.jsx(r,{lg:6,children:e.jsxs(i,{className:"shadow-sm",children:[e.jsx(i.Header,{children:e.jsx("h5",{className:"mb-0",children:"Evidencias Recientes"})}),e.jsx(i.Body,{children:((j=s==null?void 0:s.evidenciasRecientes)==null?void 0:j.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Proyecto"}),e.jsx("th",{children:"Notas"}),e.jsx("th",{children:"Subido por"}),e.jsx("th",{children:"Fecha"})]})}),e.jsx("tbody",{children:s.evidenciasRecientes.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:a.project_name}),e.jsx("td",{children:e.jsx("span",{className:"text-truncate d-inline-block",style:{maxWidth:"150px"},children:a.notes||"Sin notas"})}),e.jsx("td",{children:a.uploaded_by_name}),e.jsx("td",{children:new Date(a.created_at).toLocaleDateString()})]},c))})]})}):e.jsx("p",{className:"text-muted",children:"No hay evidencias recientes"})})]})})]}),((b=s==null?void 0:s.enviosRecientes)==null?void 0:b.length)>0&&e.jsx(t,{children:e.jsx(r,{children:e.jsxs(i,{className:"shadow-sm",children:[e.jsx(i.Header,{children:e.jsx("h5",{className:"mb-0",children:"Envíos Recientes"})}),e.jsx(i.Body,{children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Número de Seguimiento"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Enviado por"}),e.jsx("th",{children:"Fecha"})]})}),e.jsx("tbody",{children:s.enviosRecientes.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:a.tracking_number}),e.jsx("td",{children:e.jsx("span",{className:`badge ${a.status==="completado"?"bg-success":a.status==="en_proceso"?"bg-warning":a.status==="recibido"?"bg-info":"bg-secondary"}`,children:a.status})}),e.jsx("td",{children:a.sender_name}),e.jsx("td",{children:new Date(a.created_at).toLocaleDateString()})]},c))})]})})})]})})})]})}export{$ as default};
//# sourceMappingURL=LaboratorioDashboard-CMWdOA0n.js.map
