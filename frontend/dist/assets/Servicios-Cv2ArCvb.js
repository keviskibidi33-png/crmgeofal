import{b as H,r as p,e as C,j as e,n as L,a7 as Q,$ as N,B as x,Q as w,a8 as v,p as n,a9 as P,F as R,T as W}from"./index-D5j7Etbr.js";import{P as K}from"./PageHeader-BAMnoJ00.js";import{l as V}from"./services-C2Sl43A8.js";import{A as $}from"./Alert-5CgP0oJh.js";import{T as Z,a as E}from"./Tabs-cr3oJGkP.js";import{a as t,R as B,C as d}from"./Row-BbCd5WYq.js";import{F as a,I as b}from"./InputGroup-CuAl69_P.js";import{S as k}from"./Spinner-DkvOZ9XA.js";import"./ElementChildren-BZ8oKQvH.js";const M=async(i={})=>{const c=new URLSearchParams;return i.serviceId&&c.append("serviceId",i.serviceId),i.area&&c.append("area",i.area),i.q&&c.append("q",i.q),i.page&&c.append("page",i.page),i.limit&&c.append("limit",i.limit),await H(`/subservices?${c.toString()}`)};function ne(){const[i,c]=p.useState(""),[r,f]=p.useState("all"),[l,g]=p.useState("all"),[G,Y]=p.useState("modules"),{data:J,isLoading:X}=C(["services"],()=>V(),{keepPreviousData:!0}),{data:o,isLoading:q}=C(["subservices","laboratorio",i,r,l],()=>{const s={area:"laboratorio",limit:1e3};return i&&(s.q=i),M(s)},{keepPreviousData:!0}),{data:h,isLoading:z}=C(["subservices","ingenieria",i,r,l],()=>{const s={area:"ingenieria",limit:1e3};return i&&(s.q=i),M(s)},{keepPreviousData:!0}),F=s=>{if(s==null||s==="")return"Sujeto a evaluaci√≥n";const j=typeof s=="string"?parseFloat(s):Number(s);return isNaN(j)||j===0?"Sujeto a evaluaci√≥n":`S/ ${j.toFixed(2)}`},I=s=>s==null||s===""||s==="-"?"Sin norma espec√≠fica":s,m=s=>s.startsWith("SU")?"ENSAYO EST√ÅNDAR":s.startsWith("AG")?"ENSAYO AGREGADO":s.startsWith("C")||s.startsWith("CO")||s.startsWith("DIS")||s.startsWith("COM")||s.startsWith("ABS")?"ENSAYO CONCRETO":s.startsWith("ALB")?"ENSAYO ALBA√ëILER√çA":s.startsWith("R")?"ENSAYO ROCA":s.startsWith("CEM")?"CEMENTO":s.startsWith("PAV")?"ENSAYO PAVIMENTO":s.startsWith("AS")?"ENSAYO ASFALTO":s.startsWith("MA")?"ENSAYO MEZCLA ASF√ÅLTICO":s.startsWith("E")?"EVALUACIONES ESTRUCTURALES":s.startsWith("IMP")?"IMPLEMENTACI√ìN LABORATORIO":s.startsWith("SER")?"OTROS SERVICIOS":"OTROS",S=(o==null?void 0:o.subservices)||[],O=(o==null?void 0:o.total)||0,U=(h==null?void 0:h.subservices)||[],D=(h==null?void 0:h.total)||0;console.log("üîç Debug subservicios:",{total:O,received:S.length,data:o});const y=S.filter(s=>!(r==="fixed"&&s.precio===0||r==="evaluation"&&s.precio>0||l!=="all"&&m(s.codigo)!==l)),A=U.filter(s=>!(r==="fixed"&&s.precio===0||r==="evaluation"&&s.precio>0||l!=="all"&&m(s.codigo)!==l)),T=[...new Set(S.map(s=>m(s.codigo)))].sort(),u=()=>{c(""),f("all"),g("all")};return e.jsxs("div",{className:"fade-in",children:[e.jsx(K,{title:"Servicios",subtitle:"M√≥dulos fijos: Laboratorio e Ingenier√≠a",icon:L}),e.jsxs($,{variant:"info",className:"mb-4",children:[e.jsx(L,{className:"me-2"}),"Los servicios est√°n limitados a dos m√≥dulos fijos: ",e.jsx("strong",{children:"Laboratorio"})," e ",e.jsx("strong",{children:"Ingenier√≠a"}),". No se pueden crear proyectos adicionales."]}),e.jsxs(Z,{activeKey:G,onSelect:s=>Y(s),className:"mb-4",id:"servicios-tabs",children:[e.jsx(E,{eventKey:"modules",title:"M√≥dulos",children:e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card h-100 border-primary",children:[e.jsxs("div",{className:"card-header bg-primary text-white d-flex align-items-center",children:[e.jsx(L,{className:"me-2"}),e.jsx("h5",{className:"mb-0 text-dark",children:"Laboratorio"})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("p",{className:"text-muted mb-3",children:"Servicios especializados en an√°lisis, pruebas y ensayos de laboratorio para diversos materiales y muestras."}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-primary",children:"Servicios Principales:"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:"‚Ä¢ An√°lisis de Suelos"}),e.jsx("li",{children:"‚Ä¢ Ensayos de Materiales"}),e.jsx("li",{children:"‚Ä¢ Pruebas de Calidad"}),e.jsx("li",{children:"‚Ä¢ An√°lisis Qu√≠micos"})]})]})]})]})}),e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card h-100 border-success",children:[e.jsxs("div",{className:"card-header bg-success text-white d-flex align-items-center",children:[e.jsx(Q,{className:"me-2"}),e.jsx("h5",{className:"mb-0 text-dark",children:"Ingenier√≠a"})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("p",{className:"text-muted mb-3",children:"Servicios de consultor√≠a, dise√±o y desarrollo de proyectos de ingenier√≠a especializada."}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-success",children:"Servicios Principales:"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:"‚Ä¢ Dise√±o Estructural"}),e.jsx("li",{children:"‚Ä¢ Consultor√≠a T√©cnica"}),e.jsx("li",{children:"‚Ä¢ Proyectos de Ingenier√≠a"}),e.jsx("li",{children:"‚Ä¢ Evaluaciones T√©cnicas"})]})]})]})]})})]})}),e.jsxs(E,{eventKey:"subservices",title:"Subservicios Laboratorio",children:[e.jsxs(t,{className:"mb-4",children:[e.jsx(t.Header,{children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(N,{className:"me-2"}),"Buscar y Filtrar Subservicios de Laboratorio"]})}),e.jsx(t.Body,{children:e.jsxs(B,{children:[e.jsx(d,{md:4,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Buscar por c√≥digo o descripci√≥n:"}),e.jsxs(b,{children:[e.jsx(b.Text,{children:e.jsx(N,{})}),e.jsx(a.Control,{type:"text",placeholder:"Ej: SU04, humedad...",value:i,onChange:s=>c(s.target.value)})]})]})}),e.jsx(d,{md:3,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Filtrar por precio:"}),e.jsxs(a.Select,{value:r,onChange:s=>f(s.target.value),children:[e.jsx("option",{value:"all",children:"Todos los precios"}),e.jsx("option",{value:"fixed",children:"Precio fijo"}),e.jsx("option",{value:"evaluation",children:"Sujeto a evaluaci√≥n"})]})]})}),e.jsx(d,{md:3,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Filtrar por categor√≠a:"}),e.jsxs(a.Select,{value:l,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"all",children:"Todas las categor√≠as"}),T.map(s=>e.jsx("option",{value:s,children:s},s))]})]})}),e.jsx(d,{md:2,className:"d-flex align-items-end",children:e.jsxs(x,{variant:"outline-secondary",onClick:u,className:"w-100",children:[e.jsx(w,{className:"me-1"}),"Limpiar"]})})]})})]}),e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(v,{className:"me-2"}),"Subservicios del Laboratorio",e.jsxs(n,{bg:"info",className:"ms-2",children:[y.length," de ",O," subservicios"]})]})}),e.jsx(t.Body,{children:q?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(k,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Cargando subservicios..."})]}):y.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{width:"15%",children:"C√≥digo"}),e.jsx("th",{width:"40%",children:"Descripci√≥n"}),e.jsx("th",{width:"20%",children:"Secci√≥n"}),e.jsx("th",{width:"15%",children:"Precio"}),e.jsx("th",{width:"10%",children:"Acciones"})]})}),e.jsx("tbody",{children:y.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs(n,{bg:"primary",className:"fs-6",children:[e.jsx(P,{className:"me-1"}),s.codigo]})}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-bold text-dark mb-1",children:s.descripcion}),e.jsxs("small",{className:"text-muted",children:[e.jsx(R,{className:"me-1"}),I(s.norma)]})]}),e.jsx("td",{children:e.jsx(n,{bg:"info",className:"fs-6",children:m(s.codigo)})}),e.jsx("td",{children:e.jsxs(n,{bg:s.precio===0?"warning":"success",className:"fs-6",children:[e.jsx(W,{className:"me-1"}),F(s.precio)]})}),e.jsx("td",{children:e.jsx(x,{variant:"outline-primary",size:"sm",className:"w-100",children:"Seleccionar"})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(v,{size:48,className:"text-muted mb-3"}),e.jsx("h6",{className:"text-muted",children:"No hay subservicios disponibles"}),e.jsx("p",{className:"text-muted small",children:i||r!=="all"||l!=="all"?"No se encontraron subservicios con los filtros aplicados.":"Los subservicios del Laboratorio se cargar√°n pr√≥ximamente."}),(i||r!=="all"||l!=="all")&&e.jsx(x,{variant:"outline-primary",onClick:u,children:"Limpiar filtros"})]})})]})]}),e.jsxs(E,{eventKey:"ingenieria",title:"Subservicios Ingenier√≠a",children:[e.jsxs(t,{className:"mb-4",children:[e.jsx(t.Header,{children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(N,{className:"me-2"}),"Buscar y Filtrar Subservicios de Ingenier√≠a"]})}),e.jsx(t.Body,{children:e.jsxs(B,{children:[e.jsx(d,{md:4,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Buscar por c√≥digo o descripci√≥n:"}),e.jsxs(b,{children:[e.jsx(b.Text,{children:e.jsx(N,{})}),e.jsx(a.Control,{type:"text",placeholder:"Ej: ING01, dise√±o...",value:i,onChange:s=>c(s.target.value)})]})]})}),e.jsx(d,{md:3,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Filtrar por precio:"}),e.jsxs(a.Select,{value:r,onChange:s=>f(s.target.value),children:[e.jsx("option",{value:"all",children:"Todos los precios"}),e.jsx("option",{value:"fixed",children:"Precio fijo"}),e.jsx("option",{value:"evaluation",children:"Sujeto a evaluaci√≥n"})]})]})}),e.jsx(d,{md:3,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Filtrar por categor√≠a:"}),e.jsxs(a.Select,{value:l,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"all",children:"Todas las categor√≠as"}),T.map(s=>e.jsx("option",{value:s,children:s},s))]})]})}),e.jsx(d,{md:2,className:"d-flex align-items-end",children:e.jsxs(x,{variant:"outline-secondary",onClick:u,className:"w-100",children:[e.jsx(w,{className:"me-1"}),"Limpiar"]})})]})})]}),e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(v,{className:"me-2"}),"Subservicios de Ingenier√≠a",e.jsxs(n,{bg:"success",className:"ms-2",children:[A.length," de ",D," subservicios"]})]})}),e.jsx(t.Body,{children:z?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(k,{animation:"border",variant:"success"}),e.jsx("p",{className:"mt-2 text-muted",children:"Cargando subservicios de Ingenier√≠a..."})]}):A.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{width:"15%",children:"C√≥digo"}),e.jsx("th",{width:"40%",children:"Descripci√≥n"}),e.jsx("th",{width:"20%",children:"Secci√≥n"}),e.jsx("th",{width:"15%",children:"Precio"}),e.jsx("th",{width:"10%",children:"Acciones"})]})}),e.jsx("tbody",{children:A.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs(n,{bg:"success",className:"fs-6",children:[e.jsx(P,{className:"me-1"}),s.codigo]})}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-bold text-dark mb-1",children:s.descripcion}),e.jsxs("small",{className:"text-muted",children:[e.jsx(R,{className:"me-1"}),I(s.norma)]})]}),e.jsx("td",{children:e.jsx(n,{bg:"info",className:"fs-6",children:m(s.codigo)})}),e.jsx("td",{children:e.jsxs(n,{bg:s.precio===0?"warning":"success",className:"fs-6",children:[e.jsx(W,{className:"me-1"}),F(s.precio)]})}),e.jsx("td",{children:e.jsx(x,{variant:"outline-success",size:"sm",className:"w-100",children:"Seleccionar"})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(v,{size:48,className:"text-muted mb-3"}),e.jsx("h6",{className:"text-muted",children:"No hay subservicios de Ingenier√≠a disponibles"}),e.jsx("p",{className:"text-muted small",children:i||r!=="all"||l!=="all"?"No se encontraron subservicios con los filtros aplicados.":"Los subservicios de Ingenier√≠a se cargar√°n pr√≥ximamente."}),(i||r!=="all"||l!=="all")&&e.jsx(x,{variant:"outline-success",onClick:u,children:"Limpiar filtros"})]})})]})]})]})]})}export{ne as default};
//# sourceMappingURL=Servicios-Cv2ArCvb.js.map
