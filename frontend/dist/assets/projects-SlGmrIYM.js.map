{"version":3,"file":"projects-SlGmrIYM.js","sources":["../../src/services/projects.js"],"sourcesContent":["import { apiFetch } from './api';\r\n\r\nexport const listProjects = (params = {}) => {\r\n  const sp = new URLSearchParams();\r\n  if (params.page) sp.set('page', params.page);\r\n  if (params.limit) sp.set('limit', params.limit);\r\n  if (params.search) sp.set('search', params.search);\r\n  if (params.status) sp.set('status', params.status);\r\n  if (params.company_id) sp.set('company_id', params.company_id);\r\n  if (params.project_type) sp.set('project_type', params.project_type);\r\n  if (params.priority) sp.set('priority', params.priority);\r\n  if (params.q) sp.set('q', params.q);\r\n  const qs = sp.toString();\r\n  const path = qs ? `/api/projects?${qs}` : '/api/projects';\r\n  \r\n  console.log('üîç listProjects - Llamando a:', path);\r\n  console.log('üîç listProjects - Token:', localStorage.getItem('token') ? 'Presente' : 'Ausente');\r\n  \r\n  return apiFetch(path).then(data => {\r\n    console.log('‚úÖ listProjects - Respuesta recibida:', data);\r\n    return data;\r\n  }).catch(error => {\r\n    console.error('‚ùå listProjects - Error:', error);\r\n    throw error;\r\n  });\r\n};\r\n\r\nexport const createProject = (payload) =>\r\n  apiFetch('/api/projects', {\r\n    method: 'POST',\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\nexport const getProject = (id) => apiFetch(`/api/projects/${id}`);\r\n\r\nexport const updateProject = (id, payload) => {\r\n  console.log('üîç updateProject - ID:', id);\r\n  console.log('üîç updateProject - Payload:', payload);\r\n  console.log('üîç updateProject - URL:', `/api/projects/${id}`);\r\n  \r\n  return apiFetch(`/api/projects/${id}`, {\r\n    method: 'PATCH',\r\n    body: JSON.stringify(payload),\r\n  });\r\n};\r\n\r\nexport const updateProjectStatus = (id, payload) =>\r\n  apiFetch(`/api/projects/${id}/status`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\nexport const updateProjectCategories = (id, payload) => {\r\n  console.log('üîç updateProjectCategories - ID:', id);\r\n  console.log('üîç updateProjectCategories - Payload:', payload);\r\n  console.log('üîç updateProjectCategories - URL:', `/api/projects/${id}/categories`);\r\n  \r\n  return apiFetch(`/api/projects/${id}/categories`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(payload),\r\n  });\r\n};\r\n\r\nexport const updateProjectQueries = (id, payload) =>\r\n  apiFetch(`/api/projects/${id}/queries`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\nexport const updateProjectMark = (id, payload) =>\r\n  apiFetch(`/api/projects/${id}/mark`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(payload),\r\n  });\r\n\r\nexport const deleteProject = (id) =>\r\n  apiFetch(`/api/projects/${id}`, {\r\n    method: 'DELETE',\r\n  });\r\n\r\nexport const getProjectStats = () => {\r\n  console.log('üìä getProjectStats - Llamando a: /api/projects/stats');\r\n  const token = localStorage.getItem('token');\r\n  console.log('üìä getProjectStats - Token:', token ? 'Presente' : 'Ausente');\r\n  if (token) {\r\n    try {\r\n      const payload = JSON.parse(atob(token.split('.')[1]));\r\n      console.log('üìä getProjectStats - Usuario del token:', { id: payload.id, role: payload.role, name: payload.name });\r\n    } catch (e) {\r\n      console.log('üìä getProjectStats - Error decodificando token:', e.message);\r\n    }\r\n  }\r\n  \r\n  return apiFetch('/api/projects/stats').then(data => {\r\n    console.log('‚úÖ getProjectStats - Respuesta recibida:', data);\r\n    return data;\r\n  }).catch(error => {\r\n    console.error('‚ùå getProjectStats - Error:', error);\r\n    throw error;\r\n  });\r\n};\r\n\r\nexport const getExistingServices = () => {\r\n  console.log('üîç getExistingServices - Llamando a: /api/projects/services');\r\n  return apiFetch('/api/projects/services').then(data => {\r\n    console.log('‚úÖ getExistingServices - Respuesta recibida:', data);\r\n    return data;\r\n  }).catch(error => {\r\n    console.error('‚ùå getExistingServices - Error:', error);\r\n    throw error;\r\n  });\r\n};\r\n\r\nexport default { listProjects, createProject, getProject, updateProject, deleteProject, getProjectStats, getExistingServices };\r\n"],"names":["listProjects","params","sp","qs","path","apiFetch","data","error","createProject","payload","updateProject","id","updateProjectStatus","updateProjectCategories","updateProjectQueries","updateProjectMark","deleteProject","getProjectStats","token","e","getExistingServices"],"mappings":"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"}