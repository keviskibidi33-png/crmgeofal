{"version":3,"file":"Proyectos-lDR7WJ89.js","sources":["../../src/pages/Proyectos.jsx"],"sourcesContent":["import React, { useState, useMemo, useEffect } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { Button, Badge, Row, Col, Card, Container, Tabs, Tab, Toast, ToastContainer } from 'react-bootstrap';\r\nimport { FiPlus, FiEdit, FiTrash2, FiHome, FiMapPin, FiCalendar, FiUser, FiCheckCircle, FiClock, FiX, FiRefreshCw, FiFolder, FiMessageCircle, FiCheck, FiSettings, FiEye, FiUsers, FiDownload } from 'react-icons/fi';\r\nimport PageHeader from '../components/common/PageHeader';\r\nimport DataTable from '../components/common/DataTable';\r\nimport ModalForm from '../components/common/ModalForm';\r\nimport StatsCard from '../components/common/StatsCard';\r\nimport { listProjects, createProject, updateProject, deleteProject, getProjectStats, updateProjectStatus, updateProjectCategories, updateProjectQueries, updateProjectMark } from '../services/projects';\r\nimport { listCategories, listSubcategories } from '../services/categories';\r\nimport { listProjectAttachments, uploadAttachment, deleteAttachment, downloadFile } from '../services/attachments';\r\n\r\nconst emptyForm = { \r\n  company_id: '', \r\n  name: '', \r\n  location: '', \r\n  vendedor_id: '', \r\n  laboratorio_id: '', \r\n  requiere_laboratorio: false, \r\n  requiere_ingenieria: false, \r\n  requiere_consultoria: false,\r\n  requiere_capacitacion: false,\r\n  requiere_auditoria: false,\r\n  contact_name: '', \r\n  contact_phone: '', \r\n  contact_email: '',\r\n  queries: '',\r\n  priority: 'normal',\r\n  marked: false,\r\n  category_id: '',\r\n  subcategory_id: '',\r\n  category_name: '',\r\n  subcategory_name: ''\r\n};\r\n\r\nexport default function Proyectos() {\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingProject, setEditingProject] = useState(null);\r\n  const [deletingProject, setDeletingProject] = useState(null);\r\n  const [showCategoriesModal, setShowCategoriesModal] = useState(false);\r\n  const [showQueriesModal, setShowQueriesModal] = useState(false);\r\n  const [showStatusModal, setShowStatusModal] = useState(false);\r\n  const [showViewModal, setShowViewModal] = useState(false);\r\n  const [selectedProject, setSelectedProject] = useState(null);\r\n  const [activeTab, setActiveTab] = useState('view');\r\n  const [editingData, setEditingData] = useState({});\r\n  const [showToast, setShowToast] = useState(false);\r\n  const [toastMessage, setToastMessage] = useState('');\r\n  const [toastVariant, setToastVariant] = useState('success');\r\n  \r\n  // Estados para categor√≠as\r\n  const [categories, setCategories] = useState([]);\r\n  const [subcategories, setSubcategories] = useState([]);\r\n  const [selectedCategoryId, setSelectedCategoryId] = useState('');\r\n  \r\n  // Estados para adjuntos\r\n  const [attachments, setAttachments] = useState([]);\r\n  const [uploadingFile, setUploadingFile] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedStatus, setSelectedStatus] = useState('');\r\n  const [selectedCompany, setSelectedCompany] = useState('');\r\n  const [selectedProjectType, setSelectedProjectType] = useState('');\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  \r\n  // Obtener cliente pre-seleccionado desde la navegaci√≥n\r\n  const selectedClient = location.state?.selectedClient;\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const { data, isLoading, refetch } = useQuery(\r\n    ['projects', currentPage, searchTerm, selectedStatus, selectedCompany, selectedProjectType],\r\n    () => listProjects({ \r\n      page: currentPage, \r\n      limit: 20, \r\n      search: searchTerm, \r\n      status: selectedStatus, \r\n      company_id: selectedCompany,\r\n      project_type: selectedProjectType\r\n    }),\r\n    { \r\n      keepPreviousData: true,\r\n      refetchOnWindowFocus: false, // No refrescar autom√°ticamente\r\n      refetchOnMount: false, // No refrescar al montar\r\n      staleTime: 30000, // 30 segundos - considerar datos frescos\r\n      cacheTime: 300000, // 5 minutos - cachear datos\r\n      retry: 2, // Reintentar m√°ximo 2 veces\r\n      retryDelay: 1000, // Esperar 1 segundo entre reintentos\r\n    }\r\n  );\r\n\r\n  // Estad√≠sticas separadas\r\n  const { data: statsData, isLoading: statsLoading } = useQuery(\r\n    ['projectStats'],\r\n    getProjectStats,\r\n    {\r\n      refetchOnWindowFocus: false, // No refrescar autom√°ticamente\r\n      refetchOnMount: false, // No refrescar al montar\r\n      staleTime: 60000, // 1 minuto - considerar datos frescos\r\n      cacheTime: 300000, // 5 minutos - cachear datos\r\n      retry: 1, // Reintentar m√°ximo 1 vez\r\n    }\r\n  );\r\n\r\n  // Cargar categor√≠as al montar el componente\r\n  useEffect(() => {\r\n    const loadCategories = async () => {\r\n      try {\r\n        const categoriesData = await listCategories();\r\n        setCategories(categoriesData);\r\n      } catch (error) {\r\n        console.error('Error al cargar categor√≠as:', error);\r\n      }\r\n    };\r\n    loadCategories();\r\n  }, []);\r\n\r\n  // Cargar subcategor√≠as cuando cambie la categor√≠a seleccionada\r\n  useEffect(() => {\r\n    const loadSubcategories = async () => {\r\n      if (selectedCategoryId) {\r\n        try {\r\n          const subcategoriesData = await listSubcategories(selectedCategoryId);\r\n          setSubcategories(subcategoriesData);\r\n        } catch (error) {\r\n          console.error('Error al cargar subcategor√≠as:', error);\r\n        }\r\n      } else {\r\n        setSubcategories([]);\r\n      }\r\n    };\r\n    loadSubcategories();\r\n  }, [selectedCategoryId]);\r\n\r\n  // Cargar adjuntos cuando se abra el modal de gesti√≥n\r\n  useEffect(() => {\r\n    const loadAttachments = async () => {\r\n      if (selectedProject?.id) {\r\n        try {\r\n          const attachmentsData = await listProjectAttachments(selectedProject.id);\r\n          setAttachments(attachmentsData);\r\n        } catch (error) {\r\n          console.error('Error al cargar adjuntos:', error);\r\n        }\r\n      }\r\n    };\r\n    loadAttachments();\r\n  }, [selectedProject?.id, showViewModal]);\r\n\r\n  const handleMutationSuccess = (message) => {\r\n    queryClient.invalidateQueries('projects');\r\n    queryClient.invalidateQueries('projectStats');\r\n    setShowModal(false);\r\n    setEditingProject(null);\r\n    setDeletingProject(null);\r\n  };\r\n\r\n  const showNotification = (message, variant = 'success') => {\r\n    setToastMessage(message);\r\n    setToastVariant(variant);\r\n    setShowToast(true);\r\n    \r\n    // Auto-close despu√©s de 5 segundos\r\n    setTimeout(() => {\r\n      setShowToast(false);\r\n    }, 5000);\r\n  };\r\n\r\n  // Funci√≥n para manejar b√∫squeda\r\n  const handleSearch = (searchValue) => {\r\n    console.log('üîç handleSearch - B√∫squeda:', searchValue);\r\n    setSearchTerm(searchValue);\r\n    setCurrentPage(1); // Resetear a la primera p√°gina\r\n    setIsSearching(true);\r\n    setTimeout(() => setIsSearching(false), 1000);\r\n  };\r\n\r\n  // Funci√≥n para manejar filtros\r\n  const handleFilter = (filters) => {\r\n    console.log('üîç handleFilter - Filtros:', filters);\r\n    setSelectedStatus(filters.status || '');\r\n    setSelectedCompany(filters.company_id || '');\r\n    setSelectedProjectType(filters.project_type || '');\r\n    setCurrentPage(1); // Resetear a la primera p√°gina\r\n  };\r\n\r\n  // Funciones para manejar adjuntos\r\n  const handleFileSelect = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      setSelectedFile(file);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async () => {\r\n    if (!selectedFile || !selectedProject?.id) {\r\n      showNotification('‚ùå Por favor selecciona un archivo', 'danger');\r\n      return;\r\n    }\r\n\r\n    setUploadingFile(true);\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', selectedFile);\r\n      formData.append('description', `Archivo subido: ${selectedFile.name}`);\r\n\r\n      await uploadAttachment(selectedProject.id, formData);\r\n      \r\n      // Recargar adjuntos\r\n      const attachmentsData = await listProjectAttachments(selectedProject.id);\r\n      setAttachments(attachmentsData);\r\n      \r\n      setSelectedFile(null);\r\n      setUploadingFile(false);\r\n      showNotification('‚úÖ Archivo subido correctamente', 'success');\r\n    } catch (error) {\r\n      console.error('Error al subir archivo:', error);\r\n      setUploadingFile(false);\r\n      showNotification('‚ùå Error al subir archivo', 'danger');\r\n    }\r\n  };\r\n\r\n  const handleFileDownload = async (attachment) => {\r\n    try {\r\n      await downloadFile(attachment);\r\n      showNotification('‚úÖ Archivo descargado correctamente', 'success');\r\n    } catch (error) {\r\n      console.error('Error al descargar archivo:', error);\r\n      showNotification('‚ùå Error al descargar archivo', 'danger');\r\n    }\r\n  };\r\n\r\n  const handleFileDelete = async (attachmentId) => {\r\n    if (window.confirm('¬øEst√°s seguro de que quieres eliminar este archivo?')) {\r\n      try {\r\n        await deleteAttachment(attachmentId);\r\n        \r\n        // Recargar adjuntos\r\n        const attachmentsData = await listProjectAttachments(selectedProject.id);\r\n        setAttachments(attachmentsData);\r\n        \r\n        showNotification('‚úÖ Archivo eliminado correctamente', 'success');\r\n      } catch (error) {\r\n        console.error('Error al eliminar archivo:', error);\r\n        showNotification('‚ùå Error al eliminar archivo', 'danger');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Opciones de filtros espec√≠ficas para proyectos\r\n  const projectFilterOptions = [\r\n    {\r\n      title: 'Por Estado',\r\n      options: [\r\n        { label: 'Pendientes', filter: { status: 'pendiente' } },\r\n        { label: 'Activos', filter: { status: 'activo' } },\r\n        { label: 'Completados', filter: { status: 'completado' } },\r\n        { label: 'Cancelados', filter: { status: 'cancelado' } }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Por Tipo de Proyecto',\r\n      options: [\r\n        { label: 'An√°lisis de Suelos', filter: { project_type: 'An√°lisis de Suelos' } },\r\n        { label: 'Estudio Geot√©cnico', filter: { project_type: 'Estudio Geot√©cnico' } },\r\n        { label: 'Evaluaci√≥n Ambiental', filter: { project_type: 'Evaluaci√≥n Ambiental' } },\r\n        { label: 'Control de Calidad', filter: { project_type: 'Control de Calidad' } },\r\n        { label: 'An√°lisis de Agua', filter: { project_type: 'An√°lisis de Agua' } },\r\n        { label: 'Estudio de Impacto', filter: { project_type: 'Estudio de Impacto' } },\r\n        { label: 'An√°lisis Qu√≠mico', filter: { project_type: 'An√°lisis Qu√≠mico' } },\r\n        { label: 'Pruebas de Laboratorio', filter: { project_type: 'Pruebas de Laboratorio' } },\r\n        { label: 'Inspecci√≥n T√©cnica', filter: { project_type: 'Inspecci√≥n T√©cnica' } },\r\n        { label: 'Certificaci√≥n de Materiales', filter: { project_type: 'Certificaci√≥n de Materiales' } }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  const createMutation = useMutation(createProject, {\r\n    onSuccess: () => handleMutationSuccess('Proyecto creado exitosamente'),\r\n    onError: (error) => console.error('Error creating project:', error)\r\n  });\r\n\r\n  const updateMutation = useMutation(\r\n    ({ id, data }) => updateProject(id, data),\r\n    {\r\n      onSuccess: (updatedProject) => {\r\n        console.log('‚úÖ updateMutation - Success:', updatedProject);\r\n        // Actualizar el proyecto seleccionado con los nuevos datos\r\n        setSelectedProject(updatedProject);\r\n        setEditingData(updatedProject);\r\n        showNotification('‚úÖ Proyecto actualizado exitosamente!', 'success');\r\n        queryClient.invalidateQueries('projects');\r\n      },\r\n      onError: (error) => {\r\n        console.error('‚ùå updateMutation - Error:', error);\r\n        showNotification('‚ùå Error al actualizar proyecto', 'danger');\r\n      }\r\n    }\r\n  );\r\n\r\n  const deleteMutation = useMutation(deleteProject, {\r\n    onSuccess: () => handleMutationSuccess('Proyecto eliminado exitosamente'),\r\n    onError: (error) => console.error('Error deleting project:', error)\r\n  });\r\n\r\n  const updateStatusMutation = useMutation(\r\n    ({ id, ...data }) => updateProjectStatus(id, data),\r\n    {\r\n      onSuccess: (updatedProject) => {\r\n        setSelectedProject(updatedProject);\r\n        setEditingData(updatedProject);\r\n        handleMutationSuccess('Estado del proyecto actualizado exitosamente');\r\n      },\r\n      onError: (error) => console.error('Error updating project status:', error)\r\n    }\r\n  );\r\n\r\n  const updateCategoriesMutation = useMutation(\r\n    ({ id, ...data }) => updateProjectCategories(id, data),\r\n    {\r\n      onSuccess: (updatedProject) => {\r\n        console.log('‚úÖ updateCategoriesMutation - Success:', updatedProject);\r\n        // Actualizar el proyecto seleccionado con los nuevos datos\r\n        setSelectedProject(updatedProject);\r\n        setEditingData(updatedProject);\r\n        showNotification('‚úÖ Categor√≠as guardadas correctamente!', 'success');\r\n        queryClient.invalidateQueries('projects');\r\n      },\r\n      onError: (error) => {\r\n        console.error('‚ùå updateCategoriesMutation - Error:', error);\r\n        showNotification('‚ùå Error al guardar categor√≠as', 'danger');\r\n      }\r\n    }\r\n  );\r\n\r\n  const updateQueriesMutation = useMutation(\r\n    ({ id, ...data }) => updateProjectQueries(id, data),\r\n    {\r\n      onSuccess: (updatedProject) => {\r\n        setSelectedProject(updatedProject);\r\n        setEditingData(updatedProject);\r\n        handleMutationSuccess('Consultas del proyecto actualizadas exitosamente');\r\n      },\r\n      onError: (error) => console.error('Error updating project queries:', error)\r\n    }\r\n  );\r\n\r\n  const updateMarkMutation = useMutation(\r\n    ({ id, ...data }) => updateProjectMark(id, data),\r\n    {\r\n      onSuccess: (updatedProject) => {\r\n        setSelectedProject(updatedProject);\r\n        setEditingData(updatedProject);\r\n        handleMutationSuccess('Proyecto marcado/desmarcado exitosamente');\r\n      },\r\n      onError: (error) => console.error('Error updating project mark:', error)\r\n    }\r\n  );\r\n\r\n  const handleCreate = () => {\r\n    // Si hay un cliente pre-seleccionado, pre-llenar el formulario\r\n    const formData = selectedClient ? {\r\n      ...emptyForm,\r\n      company_id: selectedClient.id,\r\n      name: `${selectedClient.sector || 'Proyecto'} - ${selectedClient.name}`,\r\n      location: selectedClient.city || '',\r\n      contact_name: selectedClient.contact_name || '',\r\n      contact_phone: selectedClient.phone || '',\r\n      contact_email: selectedClient.email || ''\r\n    } : emptyForm;\r\n    \r\n    setEditingProject(formData);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleEdit = (project) => {\r\n    setEditingProject(project);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDelete = (project) => {\r\n    if (window.confirm(`¬øEst√°s seguro de que quieres eliminar el proyecto \"${project.name}\"?`)) {\r\n      deleteMutation.mutate(project.id);\r\n    }\r\n  };\r\n\r\n  const handleViewCategories = (project) => {\r\n    setSelectedProject(project);\r\n    setShowCategoriesModal(true);\r\n  };\r\n\r\n  const handleViewQueries = (project) => {\r\n    setSelectedProject(project);\r\n    setShowQueriesModal(true);\r\n  };\r\n\r\n  const handleToggleMark = async (project) => {\r\n    try {\r\n      // Aqu√≠ implementar√≠as la l√≥gica para marcar/desmarcar\r\n      console.log('Marcar/desmarcar proyecto:', project);\r\n      // Por ahora solo mostramos un mensaje\r\n      alert(`Proyecto ${project.marked ? 'desmarcado' : 'marcado'}: ${project.name}`);\r\n    } catch (error) {\r\n      console.error('Error al marcar proyecto:', error);\r\n    }\r\n  };\r\n\r\n  const handleUpdateStatus = (project) => {\r\n    setSelectedProject(project);\r\n    setShowStatusModal(true);\r\n  };\r\n\r\n  const handleViewProject = (project) => {\r\n    console.log('üîç handleViewProject - Project recibido:', project);\r\n    console.log('üîç handleViewProject - Project.id:', project?.id);\r\n    console.log('üîç handleViewProject - Type of project.id:', typeof project?.id);\r\n    \r\n    setSelectedProject(project);\r\n    \r\n    // Inicializar editingData con todos los campos del proyecto\r\n    const initialEditingData = {\r\n      ...project,\r\n      // Asegurar que los campos booleanos tengan valores por defecto\r\n      requiere_laboratorio: project.requiere_laboratorio || false,\r\n      requiere_ingenieria: project.requiere_ingenieria || false,\r\n      requiere_consultoria: project.requiere_consultoria || false,\r\n      requiere_capacitacion: project.requiere_capacitacion || false,\r\n      requiere_auditoria: project.requiere_auditoria || false,\r\n      marked: project.marked || false,\r\n      priority: project.priority || 'normal',\r\n      queries: project.queries || '',\r\n      contact_name: project.contact_name || '',\r\n      contact_phone: project.contact_phone || '',\r\n      contact_email: project.contact_email || '',\r\n      category_id: project.category_id || '',\r\n      subcategory_id: project.subcategory_id || '',\r\n      category_name: project.category_name || '',\r\n      subcategory_name: project.subcategory_name || ''\r\n    };\r\n    \r\n    console.log('üîç handleViewProject - editingData inicializado:', initialEditingData);\r\n    setEditingData(initialEditingData);\r\n    setActiveTab('view');\r\n    setShowViewModal(true);\r\n  };\r\n\r\n  const handleSubmit = async (formData) => {\r\n    if (editingProject.id) {\r\n      await updateMutation.mutateAsync({ id: editingProject.id, ...formData });\r\n    } else {\r\n      await createMutation.mutateAsync(formData);\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const statusConfig = {\r\n      'activo': { bg: 'success', text: 'Activo' },\r\n      'pendiente': { bg: 'warning', text: 'Pendiente' },\r\n      'completado': { bg: 'primary', text: 'Completado' },\r\n      'cancelado': { bg: 'danger', text: 'Cancelado' }\r\n    };\r\n    \r\n    const config = statusConfig[status] || { bg: 'secondary', text: status };\r\n    return <Badge bg={config.bg} className=\"status-badge\">{config.text}</Badge>;\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      header: 'ID',\r\n      accessor: 'id',\r\n      width: '80px'\r\n    },\r\n    {\r\n      header: 'Proyecto',\r\n      accessor: 'name',\r\n      render: (value, row) => (\r\n        <div>\r\n          <div className=\"fw-medium\">{row.name}</div>\r\n          {row.location && (\r\n            <small className=\"text-muted\">\r\n              <FiMapPin size={12} className=\"me-1\" />\r\n              {row.location}\r\n            </small>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Tipo de Proyecto',\r\n      accessor: 'project_type',\r\n      render: (value, row) => {\r\n        const projectType = row.project_type || 'General';\r\n        let typeColor = 'secondary';\r\n        \r\n        // Asignar colores seg√∫n el tipo de proyecto\r\n        switch (projectType) {\r\n          case 'An√°lisis de Suelos':\r\n            typeColor = 'success';\r\n            break;\r\n          case 'Estudio Geot√©cnico':\r\n            typeColor = 'primary';\r\n            break;\r\n          case 'Evaluaci√≥n Ambiental':\r\n            typeColor = 'info';\r\n            break;\r\n          case 'Control de Calidad':\r\n            typeColor = 'warning';\r\n            break;\r\n          case 'An√°lisis de Agua':\r\n            typeColor = 'info';\r\n            break;\r\n          case 'Estudio de Impacto':\r\n            typeColor = 'danger';\r\n            break;\r\n          case 'An√°lisis Qu√≠mico':\r\n            typeColor = 'primary';\r\n            break;\r\n          case 'Pruebas de Laboratorio':\r\n            typeColor = 'success';\r\n            break;\r\n          case 'Inspecci√≥n T√©cnica':\r\n            typeColor = 'warning';\r\n            break;\r\n          case 'Certificaci√≥n de Materiales':\r\n            typeColor = 'info';\r\n            break;\r\n          default:\r\n            typeColor = 'secondary';\r\n        }\r\n        \r\n        return (\r\n          <Badge bg={typeColor} className=\"px-2 py-1\">\r\n            {projectType}\r\n          </Badge>\r\n        );\r\n      }\r\n    },\r\n    {\r\n      header: 'Categor√≠a',\r\n      accessor: 'category_name',\r\n      render: (value, row) => (\r\n        <div>\r\n          {row.category_name && (\r\n            <Badge bg=\"primary\" className=\"px-2 py-1 mb-1 d-block\">\r\n              {row.category_name}\r\n            </Badge>\r\n          )}\r\n          {row.subcategory_name && (\r\n            <Badge bg=\"secondary\" className=\"px-2 py-1 d-block\">\r\n              {row.subcategory_name}\r\n            </Badge>\r\n          )}\r\n          {!row.category_name && (\r\n            <span className=\"text-muted\">Sin categor√≠a</span>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Empresa',\r\n      accessor: 'company_name',\r\n      render: (value, row) => (\r\n        <div>\r\n          <div className=\"fw-medium\">{row.company_name || 'Sin empresa'}</div>\r\n          {row.company_ruc && (\r\n            <small className=\"text-muted\">RUC: {row.company_ruc}</small>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Estado',\r\n      accessor: 'status',\r\n      render: (value) => getStatusBadge(value || 'activo')\r\n    },\r\n    {\r\n      header: 'Servicios Requeridos',\r\n      accessor: 'services',\r\n      render: (value, row) => (\r\n        <div className=\"d-flex flex-wrap gap-1\">\r\n          {row.requiere_laboratorio && (\r\n            <Badge bg=\"info\" className=\"px-2 py-1\">\r\n              <FiHome size={12} className=\"me-1\" />\r\n              Laboratorio\r\n            </Badge>\r\n          )}\r\n          {row.requiere_ingenieria && (\r\n            <Badge bg=\"primary\" className=\"px-2 py-1\">\r\n              <FiUser size={12} className=\"me-1\" />\r\n              Ingenier√≠a\r\n            </Badge>\r\n          )}\r\n          {!row.requiere_laboratorio && !row.requiere_ingenieria && (\r\n            <Badge bg=\"secondary\" className=\"px-2 py-1\">\r\n              Sin servicios\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Contacto',\r\n      accessor: 'contacto',\r\n      render: (value, row) => (\r\n        <div className=\"small\">\r\n          {row.contact_name && (\r\n            <div><strong>{row.contact_name}</strong></div>\r\n          )}\r\n          {row.contact_phone && (\r\n            <div className=\"text-muted\">{row.contact_phone}</div>\r\n          )}\r\n          {row.contact_email && (\r\n            <div className=\"text-muted\">{row.contact_email}</div>\r\n          )}\r\n          {!row.contact_name && !row.contact_phone && !row.contact_email && (\r\n            <span className=\"text-muted\">Sin contacto</span>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Asignado a',\r\n      accessor: 'vendedor_name',\r\n      render: (value, row) => (\r\n        <div>\r\n          {row.vendedor_name && (\r\n            <div className=\"d-flex align-items-center\">\r\n              <FiUser size={14} className=\"me-1 text-muted\" />\r\n              <span>{row.vendedor_name}</span>\r\n            </div>\r\n          )}\r\n          {row.laboratorio_name && (\r\n            <div className=\"d-flex align-items-center mt-1\">\r\n              <FiHome size={14} className=\"me-1 text-muted\" />\r\n              <span className=\"small text-muted\">{row.laboratorio_name}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      header: 'Fecha Creaci√≥n',\r\n      accessor: 'created_at',\r\n      type: 'date'\r\n    }\r\n  ];\r\n\r\n  const formFields = [\r\n    {\r\n      name: 'company_id',\r\n      label: 'Empresa/Cliente',\r\n      type: 'select',\r\n      required: true,\r\n      options: data?.companies?.map(company => ({\r\n        value: company.id,\r\n        label: `${company.name} (${company.ruc || company.dni || 'Sin RUC/DNI'})`\r\n      })) || [],\r\n      description: 'Selecciona un cliente existente o crea uno nuevo desde el m√≥dulo de clientes'\r\n    },\r\n    {\r\n      name: 'name',\r\n      label: 'Nombre del Proyecto',\r\n      type: 'text',\r\n      required: true,\r\n      placeholder: 'Ingresa el nombre del proyecto'\r\n    },\r\n    {\r\n      name: 'location',\r\n      label: 'Ubicaci√≥n del Proyecto',\r\n      type: 'text',\r\n      placeholder: 'Ingresa la ubicaci√≥n del proyecto',\r\n      required: true\r\n    },\r\n    {\r\n      name: 'category_id',\r\n      label: 'Categor√≠a del Proyecto',\r\n      type: 'select',\r\n      options: categories.map(category => ({\r\n        value: category.id,\r\n        label: category.name\r\n      })),\r\n      description: 'Selecciona la categor√≠a principal del proyecto',\r\n      onChange: (value) => {\r\n        setSelectedCategoryId(value);\r\n        // Limpiar subcategor√≠a cuando cambie la categor√≠a\r\n        setEditingProject(prev => ({\r\n          ...prev,\r\n          subcategory_id: '',\r\n          subcategory_name: ''\r\n        }));\r\n      }\r\n    },\r\n    {\r\n      name: 'subcategory_id',\r\n      label: 'Subcategor√≠a del Proyecto',\r\n      type: 'select',\r\n      options: subcategories.map(subcategory => ({\r\n        value: subcategory.id,\r\n        label: subcategory.name\r\n      })),\r\n      description: 'Selecciona la subcategor√≠a espec√≠fica del proyecto',\r\n      disabled: !selectedCategoryId\r\n    },\r\n    {\r\n      name: 'contact_name',\r\n      label: 'Persona de Contacto',\r\n      type: 'text',\r\n      placeholder: 'Nombre de la persona con quien negociar',\r\n      description: 'Persona responsable del proyecto en el cliente'\r\n    },\r\n    {\r\n      name: 'contact_phone',\r\n      label: 'Tel√©fono de Contacto',\r\n      type: 'text',\r\n      placeholder: 'Tel√©fono para comunicaci√≥n directa',\r\n      description: 'N√∫mero para llamadas urgentes o seguimiento'\r\n    },\r\n    {\r\n      name: 'contact_email',\r\n      label: 'Email de Contacto',\r\n      type: 'email',\r\n      placeholder: 'Email para comunicaci√≥n',\r\n      description: 'Email para env√≠o de reportes y documentos'\r\n    },\r\n    {\r\n      name: 'requiere_laboratorio',\r\n      label: 'Requiere Laboratorio',\r\n      type: 'checkbox',\r\n      description: 'Marcar si el proyecto necesita servicios de laboratorio'\r\n    },\r\n    {\r\n      name: 'requiere_ingenieria',\r\n      label: 'Requiere Ingenier√≠a',\r\n      type: 'checkbox',\r\n      description: 'Marcar si el proyecto necesita servicios de ingenier√≠a'\r\n    },\r\n    {\r\n      name: 'requiere_consultoria',\r\n      label: 'Requiere Consultor√≠a',\r\n      type: 'checkbox',\r\n      description: 'Marcar si el proyecto necesita servicios de consultor√≠a'\r\n    },\r\n    {\r\n      name: 'requiere_capacitacion',\r\n      label: 'Requiere Capacitaci√≥n',\r\n      type: 'checkbox',\r\n      description: 'Marcar si el proyecto necesita servicios de capacitaci√≥n'\r\n    },\r\n    {\r\n      name: 'requiere_auditoria',\r\n      label: 'Requiere Auditor√≠a',\r\n      type: 'checkbox',\r\n      description: 'Marcar si el proyecto necesita servicios de auditor√≠a'\r\n    },\r\n    {\r\n      name: 'queries',\r\n      label: 'Consultas del Cliente',\r\n      type: 'textarea',\r\n      placeholder: 'Ingresa las consultas o dudas del cliente...',\r\n      description: 'Preguntas o dudas espec√≠ficas del cliente sobre el proyecto'\r\n    },\r\n    {\r\n      name: 'priority',\r\n      label: 'Prioridad del Proyecto',\r\n      type: 'select',\r\n      options: [\r\n        { value: 'low', label: 'Baja' },\r\n        { value: 'normal', label: 'Normal' },\r\n        { value: 'high', label: 'Alta' },\r\n        { value: 'urgent', label: 'Urgente' }\r\n      ],\r\n      description: 'Nivel de prioridad para la ejecuci√≥n del proyecto'\r\n    },\r\n    {\r\n      name: 'vendedor_id',\r\n      label: 'Vendedor Asignado',\r\n      type: 'select',\r\n      options: data?.users?.filter(user => \r\n        ['vendedor_comercial', 'jefa_comercial'].includes(user.role)\r\n      ).map(user => ({\r\n        value: user.id,\r\n        label: `${user.name} ${user.apellido}`\r\n      })) || []\r\n    },\r\n    {\r\n      name: 'laboratorio_id',\r\n      label: 'Responsable de Laboratorio',\r\n      type: 'select',\r\n      options: data?.users?.filter(user => \r\n        ['jefe_laboratorio', 'usuario_laboratorio', 'laboratorio'].includes(user.role)\r\n      ).map(user => ({\r\n        value: user.id,\r\n        label: `${user.name} ${user.apellido}`\r\n      })) || []\r\n    },\r\n    {\r\n      name: 'requiere_laboratorio',\r\n      label: 'Requiere Servicios de Laboratorio',\r\n      type: 'checkbox',\r\n      description: 'Marcar si el proyecto necesita an√°lisis o pruebas de laboratorio'\r\n    },\r\n    {\r\n      name: 'requiere_ingenieria',\r\n      label: 'Requiere Servicios de Ingenier√≠a',\r\n      type: 'checkbox',\r\n      description: 'Marcar si el proyecto necesita estudios o consultor√≠a de ingenier√≠a'\r\n    }\r\n  ];\r\n\r\n  // Calcular estad√≠sticas\r\n  const stats = useMemo(() => {\r\n    if (statsData) {\r\n      console.log('üìä Stats - Usando estad√≠sticas reales del backend:', statsData);\r\n      return {\r\n        total: statsData.total || 0,\r\n        activos: statsData.activos || 0,\r\n        completados: statsData.completados || 0,\r\n        pendientes: statsData.pendientes || 0,\r\n        cancelados: statsData.cancelados || 0\r\n      };\r\n    }\r\n    // Fallback: calcular desde los datos de la p√°gina actual\r\n    const projects = data?.data || [];\r\n    console.log('üìä Stats - Fallback: calculando desde p√°gina actual:', projects);\r\n    return {\r\n      total: projects.length,\r\n      activos: projects.filter(p => p.status === 'activo').length,\r\n      completados: projects.filter(p => p.status === 'completado').length,\r\n      pendientes: projects.filter(p => p.status === 'pendiente').length,\r\n      cancelados: projects.filter(p => p.status === 'cancelado').length\r\n    };\r\n  }, [statsData, data]);\r\n\r\n  return (\r\n    <>\r\n      <Container fluid className=\"py-4\">\r\n        <div className=\"fade-in\">\r\n          <PageHeader\r\n            title=\"Gesti√≥n de Proyectos\"\r\n            subtitle={selectedClient ? `Crear proyecto para: ${selectedClient.name}` : \"Crear, editar y gestionar proyectos del sistema\"}\r\n            icon={FiHome}\r\n            actions={\r\n              <div className=\"d-flex gap-2\">\r\n                {selectedClient && (\r\n                  <Badge bg=\"info\" className=\"px-3 py-2 d-flex align-items-center\">\r\n                    <FiUser className=\"me-1\" />\r\n                    Cliente: {selectedClient.name}\r\n                  </Badge>\r\n                )}\r\n                <Button variant=\"primary\" onClick={handleCreate}>\r\n                  <FiPlus className=\"me-2\" />\r\n                  {selectedClient ? 'Crear Proyecto' : 'Nuevo Proyecto'}\r\n                </Button>\r\n              </div>\r\n            }\r\n          />\r\n\r\n          {/* Estad√≠sticas */}\r\n          <Row className=\"g-4 mb-4\">\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Total Proyectos\"\r\n              value={stats.total}\r\n              icon={FiHome}\r\n              color=\"primary\"\r\n              subtitle=\"Proyectos registrados\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Proyectos Activos\"\r\n              value={stats.activos}\r\n              icon={FiCheckCircle}\r\n              color=\"success\"\r\n              subtitle=\"En desarrollo\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Completados\"\r\n              value={stats.completados}\r\n              icon={FiCheckCircle}\r\n              color=\"info\"\r\n              subtitle=\"Finalizados\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n          <Col md={6} lg={3}>\r\n            <StatsCard\r\n              title=\"Pendientes\"\r\n              value={stats.pendientes}\r\n              icon={FiClock}\r\n              color=\"warning\"\r\n              subtitle=\"Por iniciar\"\r\n              loading={statsLoading}\r\n            />\r\n          </Col>\r\n        </Row>\r\n\r\n        {/* Tabla de proyectos */}\r\n        <Card className=\"shadow-sm border-0\">\r\n          <Card.Header className=\"bg-white border-bottom\">\r\n            <div className=\"d-flex justify-content-between align-items-center\">\r\n              <h5 className=\"mb-0\">\r\n                <FiHome className=\"me-2 text-primary\" />\r\n                Lista de Proyectos\r\n              </h5>\r\n              <div className=\"d-flex align-items-center gap-2\">\r\n                <Button\r\n                  variant=\"outline-secondary\"\r\n                  size=\"sm\"\r\n                  onClick={() => refetch()}\r\n                  className=\"d-flex align-items-center\"\r\n                  title=\"Actualizar datos\"\r\n                >\r\n                  <FiRefreshCw className={`${isLoading ? 'spinning' : ''}`} />\r\n                </Button>\r\n              <Badge bg=\"light\" text=\"dark\" className=\"px-3 py-2\">\r\n                {stats.total} proyectos\r\n              </Badge>\r\n              </div>\r\n            </div>\r\n          </Card.Header>\r\n          <Card.Body className=\"p-0\">\r\n            <DataTable\r\n              data={data?.data || []}\r\n              columns={columns}\r\n              loading={isLoading || isSearching}\r\n              onEdit={handleEdit}\r\n              onDelete={handleDelete}\r\n              actions={[\r\n                { label: 'Gestionar', icon: FiEye, onClick: handleViewProject, variant: 'outline-primary' },\r\n                { label: 'Eliminar', icon: FiTrash2, onClick: handleDelete, variant: 'outline-danger' }\r\n              ]}\r\n              emptyMessage=\"No hay proyectos registrados\"\r\n              // Props para paginaci√≥n del backend\r\n              totalItems={data?.total || 0}\r\n              itemsPerPage={20}\r\n              currentPage={currentPage}\r\n              onPageChange={setCurrentPage}\r\n              onSearch={handleSearch}\r\n              onFilter={handleFilter}\r\n              // Filtros espec√≠ficos para proyectos\r\n              filterOptions={projectFilterOptions}\r\n            />\r\n          </Card.Body>\r\n        </Card>\r\n\r\n      <ModalForm\r\n        show={showModal}\r\n        onHide={() => setShowModal(false)}\r\n        title={editingProject?.id ? 'Editar Proyecto' : 'Nuevo Proyecto'}\r\n        data={editingProject || emptyForm}\r\n        fields={formFields}\r\n        onSubmit={handleSubmit}\r\n        loading={createMutation.isLoading || updateMutation.isLoading}\r\n        submitText={editingProject?.id ? 'Actualizar' : 'Crear'}\r\n      />\r\n\r\n      {/* Modal Unificado para Gestionar Proyecto */}\r\n      <ModalForm\r\n        show={showViewModal}\r\n        onHide={() => setShowViewModal(false)}\r\n        title={`Gestionar Proyecto - ${selectedProject?.name || ''}`}\r\n        data={editingData}\r\n        fields={[\r\n          {\r\n            name: 'project_management',\r\n            label: 'Gesti√≥n del Proyecto',\r\n            type: 'custom',\r\n            render: (project) => (\r\n              <Tabs\r\n                activeKey={activeTab}\r\n                onSelect={(k) => setActiveTab(k)}\r\n                className=\"mb-3\"\r\n              >\r\n                {/* Tab Ver */}\r\n                <Tab eventKey=\"view\" title={\r\n                  <span>\r\n                    <FiEye className=\"me-1\" />\r\n                    Ver\r\n                  </span>\r\n                }>\r\n                  <div className=\"row g-3\">\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"border rounded p-3 h-100\">\r\n                        <h6 className=\"text-primary mb-3\">\r\n                          <FiHome className=\"me-2\" />\r\n                          Datos Generales\r\n                        </h6>\r\n                        <div className=\"mb-2\">\r\n                          <strong>ID:</strong> {project.id}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Nombre:</strong> {project.name}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Ubicaci√≥n:</strong> {project.location}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Tipo:</strong> \r\n                          <Badge bg=\"info\" className=\"ms-2\">{project.project_type}</Badge>\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Estado:</strong> \r\n                          <Badge bg=\"primary\" className=\"ms-2\">{project.status}</Badge>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"border rounded p-3 h-100\">\r\n                        <h6 className=\"text-success mb-3\">\r\n                          <FiUser className=\"me-2\" />\r\n                          Informaci√≥n de Contacto\r\n                        </h6>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Empresa:</strong> {project.company_name}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>RUC:</strong> {project.company_ruc}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Contacto:</strong> {project.contact_name || 'Sin contacto'}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Tel√©fono:</strong> {project.contact_phone || 'Sin tel√©fono'}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Email:</strong> {project.contact_email || 'Sin email'}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"border rounded p-3 h-100\">\r\n                        <h6 className=\"text-warning mb-3\">\r\n                          <FiSettings className=\"me-2\" />\r\n                          Servicios Requeridos\r\n                        </h6>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Laboratorio:</strong> \r\n                          {project.requiere_laboratorio ? (\r\n                            <Badge bg=\"info\" className=\"ms-2\">Requerido</Badge>\r\n                          ) : (\r\n                            <Badge bg=\"secondary\" className=\"ms-2\">No requerido</Badge>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Ingenier√≠a:</strong> \r\n                          {project.requiere_ingenieria ? (\r\n                            <Badge bg=\"success\" className=\"ms-2\">Requerido</Badge>\r\n                          ) : (\r\n                            <Badge bg=\"secondary\" className=\"ms-2\">No requerido</Badge>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Estado Lab:</strong> \r\n                          <Badge bg=\"info\" className=\"ms-2\">{project.laboratorio_status}</Badge>\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Estado Ing:</strong> \r\n                          <Badge bg=\"success\" className=\"ms-2\">{project.ingenieria_status}</Badge>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"border rounded p-3 h-100\">\r\n                        <h6 className=\"text-info mb-3\">\r\n                          <FiUsers className=\"me-2\" />\r\n                          Asignaciones\r\n                        </h6>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Vendedor:</strong> {project.vendedor_name || 'Sin asignar'}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Laboratorio:</strong> {project.laboratorio_name || 'Sin asignar'}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>Fecha Creaci√≥n:</strong> {new Date(project.created_at).toLocaleDateString()}\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <strong>√öltima Actualizaci√≥n:</strong> {new Date(project.updated_at).toLocaleDateString()}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    {project.status_notes && (\r\n                      <div className=\"col-12\">\r\n                        <div className=\"border rounded p-3\">\r\n                          <h6 className=\"text-muted mb-3\">\r\n                            <FiMessageCircle className=\"me-2\" />\r\n                            Notas del Estado\r\n                          </h6>\r\n                          <p className=\"mb-0\">{project.status_notes}</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </Tab>\r\n\r\n                {/* Tab Editar */}\r\n                <Tab eventKey=\"edit\" title={\r\n                  <span>\r\n                    <FiEdit className=\"me-1\" />\r\n                    Editar\r\n                  </span>\r\n                }>\r\n                  <div className=\"row g-3\">\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Nombre del Proyecto</label>\r\n                        <input \r\n                          type=\"text\" \r\n                          className=\"form-control\" \r\n                          value={editingData.name || ''} \r\n                          onChange={(e) => setEditingData({...editingData, name: e.target.value})}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Ubicaci√≥n</label>\r\n                        <input \r\n                          type=\"text\" \r\n                          className=\"form-control\" \r\n                          value={editingData.location || ''} \r\n                          onChange={(e) => setEditingData({...editingData, location: e.target.value})}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Persona de Contacto</label>\r\n                        <input \r\n                          type=\"text\" \r\n                          className=\"form-control\" \r\n                          value={editingData.contact_name || ''} \r\n                          onChange={(e) => setEditingData({...editingData, contact_name: e.target.value})}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Tel√©fono de Contacto</label>\r\n                        <input \r\n                          type=\"text\" \r\n                          className=\"form-control\" \r\n                          value={editingData.contact_phone || ''} \r\n                          onChange={(e) => setEditingData({...editingData, contact_phone: e.target.value})}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-12\">\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Email de Contacto</label>\r\n                        <input \r\n                          type=\"email\" \r\n                          className=\"form-control\" \r\n                          value={editingData.contact_email || ''} \r\n                          onChange={(e) => setEditingData({...editingData, contact_email: e.target.value})}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-12\">\r\n                      <Button \r\n                        variant=\"primary\" \r\n                        onClick={() => {\r\n                          const projectId = selectedProject?.id;\r\n                          \r\n                          if (!projectId) {\r\n                            console.error('No se encontr√≥ el ID del proyecto');\r\n                            showNotification('‚ùå Error: No se encontr√≥ el ID del proyecto', 'danger');\r\n                            return;\r\n                          }\r\n                          \r\n                          // Asegurar que projectId sea un n√∫mero\r\n                          const numericId = typeof projectId === 'object' ? projectId.id : projectId;\r\n                          \r\n                          // Llamar a la mutaci√≥n con manejo de respuesta\r\n                          updateMutation.mutate({ \r\n                            id: numericId, \r\n                            data: editingData\r\n                          }, {\r\n                            onSuccess: (data) => {\r\n                              showNotification('‚úÖ Proyecto actualizado exitosamente!', 'success');\r\n                            },\r\n                            onError: (error) => {\r\n                              console.error('‚ùå Guardar Cambios - Error:', error);\r\n                              showNotification('‚ùå Error al actualizar proyecto', 'danger');\r\n                            }\r\n                          });\r\n                        }}\r\n                        disabled={updateMutation.isLoading}\r\n                      >\r\n                        {updateMutation.isLoading ? 'Guardando...' : 'Guardar Cambios'}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </Tab>\r\n\r\n                {/* Tab Estado */}\r\n                <Tab eventKey=\"status\" title={\r\n                  <span>\r\n                    <FiSettings className=\"me-1\" />\r\n                    Estado\r\n                  </span>\r\n                }>\r\n                  <div className=\"row g-3\">\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Estado del Proyecto</label>\r\n                        <select \r\n                          className=\"form-select\" \r\n                          value={editingData.status || ''} \r\n                          onChange={(e) => setEditingData({...editingData, status: e.target.value})}\r\n                        >\r\n                          <option value=\"pendiente\">Pendiente</option>\r\n                          <option value=\"activo\">Activo</option>\r\n                          <option value=\"en_proceso\">En Proceso</option>\r\n                          <option value=\"completado\">Completado</option>\r\n                          <option value=\"pausado\">Pausado</option>\r\n                          <option value=\"cancelado\">Cancelado</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Estado del Laboratorio</label>\r\n                        <select \r\n                          className=\"form-select\" \r\n                          value={editingData.laboratorio_status || ''} \r\n                          onChange={(e) => setEditingData({...editingData, laboratorio_status: e.target.value})}\r\n                        >\r\n                          <option value=\"no_requerido\">No Requerido</option>\r\n                          <option value=\"pendiente\">Pendiente</option>\r\n                          <option value=\"en_proceso\">En Proceso</option>\r\n                          <option value=\"completado\">Completado</option>\r\n                          <option value=\"pausado\">Pausado</option>\r\n                          <option value=\"cancelado\">Cancelado</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Estado de Ingenier√≠a</label>\r\n                        <select \r\n                          className=\"form-select\" \r\n                          value={editingData.ingenieria_status || ''} \r\n                          onChange={(e) => setEditingData({...editingData, ingenieria_status: e.target.value})}\r\n                        >\r\n                          <option value=\"no_requerido\">No Requerido</option>\r\n                          <option value=\"pendiente\">Pendiente</option>\r\n                          <option value=\"en_proceso\">En Proceso</option>\r\n                          <option value=\"completado\">Completado</option>\r\n                          <option value=\"pausado\">Pausado</option>\r\n                          <option value=\"cancelado\">Cancelado</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-12\">\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Notas del Estado</label>\r\n                        <textarea \r\n                          className=\"form-control\" \r\n                          rows=\"3\"\r\n                          value={editingData.status_notes || ''} \r\n                          onChange={(e) => setEditingData({...editingData, status_notes: e.target.value})}\r\n                          placeholder=\"Agrega comentarios sobre el cambio de estado...\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-12\">\r\n                      <Button \r\n                        variant=\"success\" \r\n                        onClick={() => {\r\n                          const projectId = selectedProject?.id;\r\n                          if (!projectId) {\r\n                            console.error('No se encontr√≥ el ID del proyecto');\r\n                            showNotification('‚ùå Error: No se encontr√≥ el ID del proyecto', 'danger');\r\n                            return;\r\n                          }\r\n                          \r\n                          updateStatusMutation.mutate({ id: projectId, ...editingData }, {\r\n                            onSuccess: (data) => {\r\n                              console.log('‚úÖ Actualizar Estado - √âxito:', data);\r\n                              showNotification('‚úÖ Estado actualizado correctamente!', 'success');\r\n                            },\r\n                            onError: (error) => {\r\n                              console.error('‚ùå Actualizar Estado - Error:', error);\r\n                              showNotification('‚ùå Error al actualizar estado', 'danger');\r\n                            }\r\n                          });\r\n                        }}\r\n                        disabled={updateStatusMutation.isLoading}\r\n                      >\r\n                        {updateStatusMutation.isLoading ? 'Actualizando...' : 'Actualizar Estado'}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </Tab>\r\n\r\n                {/* Tab Categor√≠as */}\r\n                <Tab eventKey=\"categories\" title={\r\n                  <span>\r\n                    <FiFolder className=\"me-1\" />\r\n                    Categor√≠as\r\n                  </span>\r\n                }>\r\n                  <div className=\"row g-3\">\r\n                    <div className=\"col-12\">\r\n                      <h6 className=\"mb-3\">Categor√≠as del Proyecto</h6>\r\n                      <div className=\"form-check\">\r\n                        <input \r\n                          className=\"form-check-input\" \r\n                          type=\"checkbox\" \r\n                          id=\"cat_laboratorio\"\r\n                          checked={editingData.requiere_laboratorio || false}\r\n                          onChange={(e) => {\r\n                            console.log('üîç requiere_laboratorio onChange:', e.target.checked);\r\n                            setEditingData({...editingData, requiere_laboratorio: e.target.checked});\r\n                          }}\r\n                        />\r\n                        <label className=\"form-check-label\" htmlFor=\"cat_laboratorio\">\r\n                          Laboratorio\r\n                        </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input \r\n                          className=\"form-check-input\" \r\n                          type=\"checkbox\" \r\n                          id=\"cat_ingenieria\"\r\n                          checked={editingData.requiere_ingenieria || false}\r\n                          onChange={(e) => setEditingData({...editingData, requiere_ingenieria: e.target.checked})}\r\n                        />\r\n                        <label className=\"form-check-label\" htmlFor=\"cat_ingenieria\">\r\n                          Ingenier√≠a\r\n                        </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input \r\n                          className=\"form-check-input\" \r\n                          type=\"checkbox\" \r\n                          id=\"cat_consultoria\"\r\n                          checked={editingData.requiere_consultoria || false}\r\n                          onChange={(e) => setEditingData({...editingData, requiere_consultoria: e.target.checked})}\r\n                        />\r\n                        <label className=\"form-check-label\" htmlFor=\"cat_consultoria\">\r\n                          Consultor√≠a\r\n                        </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input \r\n                          className=\"form-check-input\" \r\n                          type=\"checkbox\" \r\n                          id=\"cat_capacitacion\"\r\n                          checked={editingData.requiere_capacitacion || false}\r\n                          onChange={(e) => setEditingData({...editingData, requiere_capacitacion: e.target.checked})}\r\n                        />\r\n                        <label className=\"form-check-label\" htmlFor=\"cat_capacitacion\">\r\n                          Capacitaci√≥n\r\n                        </label>\r\n                      </div>\r\n                      <div className=\"form-check\">\r\n                        <input \r\n                          className=\"form-check-input\" \r\n                          type=\"checkbox\" \r\n                          id=\"cat_auditoria\"\r\n                          checked={editingData.requiere_auditoria || false}\r\n                          onChange={(e) => setEditingData({...editingData, requiere_auditoria: e.target.checked})}\r\n                        />\r\n                        <label className=\"form-check-label\" htmlFor=\"cat_auditoria\">\r\n                          Auditor√≠a\r\n                        </label>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-12\">\r\n                      <Button \r\n                        variant=\"info\" \r\n                        onClick={() => {\r\n                          const projectId = selectedProject?.id;\r\n                          if (!projectId) {\r\n                            console.error('No se encontr√≥ el ID del proyecto');\r\n                            showNotification('‚ùå Error: No se encontr√≥ el ID del proyecto', 'danger');\r\n                            return;\r\n                          }\r\n                          \r\n                          updateCategoriesMutation.mutate({ \r\n                            id: projectId, \r\n                            requiere_laboratorio: editingData.requiere_laboratorio || false,\r\n                            requiere_ingenieria: editingData.requiere_ingenieria || false,\r\n                            requiere_consultoria: editingData.requiere_consultoria || false,\r\n                            requiere_capacitacion: editingData.requiere_capacitacion || false,\r\n                            requiere_auditoria: editingData.requiere_auditoria || false\r\n                          }, {\r\n                            onSuccess: (data) => {\r\n                              console.log('‚úÖ Guardar Categor√≠as - √âxito:', data);\r\n                              showNotification('‚úÖ Categor√≠as guardadas correctamente!', 'success');\r\n                            },\r\n                            onError: (error) => {\r\n                              console.error('‚ùå Guardar Categor√≠as - Error:', error);\r\n                              showNotification('‚ùå Error al guardar categor√≠as', 'danger');\r\n                            }\r\n                          });\r\n                        }}\r\n                        disabled={updateCategoriesMutation.isLoading}\r\n                      >\r\n                        {updateCategoriesMutation.isLoading ? 'Guardando...' : 'Guardar Categor√≠as'}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </Tab>\r\n\r\n                {/* Tab Consultas */}\r\n                <Tab eventKey=\"queries\" title={\r\n                  <span>\r\n                    <FiMessageCircle className=\"me-1\" />\r\n                    Consultas\r\n                  </span>\r\n                }>\r\n                  <div className=\"row g-3\">\r\n                    <div className=\"col-12\">\r\n                      <div className=\"mb-3\">\r\n                        <label className=\"form-label\">Consultas y Dudas del Cliente</label>\r\n                        <textarea \r\n                          className=\"form-control\" \r\n                          rows=\"8\"\r\n                          value={editingData.queries || ''} \r\n                          onChange={(e) => setEditingData({...editingData, queries: e.target.value})}\r\n                          placeholder=\"Ingresa las consultas o dudas del cliente...\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-12\">\r\n                      <Button \r\n                        variant=\"warning\"\r\n                        onClick={() => {\r\n                          const projectId = selectedProject?.id;\r\n                          if (!projectId) {\r\n                            console.error('No se encontr√≥ el ID del proyecto');\r\n                            showNotification('‚ùå Error: No se encontr√≥ el ID del proyecto', 'danger');\r\n                            return;\r\n                          }\r\n                          \r\n                          updateQueriesMutation.mutate({ \r\n                            id: projectId, \r\n                            queries: editingData.queries || ''\r\n                          }, {\r\n                            onSuccess: (data) => {\r\n                              console.log('‚úÖ Guardar Consultas - √âxito:', data);\r\n                              showNotification('‚úÖ Consultas guardadas correctamente!', 'success');\r\n                            },\r\n                            onError: (error) => {\r\n                              console.error('‚ùå Guardar Consultas - Error:', error);\r\n                              showNotification('‚ùå Error al guardar consultas', 'danger');\r\n                            }\r\n                          });\r\n                        }}\r\n                        disabled={updateQueriesMutation.isLoading}\r\n                      >\r\n                        {updateQueriesMutation.isLoading ? 'Guardando...' : 'Guardar Consultas'}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </Tab>\r\n\r\n                {/* Tab Marcar */}\r\n                <Tab eventKey=\"mark\" title={\r\n                  <span>\r\n                    <FiCheck className=\"me-1\" />\r\n                    Marcar\r\n                  </span>\r\n                }>\r\n                  <div className=\"row g-3\">\r\n                    <div className=\"col-12\">\r\n                      <div className=\"text-center\">\r\n                        <h6 className=\"mb-3\">Marcar Proyecto</h6>\r\n                        <p className=\"text-muted mb-4\">\r\n                          Marca este proyecto para seguimiento especial o prioridad alta.\r\n                        </p>\r\n                        <div className=\"mb-3\">\r\n                          <label className=\"form-label\">Prioridad</label>\r\n                          <select \r\n                            className=\"form-select\" \r\n                            value={editingData.priority || 'normal'} \r\n                            onChange={(e) => setEditingData({...editingData, priority: e.target.value})}\r\n                          >\r\n                            <option value=\"low\">Baja</option>\r\n                            <option value=\"normal\">Normal</option>\r\n                            <option value=\"high\">Alta</option>\r\n                            <option value=\"urgent\">Urgente</option>\r\n                          </select>\r\n                        </div>\r\n                        <Button \r\n                          variant=\"success\" \r\n                          size=\"lg\"\r\n                          onClick={() => {\r\n                            const projectId = selectedProject?.id;\r\n                            if (!projectId) {\r\n                              console.error('No se encontr√≥ el ID del proyecto');\r\n                              showNotification('‚ùå Error: No se encontr√≥ el ID del proyecto', 'danger');\r\n                              return;\r\n                            }\r\n                            \r\n                            updateMarkMutation.mutate({ \r\n                              id: projectId, \r\n                              marked: !editingData.marked,\r\n                              priority: editingData.priority || 'normal'\r\n                            }, {\r\n                              onSuccess: (data) => {\r\n                                console.log('‚úÖ Marcar Proyecto - √âxito:', data);\r\n                                const action = editingData.marked ? 'desmarcado' : 'marcado';\r\n                                showNotification(`‚úÖ Proyecto ${action} correctamente!`, 'success');\r\n                              },\r\n                              onError: (error) => {\r\n                                console.error('‚ùå Marcar Proyecto - Error:', error);\r\n                                showNotification('‚ùå Error al marcar proyecto', 'danger');\r\n                              }\r\n                            });\r\n                          }}\r\n                          disabled={updateMarkMutation.isLoading}\r\n                        >\r\n                          <FiCheck className=\"me-2\" />\r\n                          {updateMarkMutation.isLoading ? 'Procesando...' : (editingData.marked ? 'Desmarcar Proyecto' : 'Marcar Proyecto')}\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Tab>\r\n\r\n                {/* Tab Adjuntos */}\r\n                <Tab eventKey=\"attachments\" title={\r\n                  <span>\r\n                    <FiFolder className=\"me-1\" />\r\n                    Adjuntos\r\n                  </span>\r\n                }>\r\n                  <div className=\"row g-3\">\r\n                    <div className=\"col-12\">\r\n                      <h6 className=\"mb-3\">Gesti√≥n de Archivos</h6>\r\n                      \r\n                      {/* Subir archivo */}\r\n                      <div className=\"card mb-4\">\r\n                        <div className=\"card-header\">\r\n                          <h6 className=\"mb-0\">Subir Nuevo Archivo</h6>\r\n                        </div>\r\n                        <div className=\"card-body\">\r\n                          <div className=\"mb-3\">\r\n                            <label className=\"form-label\">Seleccionar Archivo</label>\r\n                            <input \r\n                              type=\"file\" \r\n                              className=\"form-control\" \r\n                              onChange={handleFileSelect}\r\n                              accept=\".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.gif,.txt\"\r\n                            />\r\n                            <div className=\"form-text\">\r\n                              Formatos permitidos: PDF, DOC, DOCX, XLS, XLSX, PPT, PPTX, JPG, JPEG, PNG, GIF, TXT (m√°x. 10MB)\r\n                            </div>\r\n                          </div>\r\n                          {selectedFile && (\r\n                            <div className=\"mb-3\">\r\n                              <div className=\"alert alert-info\">\r\n                                <strong>Archivo seleccionado:</strong> {selectedFile.name} \r\n                                <br />\r\n                                <small>Tama√±o: {(selectedFile.size / 1024 / 1024).toFixed(2)} MB</small>\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          <Button \r\n                            variant=\"primary\" \r\n                            onClick={handleFileUpload}\r\n                            disabled={!selectedFile || uploadingFile}\r\n                          >\r\n                            {uploadingFile ? 'Subiendo...' : 'Subir Archivo'}\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Lista de archivos */}\r\n                      <div className=\"card\">\r\n                        <div className=\"card-header\">\r\n                          <h6 className=\"mb-0\">Archivos Adjuntos ({attachments.length})</h6>\r\n                        </div>\r\n                        <div className=\"card-body\">\r\n                          {attachments.length === 0 ? (\r\n                            <div className=\"text-center text-muted py-4\">\r\n                              <FiFolder size={48} className=\"mb-3\" />\r\n                              <p>No hay archivos adjuntos</p>\r\n                              <small>Sube archivos como cotizaciones, documentos t√©cnicos, etc.</small>\r\n                            </div>\r\n                          ) : (\r\n                            <div className=\"table-responsive\">\r\n                              <table className=\"table table-hover\">\r\n                                <thead>\r\n                                  <tr>\r\n                                    <th>Archivo</th>\r\n                                    <th>Tama√±o</th>\r\n                                    <th>Fecha</th>\r\n                                    <th>Subido por</th>\r\n                                    <th>Acciones</th>\r\n                                  </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                  {attachments.map((attachment) => (\r\n                                    <tr key={attachment.id}>\r\n                                      <td>\r\n                                        <div>\r\n                                          <strong>{attachment.original_name}</strong>\r\n                                          {attachment.description && (\r\n                                            <>\r\n                                              <br/>\r\n                                              <small className=\"text-muted\">{attachment.description}</small>\r\n                                            </>\r\n                                          )}\r\n                                        </div>\r\n                                      </td>\r\n                                      <td>\r\n                                        {attachment.file_size ? \r\n                                          `${(attachment.file_size / 1024 / 1024).toFixed(2)} MB` : \r\n                                          'N/A'\r\n                                        }\r\n                                      </td>\r\n                                      <td>\r\n                                        {new Date(attachment.created_at).toLocaleDateString()}\r\n                                      </td>\r\n                                      <td>\r\n                                        {attachment.uploaded_by_name || 'Usuario'}\r\n                                      </td>\r\n                                      <td>\r\n                                        <div className=\"btn-group btn-group-sm\">\r\n                                          <Button \r\n                                            variant=\"outline-primary\" \r\n                                            size=\"sm\"\r\n                                            onClick={() => handleFileDownload(attachment)}\r\n                                            title=\"Descargar\"\r\n                                          >\r\n                                            <FiDownload size={14} />\r\n                                          </Button>\r\n                                          <Button \r\n                                            variant=\"outline-danger\" \r\n                                            size=\"sm\"\r\n                                            onClick={() => handleFileDelete(attachment.id)}\r\n                                            title=\"Eliminar\"\r\n                                          >\r\n                                            <FiTrash2 size={14} />\r\n                                          </Button>\r\n                                        </div>\r\n                                      </td>\r\n                                    </tr>\r\n                                  ))}\r\n                                </tbody>\r\n                              </table>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Tab>\r\n              </Tabs>\r\n            )\r\n          }\r\n        ]}\r\n        onSubmit={() => setShowViewModal(false)}\r\n        submitText=\"Cerrar\"\r\n        size=\"xl\"\r\n      />\r\n      \r\n      </div>\r\n    </Container>\r\n    \r\n    {/* Toast de notificaciones - SOLUCI√ìN ALTERNATIVA */}\r\n    {showToast && (\r\n      <div \r\n        style={{\r\n          position: 'fixed',\r\n          top: '20px',\r\n          right: '20px',\r\n          zIndex: 99999,\r\n          backgroundColor: toastVariant === 'success' ? '#28a745' : '#dc3545',\r\n          color: 'white',\r\n          padding: '15px 20px',\r\n          borderRadius: '8px',\r\n          boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\r\n          minWidth: '300px',\r\n          border: 'none'\r\n        }}\r\n        onClick={() => setShowToast(false)}\r\n      >\r\n        <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>\r\n          {toastVariant === 'success' ? '‚úÖ √âxito' : '‚ùå Error'}\r\n        </div>\r\n        <div>{toastMessage}</div>\r\n      </div>\r\n    )}\r\n    </>\r\n  );\r\n};"],"names":["emptyForm","Proyectos","showModal","setShowModal","useState","editingProject","setEditingProject","deletingProject","setDeletingProject","showCategoriesModal","setShowCategoriesModal","showQueriesModal","setShowQueriesModal","showStatusModal","setShowStatusModal","showViewModal","setShowViewModal","selectedProject","setSelectedProject","activeTab","setActiveTab","editingData","setEditingData","showToast","setShowToast","toastMessage","setToastMessage","toastVariant","setToastVariant","categories","setCategories","subcategories","setSubcategories","selectedCategoryId","setSelectedCategoryId","attachments","setAttachments","uploadingFile","setUploadingFile","selectedFile","setSelectedFile","currentPage","setCurrentPage","searchTerm","setSearchTerm","selectedStatus","setSelectedStatus","selectedCompany","setSelectedCompany","selectedProjectType","setSelectedProjectType","isSearching","setIsSearching","useNavigate","selectedClient","_a","useLocation","queryClient","useQueryClient","data","isLoading","refetch","useQuery","listProjects","statsData","statsLoading","getProjectStats","useEffect","categoriesData","listCategories","error","subcategoriesData","listSubcategories","attachmentsData","listProjectAttachments","handleMutationSuccess","message","showNotification","variant","handleSearch","searchValue","handleFilter","filters","handleFileSelect","event","file","handleFileUpload","formData","uploadAttachment","handleFileDownload","attachment","downloadFile","handleFileDelete","attachmentId","deleteAttachment","projectFilterOptions","createMutation","useMutation","createProject","updateMutation","id","updateProject","updatedProject","deleteMutation","deleteProject","updateStatusMutation","updateProjectStatus","updateCategoriesMutation","updateProjectCategories","updateQueriesMutation","updateProjectQueries","updateMarkMutation","updateProjectMark","handleCreate","handleEdit","project","handleDelete","handleViewProject","initialEditingData","handleSubmit","getStatusBadge","status","config","jsx","Badge","columns","value","row","jsxs","FiMapPin","projectType","typeColor","FiHome","FiUser","formFields","_b","company","category","prev","subcategory","_c","user","_d","stats","useMemo","projects","p","Fragment","Container","PageHeader","Button","FiPlus","Row","Col","StatsCard","FiCheckCircle","FiClock","Card","FiRefreshCw","DataTable","FiEye","FiTrash2","ModalForm","Tabs","k","Tab","FiSettings","FiUsers","FiMessageCircle","FiEdit","e","projectId","numericId","FiFolder","FiCheck","action","FiDownload"],"mappings":"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"}