{"version":3,"file":"users-ZY6Usyup.js","sources":["../../src/services/users.js"],"sourcesContent":["import { apiFetch } from './api';\r\n\r\n// Obtener lista de usuarios\r\nexport const listUsers = async (params = {}) => {\r\n  const queryParams = new URLSearchParams();\r\n  if (params.page) queryParams.append('page', params.page);\r\n  if (params.limit) queryParams.append('limit', params.limit);\r\n  if (params.search) queryParams.append('search', params.search);\r\n  \r\n  const response = await apiFetch(`/api/users?${queryParams.toString()}`);\r\n  return response;\r\n};\r\n\r\n// Obtener usuario por ID\r\nexport const getUserById = async (id) => {\r\n  const response = await apiFetch(`/api/users/${id}`);\r\n  return response;\r\n};\r\n\r\n// Obtener usuarios para mapeo de auditor√≠a\r\nexport const getUsersForAudit = async () => {\r\n  try {\r\n    const response = await apiFetch('/api/users?limit=100');\r\n    return response.data || response.rows || response || [];\r\n  } catch (error) {\r\n    console.error('Error obteniendo usuarios para auditor√≠a:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Crear nuevo usuario\r\nexport const createUser = async (userData) => {\r\n  const response = await apiFetch('/api/users', {\r\n    method: 'POST',\r\n    body: JSON.stringify(userData)\r\n  });\r\n  return response;\r\n};\r\n\r\n// Actualizar usuario\r\nexport const updateUser = async (id, userData) => {\r\n  const response = await apiFetch(`/api/users/${id}`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(userData)\r\n  });\r\n  return response;\r\n};\r\n\r\n// Eliminar usuario\r\nexport const deleteUser = async (id) => {\r\n  const response = await apiFetch(`/api/users/${id}`, {\r\n    method: 'DELETE'\r\n  });\r\n  return response;\r\n};\r\n\r\n// Obtener estad√≠sticas de usuarios\r\nexport const getUserStats = async () => {\r\n  try {\r\n    console.log('üìä getUserStats - Llamando a: /api/users/stats');\r\n    const response = await apiFetch('/api/users/stats');\r\n    console.log('‚úÖ getUserStats - Respuesta recibida:', response);\r\n    return response;\r\n  } catch (error) {\r\n    console.error('‚ùå getUserStats - Error:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Resetear contrase√±a de usuario\r\nexport const resetPassword = async (userId) => {\r\n  try {\r\n    console.log('üîê resetPassword - Llamando a: /api/users/reset-password');\r\n    const response = await apiFetch(`/api/users/${userId}/reset-password`, {\r\n      method: 'POST'\r\n    });\r\n    console.log('‚úÖ resetPassword - Respuesta recibida:', response);\r\n    return response;\r\n  } catch (error) {\r\n    console.error('‚ùå resetPassword - Error:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Mapear ID de usuario a nombre real\r\nexport const mapUserIdToName = async (userId) => {\r\n  try {\r\n    if (!userId) return 'Sistema';\r\n    \r\n    // Cache local para evitar m√∫ltiples requests\r\n    if (!window.userCache) {\r\n      window.userCache = new Map();\r\n    }\r\n    \r\n    if (window.userCache.has(userId)) {\r\n      return window.userCache.get(userId);\r\n    }\r\n    \r\n    const user = await getUserById(userId);\r\n    const userName = user?.name || user?.full_name || user?.username || `Usuario ${userId}`;\r\n    \r\n    window.userCache.set(userId, userName);\r\n    return userName;\r\n  } catch (error) {\r\n    console.error('Error mapeando usuario:', error);\r\n    return `Usuario ${userId}`;\r\n  }\r\n};\r\n\r\nexport default {\r\n  listUsers,\r\n  getUserById,\r\n  getUsersForAudit,\r\n  createUser,\r\n  updateUser,\r\n  deleteUser,\r\n  getUserStats,\r\n  resetPassword,\r\n  mapUserIdToName\r\n};"],"names":["listUsers","params","queryParams","apiFetch","getUsersForAudit","response","error","createUser","userData","updateUser","id","deleteUser","getUserStats"],"mappings":"wCAGY,MAACA,EAAY,MAAOC,EAAS,KAAO,CAC9C,MAAMC,EAAc,IAAI,gBACxB,OAAID,EAAO,MAAMC,EAAY,OAAO,OAAQD,EAAO,IAAI,EACnDA,EAAO,OAAOC,EAAY,OAAO,QAASD,EAAO,KAAK,EACtDA,EAAO,QAAQC,EAAY,OAAO,SAAUD,EAAO,MAAM,EAE5C,MAAME,EAAS,cAAcD,EAAY,SAAQ,CAAE,EAAE,CAExE,EASaE,EAAmB,SAAY,CAC1C,GAAI,CACF,MAAMC,EAAW,MAAMF,EAAS,sBAAsB,EACtD,OAAOE,EAAS,MAAQA,EAAS,MAAQA,GAAY,CAAA,CACvD,OAASC,EAAO,CACd,eAAQ,MAAM,4CAA6CA,CAAK,EACzD,EACT,CACF,EAGaC,EAAa,MAAOC,GACd,MAAML,EAAS,aAAc,CAC5C,OAAQ,OACR,KAAM,KAAK,UAAUK,CAAQ,CACjC,CAAG,EAKUC,EAAa,MAAOC,EAAIF,IAClB,MAAML,EAAS,cAAcO,CAAE,GAAI,CAClD,OAAQ,MACR,KAAM,KAAK,UAAUF,CAAQ,CACjC,CAAG,EAKUG,EAAa,MAAOD,GACd,MAAMP,EAAS,cAAcO,CAAE,GAAI,CAClD,OAAQ,QACZ,CAAG,EAKUE,EAAe,SAAY,CACtC,GAAI,CACF,QAAQ,IAAI,gDAAgD,EAC5D,MAAMP,EAAW,MAAMF,EAAS,kBAAkB,EAClD,eAAQ,IAAI,uCAAwCE,CAAQ,EACrDA,CACT,OAASC,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,CACF"}