import{r as u,e as A,j as e,z as L,ak as U,Q as p,B as h,a2 as w,al as N,C as c,am as P,F as R,a0 as W}from"./index-CDayYYh0.js";import{P as K}from"./PageHeader-TwGN4X1N.js";import{l as V}from"./services-B3-ciDnT.js";import{g as B}from"./subservices-bsaXAJwY.js";import{A as q}from"./Alert-pvqi0VvY.js";import{T as Z,a as E}from"./Tabs-CRCjhJxn.js";import{C as t}from"./Card-DxGUdTXm.js";import{R as k}from"./Row-CeY1UBxE.js";import{C as n}from"./Col-Bcdl2XMD.js";import{F as i}from"./Form-CukTEVnv.js";import{I as v}from"./InputGroup-BfugZ8Gm.js";import{S as M}from"./Spinner-BFSKMpy4.js";import"./ElementChildren-DjJrrPtR.js";function he(){const[a,b]=u.useState(""),[r,f]=u.useState("all"),[l,g]=u.useState("all"),[G,Y]=u.useState("modules"),{data:$,isLoading:J}=A(["services"],()=>V(),{keepPreviousData:!0}),{data:d,isLoading:z}=A(["subservices","laboratorio",a,r,l],()=>{const s={area:"laboratorio",limit:1e3};return a&&(s.q=a),B(s)},{keepPreviousData:!0}),{data:o,isLoading:D}=A(["subservices","ingenieria",a,r,l],()=>{const s={area:"ingenieria",limit:1e3};return a&&(s.q=a),B(s)},{keepPreviousData:!0}),F=s=>{if(s==null||s==="")return"Sujeto a evaluaci√≥n";const m=typeof s=="string"?parseFloat(s):Number(s);return isNaN(m)||m===0?"Sujeto a evaluaci√≥n":`S/ ${m.toFixed(2)}`},O=s=>s==null||s===""||s==="-"?"Sin norma espec√≠fica":s,x=s=>s.startsWith("SU")?"ENSAYO EST√ÅNDAR":s.startsWith("AG")?"ENSAYO AGREGADO":s.startsWith("C")||s.startsWith("CO")||s.startsWith("DIS")||s.startsWith("COM")||s.startsWith("ABS")?"ENSAYO CONCRETO":s.startsWith("ALB")?"ENSAYO ALBA√ëILER√çA":s.startsWith("R")?"ENSAYO ROCA":s.startsWith("CEM")?"CEMENTO":s.startsWith("PAV")?"ENSAYO PAVIMENTO":s.startsWith("AS")?"ENSAYO ASFALTO":s.startsWith("MA")?"ENSAYO MEZCLA ASF√ÅLTICO":s.startsWith("E")?"EVALUACIONES ESTRUCTURALES":s.startsWith("IMP")?"IMPLEMENTACI√ìN LABORATORIO":s.startsWith("SER")?"OTROS SERVICIOS":"OTROS",S=(d==null?void 0:d.data)||[],I=(d==null?void 0:d.total)||0,H=(o==null?void 0:o.data)||[],Q=(o==null?void 0:o.total)||0;console.log("üîç Debug subservicios:",{total:I,received:S.length,data:d});const y=S.filter(s=>!(r==="fixed"&&s.precio===0||r==="evaluation"&&s.precio>0||l!=="all"&&x(s.codigo)!==l)),C=H.filter(s=>!(r==="fixed"&&s.precio===0||r==="evaluation"&&s.precio>0||l!=="all"&&x(s.codigo)!==l)),T=[...new Set(S.map(s=>x(s.codigo)))].sort(),j=()=>{b(""),f("all"),g("all")};return e.jsxs("div",{className:"fade-in",children:[e.jsx(K,{title:"Servicios",subtitle:"M√≥dulos fijos: Laboratorio e Ingenier√≠a",icon:L}),e.jsxs(q,{variant:"info",className:"mb-4",children:[e.jsx(L,{className:"me-2"}),"Los servicios est√°n limitados a dos m√≥dulos fijos: ",e.jsx("strong",{children:"Laboratorio"})," e ",e.jsx("strong",{children:"Ingenier√≠a"}),". No se pueden crear proyectos adicionales."]}),e.jsxs(Z,{activeKey:G,onSelect:s=>Y(s),className:"mb-4",id:"servicios-tabs",children:[e.jsx(E,{eventKey:"modules",title:"M√≥dulos",children:e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card h-100 border-primary",children:[e.jsxs("div",{className:"card-header bg-primary text-white d-flex align-items-center",children:[e.jsx(L,{className:"me-2"}),e.jsx("h5",{className:"mb-0 text-dark",children:"Laboratorio"})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("p",{className:"text-muted mb-3",children:"Servicios especializados en an√°lisis, pruebas y ensayos de laboratorio para diversos materiales y muestras."}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-primary",children:"Servicios Principales:"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:"‚Ä¢ An√°lisis de Suelos"}),e.jsx("li",{children:"‚Ä¢ Ensayos de Materiales"}),e.jsx("li",{children:"‚Ä¢ Pruebas de Calidad"}),e.jsx("li",{children:"‚Ä¢ An√°lisis Qu√≠micos"})]})]})]})]})}),e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card h-100 border-success",children:[e.jsxs("div",{className:"card-header bg-success text-white d-flex align-items-center",children:[e.jsx(U,{className:"me-2"}),e.jsx("h5",{className:"mb-0 text-dark",children:"Ingenier√≠a"})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("p",{className:"text-muted mb-3",children:"Servicios de consultor√≠a, dise√±o y desarrollo de proyectos de ingenier√≠a especializada."}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-success",children:"Servicios Principales:"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:"‚Ä¢ Dise√±o Estructural"}),e.jsx("li",{children:"‚Ä¢ Consultor√≠a T√©cnica"}),e.jsx("li",{children:"‚Ä¢ Proyectos de Ingenier√≠a"}),e.jsx("li",{children:"‚Ä¢ Evaluaciones T√©cnicas"})]})]})]})]})})]})}),e.jsxs(E,{eventKey:"subservices",title:"Subservicios Laboratorio",children:[e.jsxs(t,{className:"mb-4",children:[e.jsx(t.Header,{children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(p,{className:"me-2"}),"Buscar y Filtrar Subservicios de Laboratorio"]})}),e.jsx(t.Body,{children:e.jsxs(k,{children:[e.jsx(n,{md:4,children:e.jsxs(i.Group,{children:[e.jsx(i.Label,{children:"Buscar por c√≥digo o descripci√≥n:"}),e.jsxs(v,{children:[e.jsx(v.Text,{children:e.jsx(p,{})}),e.jsx(i.Control,{type:"text",placeholder:"Ej: SU04, humedad...",value:a,onChange:s=>b(s.target.value)})]})]})}),e.jsx(n,{md:3,children:e.jsxs(i.Group,{children:[e.jsx(i.Label,{children:"Filtrar por precio:"}),e.jsxs(i.Select,{value:r,onChange:s=>f(s.target.value),children:[e.jsx("option",{value:"all",children:"Todos los precios"}),e.jsx("option",{value:"fixed",children:"Precio fijo"}),e.jsx("option",{value:"evaluation",children:"Sujeto a evaluaci√≥n"})]})]})}),e.jsx(n,{md:3,children:e.jsxs(i.Group,{children:[e.jsx(i.Label,{children:"Filtrar por categor√≠a:"}),e.jsxs(i.Select,{value:l,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"all",children:"Todas las categor√≠as"}),T.map(s=>e.jsx("option",{value:s,children:s},s))]})]})}),e.jsx(n,{md:2,className:"d-flex align-items-end",children:e.jsxs(h,{variant:"outline-secondary",onClick:j,className:"w-100",children:[e.jsx(w,{className:"me-1"}),"Limpiar"]})})]})})]}),e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(N,{className:"me-2"}),"Subservicios del Laboratorio",e.jsxs(c,{bg:"info",className:"ms-2",children:[y.length," de ",I," subservicios"]})]})}),e.jsx(t.Body,{children:z?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(M,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Cargando subservicios..."})]}):y.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{width:"15%",children:"C√≥digo"}),e.jsx("th",{width:"40%",children:"Descripci√≥n"}),e.jsx("th",{width:"20%",children:"Secci√≥n"}),e.jsx("th",{width:"15%",children:"Precio"}),e.jsx("th",{width:"10%",children:"Acciones"})]})}),e.jsx("tbody",{children:y.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs(c,{bg:"primary",className:"fs-6",children:[e.jsx(P,{className:"me-1"}),s.codigo]})}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-bold text-dark mb-1",children:s.descripcion}),e.jsxs("small",{className:"text-muted",children:[e.jsx(R,{className:"me-1"}),O(s.norma)]})]}),e.jsx("td",{children:e.jsx(c,{bg:"info",className:"fs-6",children:x(s.codigo)})}),e.jsx("td",{children:e.jsxs(c,{bg:s.precio===0?"warning":"success",className:"fs-6",children:[e.jsx(W,{className:"me-1"}),F(s.precio)]})}),e.jsx("td",{children:e.jsx(h,{variant:"outline-primary",size:"sm",className:"w-100",children:"Seleccionar"})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(N,{size:48,className:"text-muted mb-3"}),e.jsx("h6",{className:"text-muted",children:"No hay subservicios disponibles"}),e.jsx("p",{className:"text-muted small",children:a||r!=="all"||l!=="all"?"No se encontraron subservicios con los filtros aplicados.":"Los subservicios del Laboratorio se cargar√°n pr√≥ximamente."}),(a||r!=="all"||l!=="all")&&e.jsx(h,{variant:"outline-primary",onClick:j,children:"Limpiar filtros"})]})})]})]}),e.jsxs(E,{eventKey:"ingenieria",title:"Subservicios Ingenier√≠a",children:[e.jsxs(t,{className:"mb-4",children:[e.jsx(t.Header,{children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(p,{className:"me-2"}),"Buscar y Filtrar Subservicios de Ingenier√≠a"]})}),e.jsx(t.Body,{children:e.jsxs(k,{children:[e.jsx(n,{md:4,children:e.jsxs(i.Group,{children:[e.jsx(i.Label,{children:"Buscar por c√≥digo o descripci√≥n:"}),e.jsxs(v,{children:[e.jsx(v.Text,{children:e.jsx(p,{})}),e.jsx(i.Control,{type:"text",placeholder:"Ej: ING01, dise√±o...",value:a,onChange:s=>b(s.target.value)})]})]})}),e.jsx(n,{md:3,children:e.jsxs(i.Group,{children:[e.jsx(i.Label,{children:"Filtrar por precio:"}),e.jsxs(i.Select,{value:r,onChange:s=>f(s.target.value),children:[e.jsx("option",{value:"all",children:"Todos los precios"}),e.jsx("option",{value:"fixed",children:"Precio fijo"}),e.jsx("option",{value:"evaluation",children:"Sujeto a evaluaci√≥n"})]})]})}),e.jsx(n,{md:3,children:e.jsxs(i.Group,{children:[e.jsx(i.Label,{children:"Filtrar por categor√≠a:"}),e.jsxs(i.Select,{value:l,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"all",children:"Todas las categor√≠as"}),T.map(s=>e.jsx("option",{value:s,children:s},s))]})]})}),e.jsx(n,{md:2,className:"d-flex align-items-end",children:e.jsxs(h,{variant:"outline-secondary",onClick:j,className:"w-100",children:[e.jsx(w,{className:"me-1"}),"Limpiar"]})})]})})]}),e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsxs("h5",{className:"mb-0",children:[e.jsx(N,{className:"me-2"}),"Subservicios de Ingenier√≠a",e.jsxs(c,{bg:"success",className:"ms-2",children:[C.length," de ",Q," subservicios"]})]})}),e.jsx(t.Body,{children:D?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(M,{animation:"border",variant:"success"}),e.jsx("p",{className:"mt-2 text-muted",children:"Cargando subservicios de Ingenier√≠a..."})]}):C.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{width:"15%",children:"C√≥digo"}),e.jsx("th",{width:"40%",children:"Descripci√≥n"}),e.jsx("th",{width:"20%",children:"Secci√≥n"}),e.jsx("th",{width:"15%",children:"Precio"}),e.jsx("th",{width:"10%",children:"Acciones"})]})}),e.jsx("tbody",{children:C.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs(c,{bg:"success",className:"fs-6",children:[e.jsx(P,{className:"me-1"}),s.codigo]})}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-bold text-dark mb-1",children:s.descripcion}),e.jsxs("small",{className:"text-muted",children:[e.jsx(R,{className:"me-1"}),O(s.norma)]})]}),e.jsx("td",{children:e.jsx(c,{bg:"info",className:"fs-6",children:x(s.codigo)})}),e.jsx("td",{children:e.jsxs(c,{bg:s.precio===0?"warning":"success",className:"fs-6",children:[e.jsx(W,{className:"me-1"}),F(s.precio)]})}),e.jsx("td",{children:e.jsx(h,{variant:"outline-success",size:"sm",className:"w-100",children:"Seleccionar"})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(N,{size:48,className:"text-muted mb-3"}),e.jsx("h6",{className:"text-muted",children:"No hay subservicios de Ingenier√≠a disponibles"}),e.jsx("p",{className:"text-muted small",children:a||r!=="all"||l!=="all"?"No se encontraron subservicios con los filtros aplicados.":"Los subservicios de Ingenier√≠a se cargar√°n pr√≥ximamente."}),(a||r!=="all"||l!=="all")&&e.jsx(h,{variant:"outline-success",onClick:j,children:"Limpiar filtros"})]})})]})]})]})]})}export{he as default};
//# sourceMappingURL=Servicios-DgWoeGPD.js.map
