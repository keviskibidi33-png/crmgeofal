{"version":3,"file":"attachments-CK8Tvz6R.js","sources":["../../src/services/attachments.js"],"sourcesContent":["import apiFetch from './api';\r\n\r\n// Servicios para adjuntos de proyectos\r\nexport const listProjectAttachments = (projectId) => {\r\n  return apiFetch(`/api/attachments/${projectId}/attachments`);\r\n};\r\n\r\nexport const getAttachmentById = (id) => {\r\n  return apiFetch(`/api/attachments/${id}`);\r\n};\r\n\r\nexport const uploadAttachment = (projectId, formData) => {\r\n  return apiFetch(`/api/attachments/${projectId}/attachments`, {\r\n    method: 'POST',\r\n    body: formData, // FormData para archivos\r\n  });\r\n};\r\n\r\nexport const updateAttachment = (id, data) => {\r\n  return apiFetch(`/api/attachments/${id}`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(data),\r\n  });\r\n};\r\n\r\nexport const deleteAttachment = (id) => {\r\n  return apiFetch(`/api/attachments/${id}`, {\r\n    method: 'DELETE',\r\n  });\r\n};\r\n\r\nexport const downloadAttachment = (id) => {\r\n  return apiFetch(`/api/attachments/${id}/download`, {\r\n    method: 'GET',\r\n  });\r\n};\r\n\r\n// FunciÃ³n para descargar archivo\r\nexport const downloadFile = async (attachment) => {\r\n  try {\r\n    const response = await fetch(`/api/attachments/${attachment.id}/download`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Error al descargar el archivo');\r\n    }\r\n\r\n    const blob = await response.blob();\r\n    const url = window.URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = attachment.original_name;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    window.URL.revokeObjectURL(url);\r\n  } catch (error) {\r\n    console.error('Error al descargar archivo:', error);\r\n    throw error;\r\n  }\r\n};"],"names":["listProjectAttachments","projectId","apiFetch","uploadAttachment","formData","deleteAttachment","id","downloadFile","attachment","response","blob","url","link","error"],"mappings":"wCAGY,MAACA,EAA0BC,GAC9BC,EAAS,oBAAoBD,CAAS,cAAc,EAOhDE,EAAmB,CAACF,EAAWG,IACnCF,EAAS,oBAAoBD,CAAS,eAAgB,CAC3D,OAAQ,OACR,KAAMG,CACV,CAAG,EAUUC,EAAoBC,GACxBJ,EAAS,oBAAoBI,CAAE,GAAI,CACxC,OAAQ,QACZ,CAAG,EAUUC,EAAe,MAAOC,GAAe,CAChD,GAAI,CACF,MAAMC,EAAW,MAAM,MAAM,oBAAoBD,EAAW,EAAE,YAAa,CACzE,OAAQ,MACR,QAAS,CACP,cAAiB,UAAU,aAAa,QAAQ,OAAO,CAAC,EAChE,CACA,CAAK,EAED,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,+BAA+B,EAGjD,MAAMC,EAAO,MAAMD,EAAS,OACtBE,EAAM,OAAO,IAAI,gBAAgBD,CAAI,EACrCE,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAOD,EACZC,EAAK,SAAWJ,EAAW,cAC3B,SAAS,KAAK,YAAYI,CAAI,EAC9BA,EAAK,MAAK,EACV,SAAS,KAAK,YAAYA,CAAI,EAC9B,OAAO,IAAI,gBAAgBD,CAAG,CAChC,OAASE,EAAO,CACd,cAAQ,MAAM,8BAA+BA,CAAK,EAC5CA,CACR,CACF"}