{"version":3,"file":"CotizacionNuevaLEM-C8v0xE6y.js","sources":["../../src/components/CompanyProjectPicker.jsx","../../src/pages/CotizacionNuevaLEM.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { listCompanies } from '../services/companies';\r\nimport { createProject } from '../services/projects';\r\n\r\n// Lightweight picker: select existing company and define minimal project data\r\nexport default function CompanyProjectPicker({ value, onChange }) {\r\n  const [companies, setCompanies] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [form, setForm] = useState({ company_id: '', project_name: '', location: '' });\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        const res = await listCompanies({ page: 1, limit: 50 });\r\n        const data = Array.isArray(res?.data) ? res.data : res; // backend returns {data,total}\r\n        setCompanies(data || []);\r\n      } catch (e) {\r\n        setError('No se pudo cargar empresas');\r\n      } finally { setLoading(false); }\r\n    })();\r\n  }, []);\r\n\r\n  const selectedCompany = useMemo(() => companies.find(c => String(c.id) === String(form.company_id)), [companies, form.company_id]);\r\n\r\n  useEffect(() => {\r\n    if (typeof onChange === 'function') {\r\n      onChange({\r\n        company_id: form.company_id ? Number(form.company_id) : null,\r\n        company: selectedCompany || null,\r\n        project_name: form.project_name,\r\n        location: form.location,\r\n      });\r\n    }\r\n  }, [form, selectedCompany, onChange]);\r\n\r\n  const createQuickProject = async () => {\r\n    if (!form.company_id || !form.project_name) return;\r\n    try {\r\n      const payload = { company_id: Number(form.company_id), name: form.project_name, location: form.location };\r\n      const prj = await createProject(payload);\r\n      // bubble up created project id\r\n      if (typeof onChange === 'function') onChange({ ...value, project_id: prj.id, project: prj });\r\n    } catch (e) {\r\n      setError(e.message || 'No se pudo crear proyecto');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"border rounded p-3\">\r\n      <h6>Cliente y Proyecto</h6>\r\n      {error && <div className=\"alert alert-warning py-1 my-2\">{error}</div>}\r\n      <div className=\"row g-2 align-items-end\">\r\n        <div className=\"col-md-4\">\r\n          <label className=\"form-label\">Cliente</label>\r\n          <select className=\"form-select\" value={form.company_id} disabled={loading}\r\n                  onChange={(e)=>setForm({ ...form, company_id: e.target.value })}>\r\n            <option value=\"\">Seleccione...</option>\r\n            {companies.map(c => (\r\n              <option key={c.id} value={c.id}>{c.name} {c.ruc ? `(RUC ${c.ruc})` : ''}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"col-md-4\">\r\n          <label className=\"form-label\">Nombre del proyecto</label>\r\n          <input className=\"form-control\" value={form.project_name}\r\n                 onChange={e=>setForm({ ...form, project_name: e.target.value })}\r\n                 placeholder=\"Ej. Control de calidad de mezclas\" />\r\n        </div>\r\n        <div className=\"col-md-3\">\r\n          <label className=\"form-label\">Ubicación</label>\r\n          <input className=\"form-control\" value={form.location}\r\n                 onChange={e=>setForm({ ...form, location: e.target.value })} />\r\n        </div>\r\n        <div className=\"col-md-1 d-grid\">\r\n          <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={createQuickProject}\r\n                  disabled={!form.company_id || !form.project_name}>Crear</button>\r\n        </div>\r\n      </div>\r\n      {selectedCompany && (\r\n        <div className=\"small text-muted mt-2\">\r\n          Contacto: {selectedCompany.contact_name} · Tel: {selectedCompany.phone} · Email: {selectedCompany.email}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useMemo, useState } from 'react';\r\nimport ModuloBase from '../components/ModuloBase';\r\nimport { listVariants } from '../services/quoteVariants';\r\nimport { createQuote, addQuoteItem } from '../services/quotes';\r\nimport CompanyProjectPicker from '../components/CompanyProjectPicker';\r\n\r\n// Plantilla de creación de cotización para Laboratorio (LEM)\r\n// Requisitos clave cubiertos:\r\n// - Datos fijos del cliente y del proyecto\r\n// - Datos de la cotización (fechas, comercial)\r\n// - Tabla de ítems (código, descripción, norma, precio unitario, cantidad, parcial)\r\n// - Selección de variante (condiciones predefinidas)\r\n// - Condiciones de pago (adelantado/50%/crédito) y aceptación\r\n// - Generación de nombre de archivo sugerido (no genera PDF aún)\r\n\r\nconst emptyClient = {\r\n  company_name: '', ruc: '', contact_name: '', contact_phone: '', contact_email: '',\r\n  project_location: '', project_name: '', service_name: '',\r\n};\r\n\r\nconst emptyQuote = {\r\n  request_date: '', issue_date: '', commercial_name: '', payment_terms: 'adelantado', acceptance: false, reference: '', igv: true,\r\n};\r\n\r\nconst emptyItem = { code: '', description: '', norm: '', unit_price: 0, quantity: 1 };\r\n\r\nfunction computePartial(item) {\r\n  const u = Number(item.unit_price || 0);\r\n  const q = Number(item.quantity || 0);\r\n  return Number((u * q).toFixed(2));\r\n}\r\n\r\nfunction suggestedFileName(seq = 'xxx-XX', client = '') {\r\n  const clientName = (client || '').toUpperCase().trim() || 'NOMBRE DEL CLIENTE';\r\n  return `Cotización ${seq} LEM-GEOFAL-${clientName}`;\r\n}\r\n\r\nconst CotizacionNuevaLEM = () => {\r\n  const [variants, setVariants] = useState([]);\r\n  const [variantId, setVariantId] = useState('');\r\n  const [variantVisual, setVariantVisual] = useState(false);\r\n  const [client, setClient] = useState(emptyClient);\r\n  const [selection, setSelection] = useState({ company_id: null, project_id: null, company: null, project: null });\r\n  const [quote, setQuote] = useState(emptyQuote);\r\n  const [items, setItems] = useState([{ ...emptyItem }]);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const v = await listVariants({ active: true });\r\n        setVariants(v || []);\r\n      } catch (e) {\r\n        // ignore load error\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const subtotal = useMemo(() => items.reduce((acc, it) => acc + computePartial(it), 0), [items]);\r\n  const igvAmount = useMemo(() => quote.igv ? Number((subtotal * 0.18).toFixed(2)) : 0, [subtotal, quote.igv]);\r\n  const total = useMemo(() => Number((subtotal + igvAmount).toFixed(2)), [subtotal, igvAmount]);\r\n\r\n  const onAddItem = () => setItems([...items, { ...emptyItem }]);\r\n  const onRemoveItem = (idx) => setItems(items.filter((_, i) => i !== idx));\r\n  const onChangeItem = (idx, patch) => setItems(items.map((it, i) => (i === idx ? { ...it, ...patch } : it)));\r\n\r\n  // Autocompletar campos desde la variante seleccionada\r\n  useEffect(() => {\r\n    if (!variantId) return;\r\n    const v = (variants || []).find(x => String(x.id) === String(variantId));\r\n    if (!v) return;\r\n    const c = v.conditions || {};\r\n    setQuote(prev => ({\r\n      ...prev,\r\n      payment_terms: c.default_payment_terms || prev.payment_terms,\r\n      acceptance: typeof c.default_acceptance === 'boolean' ? c.default_acceptance : prev.acceptance,\r\n      igv: typeof c.default_igv === 'boolean' ? c.default_igv : prev.igv,\r\n      reference: c.default_reference || prev.reference,\r\n    }));\r\n    if (Array.isArray(c.default_items) && items.length <= 1 && !items[0].code && !items[0].description && !items[0].norm) {\r\n      const mapped = c.default_items.map(di => ({\r\n        code: di.code || '',\r\n        description: di.description || '',\r\n        norm: di.norm || '',\r\n        unit_price: Number(di.unit_price || 0),\r\n        quantity: Number(di.quantity || 1),\r\n      }));\r\n      if (mapped.length) setItems(mapped);\r\n    }\r\n    if (c.default_service_name && !client.service_name) {\r\n      setClient(prev => ({ ...prev, service_name: c.default_service_name }));\r\n    }\r\n  }, [variantId]);\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n    setError('');\r\n    try {\r\n      // Construir payload de cotización base\r\n      const payload = {\r\n        project_id: selection.project?.id || selection.project_id || null,\r\n        variant_id: variantId || null,\r\n        client_contact: client.contact_name,\r\n        client_email: client.contact_email,\r\n        client_phone: client.contact_phone,\r\n        issue_date: quote.issue_date || new Date().toISOString().slice(0, 10),\r\n        subtotal,\r\n        igv: igvAmount,\r\n        total,\r\n        status: 'borrador',\r\n        // campos adicionales útiles\r\n        meta: {\r\n          customer: client,\r\n          quote,\r\n          payment_terms: quote.payment_terms,\r\n          acceptance: quote.acceptance,\r\n          reference: quote.reference,\r\n          subtotal,\r\n          igv: igvAmount,\r\n          file_name: suggestedFileName('xxx-XX', client.company_name),\r\n        }\r\n      };\r\n      const saved = await createQuote(payload);\r\n      // Añadir ítems\r\n      for (const it of items) {\r\n        await addQuoteItem({\r\n          quote_id: saved.id,\r\n          code: it.code,\r\n          description: it.description,\r\n          norm: it.norm,\r\n          unit_price: Number(it.unit_price || 0),\r\n          quantity: Number(it.quantity || 0),\r\n          partial_price: computePartial(it),\r\n        });\r\n      }\r\n      alert('Cotización creada');\r\n      // Guardar id para exportaciones\r\n      setLastSavedId(saved.id);\r\n      // Redirigir a detalle/edición en el futuro\r\n    } catch (e) {\r\n      setError(e.message || 'Error al crear cotización');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const [lastSavedId, setLastSavedId] = useState(null);\r\n\r\n  const exportFile = async (type) => {\r\n    try {\r\n      const id = lastSavedId; // en futuro usar id de ruta/estado\r\n      if (!id) return alert('Guarde la cotización antes de exportar');\r\n      const base = import.meta.env?.VITE_API_URL?.replace(/\\/$/, '') || '';\r\n      const path = `/api/quotes/${id}/export/${type}`;\r\n      const url = base && /\\/api$/i.test(base) ? `${base}${path.replace(/^\\/api/, '')}` : `${base}${path}`;\r\n      // abre en nueva pestaña para descargar\r\n      window.open(url, '_blank');\r\n    } catch (e) {\r\n      alert('No se pudo exportar');\r\n    }\r\n  };\r\n\r\n  const exportDraft = async () => {\r\n    try {\r\n      const id = lastSavedId;\r\n      if (!id) return alert('Guarde la cotización antes de generar el borrador');\r\n      const base = import.meta.env?.VITE_API_URL?.replace(/\\/$/, '') || '';\r\n      const path = `/api/quotes/${id}/export/pdf-draft`;\r\n      const url = base && /\\/api$/i.test(base) ? `${base}${path.replace(/^\\/api/, '')}` : `${base}${path}`;\r\n      window.open(url, '_blank');\r\n    } catch {\r\n      alert('No se pudo generar el borrador');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ModuloBase titulo=\"Nueva Cotización LEM\" descripcion=\"Plantilla de cotización para Laboratorio con variantes y condiciones\">\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n      <form onSubmit={onSubmit}>\r\n        <CompanyProjectPicker value={selection} onChange={setSelection} />\r\n        <div className=\"row g-3 mt-3\">\r\n          <div className=\"col-md-6\">\r\n            <h5>Datos del Cliente</h5>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Empresa</label><input className=\"form-control\" value={client.company_name} onChange={e=>setClient({...client, company_name:e.target.value})} required/></div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">R.U.C.</label><input className=\"form-control\" value={client.ruc} onChange={e=>setClient({...client, ruc:e.target.value})} /></div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Contacto</label><input className=\"form-control\" value={client.contact_name} onChange={e=>setClient({...client, contact_name:e.target.value})} required/></div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Teléfono</label><input className=\"form-control\" value={client.contact_phone} onChange={e=>setClient({...client, contact_phone:e.target.value})} /></div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Correo</label><input type=\"email\" className=\"form-control\" value={client.contact_email} onChange={e=>setClient({...client, contact_email:e.target.value})} /></div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Ubicación del proyecto</label><input className=\"form-control\" value={client.project_location} onChange={e=>setClient({...client, project_location:e.target.value})} /></div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Nombre del proyecto</label><input className=\"form-control\" value={client.project_name} onChange={e=>setClient({...client, project_name:e.target.value})} /></div>\r\n            <div className=\"mb-3\"><label className=\"form-label\">Nombre del servicio</label><input className=\"form-control\" value={client.service_name} onChange={e=>setClient({...client, service_name:e.target.value})} /></div>\r\n          </div>\r\n\r\n          <div className=\"col-md-6\">\r\n            <h5>Datos de la Cotización</h5>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Fecha de Solicitud</label><input type=\"date\" className=\"form-control\" value={quote.request_date} onChange={e=>setQuote({...quote, request_date:e.target.value})} /></div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Fecha de Emisión</label><input type=\"date\" className=\"form-control\" value={quote.issue_date} onChange={e=>setQuote({...quote, issue_date:e.target.value})} /></div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Comercial</label><input className=\"form-control\" value={quote.commercial_name} onChange={e=>setQuote({...quote, commercial_name:e.target.value})} /></div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Referencia</label><input className=\"form-control\" placeholder=\"SEGÚN LO SOLICITADO VÍA correo / llamada\" value={quote.reference} onChange={e=>setQuote({...quote, reference:e.target.value})} /></div>\r\n            <div className=\"mb-2\">\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <label className=\"form-label mb-0\">Variante</label>\r\n                <button type=\"button\" className=\"btn btn-sm btn-outline-secondary\" onClick={()=>setVariantVisual(!variantVisual)}>\r\n                  {variantVisual ? 'Ver como lista' : 'Ver con imágenes'}\r\n                </button>\r\n              </div>\r\n              {!variantVisual ? (\r\n                <select className=\"form-select mt-2\" value={variantId} onChange={(e)=>setVariantId(e.target.value)}>\r\n                  <option value=\"\">Sin variante</option>\r\n                  {(variants||[]).map(v => <option key={v.id} value={v.id}>{v.code} - {v.title}</option>)}\r\n                </select>\r\n              ) : (\r\n                <div className=\"row row-cols-2 g-2 mt-1\">\r\n                  {(variants||[]).map(v => (\r\n                    <div className=\"col\" key={v.id}>\r\n                      <button type=\"button\" className={`w-100 btn btn-outline-primary ${String(variantId)===String(v.id)?'active':''}`}\r\n                        onClick={()=>setVariantId(String(v.id))}\r\n                        title={v.title}\r\n                      >\r\n                        {v.image_url ? <img src={v.image_url} alt={v.title} style={{ maxHeight: 90, objectFit: 'contain', display:'block', margin:'0 auto 6px' }} /> : null}\r\n                        <div className=\"small\">{v.code} - {v.title}</div>\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Forma de pago</label>\r\n              <select className=\"form-select\" value={quote.payment_terms} onChange={e=>setQuote({...quote, payment_terms:e.target.value})}>\r\n                <option value=\"adelantado\">Adelantado</option>\r\n                <option value=\"50%\">Adelanto 50% y saldo previo al informe</option>\r\n                <option value=\"credito7\">Crédito 7 días con OS</option>\r\n                <option value=\"credito15\">Crédito 15 días con OS</option>\r\n                <option value=\"credito30\">Crédito 30 días con OS</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"form-check mb-2\">\r\n              <input className=\"form-check-input\" type=\"checkbox\" id=\"igv\" checked={quote.igv} onChange={e=>setQuote({...quote, igv: e.target.checked})}/>\r\n              <label className=\"form-check-label\" htmlFor=\"igv\">Aplicar IGV 18%</label>\r\n            </div>\r\n            <div className=\"form-check mb-3\">\r\n              <input className=\"form-check-input\" type=\"checkbox\" id=\"acceptance\" checked={quote.acceptance} onChange={e=>setQuote({...quote, acceptance:e.target.checked})}/>\r\n              <label className=\"form-check-label\" htmlFor=\"acceptance\">Aceptación de cotización</label>\r\n            </div>\r\n            <div className=\"mb-2\"><label className=\"form-label\">Nombre de archivo sugerido</label>\r\n              <input className=\"form-control\" value={suggestedFileName('xxx-XX', client.company_name)} readOnly />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <h5 className=\"mt-3\">Ítems</h5>\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-bordered align-middle\">\r\n            <thead>\r\n              <tr>\r\n                <th>Código/N° ensayo</th>\r\n                <th>Descripción</th>\r\n                <th>Norma</th>\r\n                <th>Unitario (S/)</th>\r\n                <th>Cantidad</th>\r\n                <th>Parcial (S/)</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {items.map((it, idx) => (\r\n                <tr key={idx}>\r\n                  <td><input className=\"form-control\" value={it.code} onChange={e=>onChangeItem(idx, { code: e.target.value })} /></td>\r\n                  <td><textarea className=\"form-control\" rows={1} value={it.description} onChange={e=>onChangeItem(idx, { description: e.target.value })} /></td>\r\n                  <td><input className=\"form-control\" value={it.norm} onChange={e=>onChangeItem(idx, { norm: e.target.value })} /></td>\r\n                  <td style={{ width: 120 }}><input type=\"number\" step=\"0.01\" className=\"form-control\" value={it.unit_price} onChange={e=>onChangeItem(idx, { unit_price: e.target.value })} /></td>\r\n                  <td style={{ width: 100 }}><input type=\"number\" className=\"form-control\" value={it.quantity} onChange={e=>onChangeItem(idx, { quantity: e.target.value })} /></td>\r\n                  <td style={{ width: 120 }}>{computePartial(it)}</td>\r\n                  <td style={{ width: 80 }}>\r\n                    <button type=\"button\" className=\"btn btn-sm btn-outline-danger\" onClick={()=>onRemoveItem(idx)} disabled={items.length===1}>-</button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <button type=\"button\" className=\"btn btn-outline-primary\" onClick={onAddItem}>Agregar ítem</button>\r\n        </div>\r\n\r\n        <div className=\"d-flex justify-content-end align-items-center gap-4 flex-wrap\">\r\n          <div className=\"text-end\">\r\n            <div>Subtotal: S/ {subtotal.toFixed(2)}</div>\r\n            <div>IGV 18%: S/ {igvAmount.toFixed(2)}</div>\r\n            <div><strong>Total: S/ {total.toFixed(2)}</strong></div>\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-success\" disabled={saving || !selection.project?.id && !selection.project_id}>{saving ? 'Guardando...' : 'Guardar borrador'}</button>\r\n          <button type=\"button\" className=\"btn btn-outline-warning\" onClick={exportDraft}>\r\n            Guardar PDF Borrador\r\n          </button>\r\n          <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={()=>exportFile('pdf')}>\r\n            Exportar PDF\r\n          </button>\r\n          <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={()=>exportFile('excel')}>\r\n            Exportar Excel\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </ModuloBase>\r\n  );\r\n};\r\n\r\nexport default CotizacionNuevaLEM;\r\n"],"names":["CompanyProjectPicker","value","onChange","companies","setCompanies","useState","loading","setLoading","form","setForm","error","setError","useEffect","res","listCompanies","data","selectedCompany","useMemo","createQuickProject","payload","prj","createProject","e","jsxs","jsx","emptyClient","emptyQuote","emptyItem","computePartial","item","u","q","suggestedFileName","seq","client","clientName","CotizacionNuevaLEM","variants","setVariants","variantId","setVariantId","variantVisual","setVariantVisual","setClient","selection","setSelection","quote","setQuote","items","setItems","saving","setSaving","v","listVariants","subtotal","acc","it","igvAmount","total","onAddItem","onRemoveItem","idx","_","i","onChangeItem","patch","x","c","prev","mapped","di","onSubmit","_a","saved","createQuote","addQuoteItem","setLastSavedId","lastSavedId","exportFile","type","id","base","path","url","exportDraft","ModuloBase"],"mappings":"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"}