{"version":3,"file":"Dashboard-HBPuZmc-.js","sources":["../../src/services/dashboard.js","../../src/pages/dashboard/Dashboard.jsx"],"sourcesContent":["import { apiFetch } from './api';\r\n\r\n// Obtener estadísticas del dashboard\r\nexport const getDashboardStats = () => {\r\n  return apiFetch('/api/dashboard/stats');\r\n};\r\n\r\nexport default {\r\n  getDashboardStats\r\n};\r\n","import React from 'react';\r\nimport { Row, Col, Card, Button, Container } from 'react-bootstrap';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { \r\n  FiUsers, FiHome, FiFileText, FiMessageSquare, \r\n  FiArrowUp, FiDollarSign, FiCalendar, FiCheckCircle,\r\n  FiArrowDown, FiEye, FiTrendingUp, FiActivity\r\n} from 'react-icons/fi';\r\nimport { useQuery, useQueryClient } from 'react-query';\r\nimport PageHeader from '../../components/common/PageHeader';\r\nimport StatsCard from '../../components/common/StatsCard';\r\nimport { listUsers } from '../../services/users';\r\nimport { listProjects } from '../../services/projects';\r\nimport { listQuotes } from '../../services/quotes';\r\nimport { listTickets } from '../../services/tickets';\r\nimport { getDashboardStats } from '../../services/dashboard';\r\nimport { useActivities } from '../../hooks/useActivities';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nconst Dashboard = () => {\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  \r\n  // Obtener estadísticas del dashboard\r\n  const { data: dashboardStats, isLoading: statsLoading } = useQuery(\r\n    ['dashboardStats'],\r\n    getDashboardStats,\r\n    {\r\n      refetchInterval: 300000, // 5 minutos\r\n      staleTime: 60000 // 1 minuto\r\n    }\r\n  );\r\n  \r\n  // Obtener actividades recientes con hook optimizado\r\n  const { \r\n    data: activitiesData, \r\n    isLoading: activitiesLoading,\r\n    hasActivities,\r\n    activitiesCount,\r\n    refreshActivities\r\n  } = useActivities({ \r\n    limit: 4,\r\n    refetchInterval: 300000, // 5 minutos\r\n    staleTime: 60000, // 1 minuto\r\n    userId: user?.id, // Filtrar por usuario actual\r\n    role: user?.role // Filtrar por rol\r\n  });\r\n\r\n  // Usar estadísticas reales del backend\r\n  const stats = dashboardStats?.stats || {\r\n    totalUsers: 0,\r\n    totalProjects: 0,\r\n    totalQuotes: 0,\r\n    totalTickets: 0,\r\n    activeProjects: 0,\r\n    pendingQuotes: 0,\r\n    openTickets: 0,\r\n    completedProjects: 0,\r\n    changePercentages: {\r\n      users: 0,\r\n      projects: 0,\r\n      quotes: 0,\r\n      tickets: 0\r\n    }\r\n  };\r\n\r\n  // Función para formatear tiempo de actividad\r\n  const formatActivityTime = (createdAt) => {\r\n    const now = new Date();\r\n    const activityTime = new Date(createdAt);\r\n    const diffInMinutes = Math.floor((now - activityTime) / (1000 * 60));\r\n    \r\n    if (diffInMinutes < 1) return 'Ahora';\r\n    if (diffInMinutes < 60) return `Hace ${diffInMinutes} min`;\r\n    if (diffInMinutes < 1440) return `Hace ${Math.floor(diffInMinutes / 60)} h`;\r\n    return `Hace ${Math.floor(diffInMinutes / 1440)} días`;\r\n  };\r\n\r\n  // Función para obtener icono según tipo de actividad\r\n  const getActivityIcon = (type) => {\r\n    const icons = {\r\n      quote_created: FiFileText,\r\n      quote_assigned: FiFileText,\r\n      quote_approved: FiCheckCircle,\r\n      quote_rejected: FiX,\r\n      quote_completed: FiCheckCircle,\r\n      project_created: FiHome,\r\n      project_assigned: FiHome,\r\n      project_started: FiArrowUp,\r\n      project_completed: FiCheckCircle,\r\n      project_delayed: FiClock,\r\n      ticket_created: FiMessageSquare,\r\n      ticket_assigned: FiMessageSquare,\r\n      ticket_resolved: FiCheckCircle,\r\n      ticket_escalated: FiAlertTriangle,\r\n      evidence_uploaded: FiPaperclip,\r\n      evidence_approved: FiCheckCircle,\r\n      evidence_rejected: FiX,\r\n      user_registered: FiUsers,\r\n      user_assigned: FiUsers,\r\n      user_role_changed: FiSettings,\r\n      client_created: FiUser,\r\n      client_updated: FiUser,\r\n      system_maintenance: FiSettings,\r\n      system_update: FiSettings\r\n    };\r\n    return icons[type] || FiActivity;\r\n  };\r\n\r\n  // Función para obtener color según tipo de actividad\r\n  const getActivityColor = (type) => {\r\n    const colors = {\r\n      quote_created: 'primary',\r\n      quote_assigned: 'primary',\r\n      quote_approved: 'success',\r\n      quote_rejected: 'danger',\r\n      quote_completed: 'success',\r\n      project_created: 'info',\r\n      project_assigned: 'info',\r\n      project_started: 'info',\r\n      project_completed: 'success',\r\n      project_delayed: 'warning',\r\n      ticket_created: 'warning',\r\n      ticket_assigned: 'warning',\r\n      ticket_resolved: 'success',\r\n      ticket_escalated: 'danger',\r\n      evidence_uploaded: 'secondary',\r\n      evidence_approved: 'success',\r\n      evidence_rejected: 'danger',\r\n      user_registered: 'info',\r\n      user_assigned: 'info',\r\n      user_role_changed: 'secondary',\r\n      client_created: 'primary',\r\n      client_updated: 'primary',\r\n      system_maintenance: 'secondary',\r\n      system_update: 'secondary'\r\n    };\r\n    return colors[type] || 'secondary';\r\n  };\r\n\r\n  // Usar datos reales o fallback a datos de ejemplo\r\n  const recentActivities = activitiesData?.activities?.map(activity => ({\r\n    id: activity.id,\r\n    type: activity.type,\r\n    title: activity.title,\r\n    description: activity.description,\r\n    time: formatActivityTime(activity.created_at),\r\n    icon: getActivityIcon(activity.type),\r\n    color: getActivityColor(activity.type),\r\n    user: activity.user_name\r\n  })) || [\r\n    {\r\n      id: 1,\r\n      type: 'quote_created',\r\n      title: 'Nueva cotización creada',\r\n      description: 'Cotización #2024-001 para Proyecto ABC',\r\n      time: 'Hace 2 horas',\r\n      icon: FiFileText,\r\n      color: 'primary'\r\n    },\r\n    {\r\n      id: 2,\r\n      type: 'project_completed',\r\n      title: 'Proyecto completado',\r\n      description: 'Proyecto XYZ finalizado exitosamente',\r\n      time: 'Hace 4 horas',\r\n      icon: FiCheckCircle,\r\n      color: 'success'\r\n    },\r\n    {\r\n      id: 3,\r\n      type: 'ticket_created',\r\n      title: 'Nuevo ticket de soporte',\r\n      description: 'Solicitud de soporte técnico',\r\n      time: 'Hace 6 horas',\r\n      icon: FiMessageSquare,\r\n      color: 'warning'\r\n    },\r\n    {\r\n      id: 4,\r\n      type: 'user_registered',\r\n      title: 'Usuario registrado',\r\n      description: 'Nuevo usuario agregado al sistema',\r\n      time: 'Hace 8 horas',\r\n      icon: FiUsers,\r\n      color: 'info'\r\n    }\r\n  ];\r\n\r\n  const quickActions = [\r\n    {\r\n      title: 'Nuevo Proyecto',\r\n      description: 'Crear un nuevo proyecto',\r\n      icon: FiHome,\r\n      color: 'primary',\r\n      onClick: () => navigate('/proyectos')\r\n    },\r\n    {\r\n      title: 'Nueva Cotización',\r\n      description: 'Generar cotización',\r\n      icon: FiFileText,\r\n      color: 'success',\r\n      onClick: () => navigate('/cotizaciones/nueva/lem')\r\n    },\r\n    {\r\n      title: 'Nuevo Ticket',\r\n      description: 'Crear ticket de soporte',\r\n      icon: FiMessageSquare,\r\n      color: 'warning',\r\n      onClick: () => navigate('/tickets')\r\n    },\r\n    {\r\n      title: 'Ver Reportes',\r\n      description: 'Analizar datos del sistema',\r\n      icon: FiArrowUp,\r\n      color: 'info',\r\n      onClick: () => navigate('/reportes')\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"fade-in\">\r\n      <PageHeader\r\n        title=\"Dashboard\"\r\n        subtitle=\"Resumen general del sistema CRM GeoFal\"\r\n        icon={FiArrowUp}\r\n      />\r\n\r\n      {/* Estadísticas principales */}\r\n      <Row className=\"mb-4\">\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Total Usuarios\"\r\n            value={stats.totalUsers}\r\n            icon={FiUsers}\r\n            color=\"primary\"\r\n            trend={stats.changePercentages?.users || 0}\r\n            subtitle=\"Usuarios activos\"\r\n            loading={statsLoading}\r\n          />\r\n        </Col>\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Proyectos Activos\"\r\n            value={stats.activeProjects}\r\n            icon={FiHome}\r\n            color=\"success\"\r\n            trend={stats.changePercentages?.projects || 0}\r\n            subtitle={`${stats.totalProjects} proyectos totales`}\r\n            loading={statsLoading}\r\n          />\r\n        </Col>\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Cotizaciones Pendientes\"\r\n            value={stats.pendingQuotes}\r\n            icon={FiFileText}\r\n            color=\"warning\"\r\n            trend={stats.changePercentages?.quotes || 0}\r\n            subtitle={`${stats.totalQuotes} cotizaciones totales`}\r\n            loading={statsLoading}\r\n          />\r\n        </Col>\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Tickets Abiertos\"\r\n            value={stats.openTickets}\r\n            icon={FiMessageSquare}\r\n            color=\"danger\"\r\n            trend={stats.changePercentages?.tickets || 0}\r\n            subtitle={`${stats.totalTickets} tickets totales`}\r\n            loading={statsLoading}\r\n          />\r\n        </Col>\r\n      </Row>\r\n\r\n      <Row>\r\n        {/* Actividades recientes */}\r\n        <Col lg={8} className=\"mb-4\">\r\n          <Card className=\"h-100\">\r\n            <Card.Header className=\"d-flex justify-content-between align-items-center\">\r\n              <div>\r\n              <h5 className=\"mb-0\">Actividades Recientes</h5>\r\n                {activitiesCount > 0 && (\r\n                  <small className=\"text-muted\">\r\n                    {activitiesCount} actividad{activitiesCount !== 1 ? 'es' : ''} • Actualizado automáticamente\r\n                  </small>\r\n                )}\r\n                {user?.role !== 'admin' && (\r\n                  <small className=\"text-info d-block\">\r\n                    Mostrando solo actividades relevantes a tu rol: {user?.role}\r\n                  </small>\r\n                )}\r\n              </div>\r\n              <div className=\"d-flex gap-2\">\r\n                <Button \r\n                  variant=\"outline-secondary\" \r\n                  size=\"sm\"\r\n                  onClick={refreshActivities}\r\n                  disabled={activitiesLoading}\r\n                  title=\"Actualizar actividades\"\r\n                  className=\"refresh-btn\"\r\n                >\r\n                  <FiActivity className={activitiesLoading ? 'spinning' : ''} />\r\n                </Button>\r\n                {user?.role === 'admin' && (\r\n                  <Button \r\n                    variant=\"outline-primary\" \r\n                    size=\"sm\"\r\n                    onClick={() => navigate('/actividades')}\r\n                    title=\"Ver todas las actividades (Solo Admin)\"\r\n                  >\r\n                <FiEye className=\"me-1\" />\r\n                Ver todas\r\n              </Button>\r\n                )}\r\n              </div>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              {activitiesLoading ? (\r\n                <div className=\"text-center py-4\">\r\n                  <div className=\"spinner-border text-primary\" role=\"status\">\r\n                    <span className=\"visually-hidden\">Cargando actividades...</span>\r\n                  </div>\r\n                  <p className=\"mt-2 text-muted\">Cargando actividades recientes...</p>\r\n                </div>\r\n              ) : recentActivities.length === 0 ? (\r\n                <div className=\"activity-empty-state text-center\">\r\n                  <div className=\"mb-3\">\r\n                    <FiActivity size={48} className=\"text-muted icon\" />\r\n                  </div>\r\n                  <h6 className=\"text-muted mb-2\">No hay actividades recientes</h6>\r\n                  <p className=\"text-muted small mb-3\">\r\n                    {user?.role === 'admin' \r\n                      ? 'Aún no hay actividades registradas en el sistema.'\r\n                      : 'No hay actividades relevantes a tu rol en este momento.'\r\n                    }\r\n                  </p>\r\n                  <Button \r\n                    variant=\"outline-primary\" \r\n                    size=\"sm\"\r\n                    onClick={refreshActivities}\r\n                    className=\"mt-2\"\r\n                  >\r\n                    <FiActivity className=\"me-1\" />\r\n                    Actualizar\r\n                  </Button>\r\n                </div>\r\n              ) : (\r\n              <div className=\"activity-list\">\r\n                {recentActivities.map((activity) => {\r\n                  const Icon = activity.icon;\r\n                  return (\r\n                    <div key={activity.id} className=\"activity-item d-flex align-items-start mb-3\">\r\n                      <div className={`activity-icon bg-${activity.color} bg-opacity-10 rounded-circle p-2 me-3`}>\r\n                        <Icon size={20} className={`text-${activity.color}`} />\r\n                      </div>\r\n                      <div className=\"flex-grow-1\">\r\n                        <h6 className=\"mb-1\">{activity.title}</h6>\r\n                        <p className=\"text-muted mb-1 small\">{activity.description}</p>\r\n                          <div className=\"d-flex justify-content-between align-items-center\">\r\n                        <small className=\"text-muted\">{activity.time}</small>\r\n                            {activity.user && (\r\n                              <small className=\"text-muted\">por {activity.user}</small>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              )}\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n\r\n        {/* Acciones rápidas */}\r\n        <Col lg={4} className=\"mb-4\">\r\n          <Card className=\"h-100\">\r\n            <Card.Header>\r\n              <h5 className=\"mb-0\">Acciones Rápidas</h5>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              <div className=\"quick-actions\">\r\n                {quickActions.map((action, index) => {\r\n                  const Icon = action.icon;\r\n                  return (\r\n                    <Button\r\n                      key={index}\r\n                      variant={`outline-${action.color}`}\r\n                      className=\"w-100 mb-3 d-flex align-items-center justify-content-start\"\r\n                      onClick={action.onClick}\r\n                    >\r\n                      <div className={`me-3 bg-${action.color} bg-opacity-10 rounded-circle p-2`}>\r\n                        <Icon size={20} className={`text-${action.color}`} />\r\n                      </div>\r\n                      <div className=\"text-start\">\r\n                        <div className=\"fw-medium\">{action.title}</div>\r\n                        <small className=\"text-muted\">{action.description}</small>\r\n                      </div>\r\n                    </Button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Resumen de rendimiento */}\r\n      <Row>\r\n        <Col lg={6} className=\"mb-4\">\r\n          <Card>\r\n            <Card.Header>\r\n              <h5 className=\"mb-0\">Resumen de Proyectos</h5>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                <span>Proyectos Completados</span>\r\n                <span className=\"fw-bold text-success\">{stats.completedProjects}</span>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                <span>Proyectos Activos</span>\r\n                <span className=\"fw-bold text-primary\">{stats.activeProjects}</span>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <span>Total Proyectos</span>\r\n                <span className=\"fw-bold\">{stats.totalProjects}</span>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n\r\n        <Col lg={6} className=\"mb-4\">\r\n          <Card>\r\n            <Card.Header>\r\n              <h5 className=\"mb-0\">Estado del Sistema</h5>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                <span>Usuarios Online</span>\r\n                <span className=\"fw-bold text-success\">\r\n                  <FiArrowUp className=\"me-1\" />\r\n                  {Math.floor(stats.totalUsers * 0.3)}\r\n                </span>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                <span>Cotizaciones Este Mes</span>\r\n                <span className=\"fw-bold text-primary\">\r\n                  <FiArrowUp className=\"me-1\" />\r\n                  {Math.floor(stats.totalQuotes * 0.4)}\r\n                </span>\r\n              </div>\r\n              <div className=\"d-flex justify-content-between align-items-center\">\r\n                <span>Tickets Resueltos</span>\r\n                <span className=\"fw-bold text-success\">\r\n                  <FiArrowUp className=\"me-1\" />\r\n                  {Math.floor(stats.totalTickets * 0.7)}\r\n                </span>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;"],"names":["getDashboardStats","apiFetch","Dashboard","navigate","useNavigate","user","useAuth","dashboardStats","statsLoading","useQuery","activitiesData","activitiesLoading","activitiesCount","refreshActivities","useActivities","stats","formatActivityTime","createdAt","now","activityTime","diffInMinutes","getActivityIcon","type","FiFileText","FiCheckCircle","FiHome","FiArrowUp","FiMessageSquare","FiUsers","FiActivity","getActivityColor","recentActivities","_a","activity","quickActions","jsxs","jsx","PageHeader","Row","Col","StatsCard","_b","_c","_d","_e","Card","Button","FiEye","Icon","action","index"],"mappings":"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"}