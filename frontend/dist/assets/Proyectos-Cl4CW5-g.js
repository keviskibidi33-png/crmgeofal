import{r as o,e as ue,j as e,J as vs,v as b,B as g,K as M,L as U,M as ke,N as fs,s as D,k as H,b as ys,o as Ke,f as O,q as G,g as He,O as Ss,u as _s,P as Cs,c as ws,n as Q,C as Fs,Q as Ue,t as ks,m as Ps,A as Ge,S as Ve,T as Es,z as qs,U as re,V as Ts,W as Qe,F as Oe,X as As,H as zs}from"./index-CJDD9_Aw.js";import{P as Is}from"./PageHeader-Cfye0oPO.js";import{D as Ms}from"./DataTable-CI3KJtBU.js";import{M as _e}from"./ModalForm-KtSltT6a.js";import{S as xe}from"./StatsCard-DzydegCt.js";import{C as Ce}from"./ConfirmModal-C4J0KUay.js";import{c as Ls,u as Ds,d as Bs,a as Rs,b as $s,e as Hs,l as Us,g as Gs}from"./projects-DVgYDsHe.js";import{l as we,u as Vs,d as Qs,a as Os}from"./attachments-CWVzo_j9.js";import{l as Ws,a as Ks}from"./services-AN-Lr0MR.js";import{C as d,R as L}from"./Row-BGooJhRW.js";import{F as m}from"./Form-FBPQ7LgU.js";import{S as We}from"./Spinner-BVQsrHFz.js";import{C as v}from"./Col-DkPevymr.js";import{A as je}from"./Alert-Cn54xJZ3.js";import{P as Xs}from"./ProgressBar-BLRWxvn-.js";import{T as Js,a as Fe}from"./Tabs-4ARJRbHI.js";import"./InputGroup-CY9SaoEq.js";import"./Table-ME9p9tbt.js";/* empty css                     */import"./Modal-BJZ3bxhN.js";import"./ElementChildren-B01Kjy_s.js";function Ys({selectedServices:N=[],onServicesChange:f}){const[j,S]=o.useState(""),[l,C]=o.useState(null),[u,k]=o.useState([]),{data:h,isLoading:A}=ue(["services"],()=>Ws({}),{staleTime:5*60*1e3,cacheTime:10*60*1e3}),{data:x,isLoading:W}=ue(["subservices",l==null?void 0:l.id],()=>l?Ks({service_id:l.id}):null,{enabled:!!l,staleTime:5*60*1e3,cacheTime:10*60*1e3}),K=(h==null?void 0:h.data)||(h==null?void 0:h.rows)||[],B=(x==null?void 0:x.data)||(x==null?void 0:x.rows)||[],R=K.filter(r=>{var c,t;return((c=r.name)==null?void 0:c.toLowerCase().includes(j.toLowerCase()))||((t=r.description)==null?void 0:t.toLowerCase().includes(j.toLowerCase()))}),w=r=>{if(!N.some(t=>t.ensayo.id===r.id)){if(N.length>=5){alert("MÃ¡ximo 5 servicios pueden ser seleccionados");return}C(r),k([])}},p=r=>{const c=u.some(t=>t.id===r.id);k(c?t=>t.filter(P=>P.id!==r.id):t=>[...t,r])},q=()=>{if(l&&u.length>0){const r={ensayo:l,subservices:u,total:u.reduce((c,t)=>c+(t.precio||0),0)};f([...N,r]),C(null),k([])}},X=r=>{const c=N.filter((t,P)=>P!==r);f(c)};return e.jsxs("div",{className:"service-selection",children:[e.jsxs(d,{className:"mb-4",children:[e.jsx(d.Header,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"mb-0",children:[e.jsx(vs,{className:"me-2"}),"SelecciÃ³n de Servicios"]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs(b,{bg:"info",children:[N.length,"/5 seleccionados"]}),N.length>0&&e.jsxs(g,{variant:"outline-danger",size:"sm",onClick:()=>f([]),children:[e.jsx(M,{size:12,className:"me-1"}),"Limpiar"]})]})]})}),e.jsxs(d.Body,{children:[e.jsx("div",{className:"mb-3",children:e.jsx(m.Control,{type:"text",placeholder:"Buscar servicios...",value:j,onChange:r=>S(r.target.value)})}),A?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(We,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Cargando servicios..."})]}):e.jsx(L,{className:"g-3",children:R.map(r=>{const c=N.some(P=>P.ensayo.id===r.id),t=(l==null?void 0:l.id)===r.id;return e.jsx(v,{md:6,lg:4,children:e.jsx(d,{className:`h-100 cursor-pointer ${c?"border-success":t?"border-primary":""} ${c?"bg-light":""}`,onClick:()=>w(r),children:e.jsxs(d.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[e.jsx("h6",{className:"mb-1",children:r.name}),c?e.jsx(b,{bg:"success",children:e.jsx(U,{size:14})}):t?e.jsx(b,{bg:"primary",children:e.jsx(U,{size:14})}):null]}),e.jsx("p",{className:"text-muted small mb-2",children:r.description||"Sin descripciÃ³n"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx(ke,{className:"me-1",size:12}),r.norma||"N/A"]}),e.jsxs(b,{bg:r.subservices_count>0?"info":"secondary",children:[r.subservices_count||0," subservicios"]})]})]})})},r.id)})}),l&&e.jsxs(d,{className:"mt-4 border-primary",children:[e.jsx(d.Header,{children:e.jsxs("h6",{className:"mb-0",children:["Subservicios de: ",l.name]})}),e.jsxs(d.Body,{children:[W?e.jsxs("div",{className:"text-center py-3",children:[e.jsx(We,{animation:"border",size:"sm",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted small",children:"Cargando subservicios..."})]}):B.length>0?e.jsx(L,{className:"g-2",children:B.map(r=>{const c=u.some(t=>t.id===r.id);return e.jsx(v,{md:6,lg:4,children:e.jsx(d,{className:`h-100 cursor-pointer ${c?"border-success":""}`,onClick:()=>p(r),children:e.jsxs(d.Body,{className:"p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[e.jsx("h6",{className:"mb-1 small",children:r.codigo}),c&&e.jsx(b,{bg:"success",children:e.jsx(U,{size:12})})]}),e.jsx("p",{className:"text-muted small mb-2",children:r.descripcion}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("small",{className:"text-muted",children:r.norma||"-"}),e.jsxs(b,{bg:r.precio>0?"success":"warning",children:[e.jsx(fs,{className:"me-1",size:10}),r.precio>0?`S/ ${r.precio}`:"Sujeto a evaluaciÃ³n"]})]})]})})},r.id)})}):e.jsx(je,{variant:"info",className:"mb-0",children:"No hay subservicios disponibles para este servicio."}),u.length>0&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs(g,{variant:"success",onClick:q,disabled:u.length===0,children:[e.jsx(U,{className:"me-1"}),"Agregar ",u.length," subservicio(s) seleccionado(s)"]})})]})]})]})]}),N.length>0&&e.jsxs(d,{className:"border-success",children:[e.jsx(d.Header,{children:e.jsxs("h6",{className:"mb-0 text-success",children:[e.jsx(U,{className:"me-2"}),"Servicios Seleccionados (",N.length,")"]})}),e.jsx(d.Body,{children:N.map((r,c)=>e.jsx(d,{className:"mb-3",children:e.jsx(d.Body,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"mb-1",children:r.ensayo.name}),e.jsx("p",{className:"text-muted small mb-2",children:r.ensayo.description}),e.jsx("div",{className:"d-flex flex-wrap gap-1",children:r.subservices.map((t,P)=>e.jsx(b,{bg:"info",className:"me-1",children:t.codigo},P))})]}),e.jsxs("div",{className:"text-end",children:[e.jsxs("h6",{className:"text-success mb-1",children:["S/ ",r.total.toFixed(2)]}),e.jsx(g,{variant:"outline-danger",size:"sm",onClick:()=>X(c),children:e.jsx(M,{size:14})})]})]})})},c))})]})]})}function Xe({onServicesChange:N,selectedServices:f=[]}){const j=S=>{N(S)};return e.jsxs(d,{className:"mb-4",children:[e.jsx(d.Header,{children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(D,{className:"me-2"}),"ConfiguraciÃ³n de Servicios del Proyecto"]})}),e.jsxs(d.Body,{children:[e.jsxs(je,{variant:"info",className:"mb-4",children:[e.jsx(H,{className:"me-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Servicios:"})," Selecciona los servicios que necesitas para este proyecto.",e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:"Puedes elegir entre diferentes tipos de servicios (Laboratorio, IngenierÃ­a, etc.) y sus subservicios correspondientes. MÃ¡ximo 5 servicios."})]})]}),e.jsx(Ys,{selectedServices:f,onServicesChange:j}),f.length>0&&e.jsxs(d,{className:"border-success mt-4",children:[e.jsx(d.Header,{children:e.jsxs("h6",{className:"mb-0 text-success",children:[e.jsx(U,{className:"me-2"}),"Resumen de Servicios Seleccionados"]})}),e.jsx(d.Body,{children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Total de Servicios:"})," ",f.length]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Total de Subservicios:"})," ",f.reduce((S,l)=>S+l.subservices.length,0)]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Subtotal:"})," S/ ",f.reduce((S,l)=>S+l.total,0).toFixed(2)]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"IGV (18%):"})," S/ ",(f.reduce((S,l)=>S+l.total,0)*.18).toFixed(2)]}),e.jsxs("div",{className:"fw-bold text-success",children:[e.jsx("strong",{children:"Total:"})," S/ ",(f.reduce((S,l)=>S+l.total,0)*1.18).toFixed(2)]})]})]})})]})]})]})}const Zs=async(N,f)=>{try{const j=new URLSearchParams({type:N,q:f});return await ys(`/companies/search?${j.toString()}`)}catch(j){throw console.error("Error en bÃºsqueda de empresas:",j),j}};function ea({data:N={},onSubmit:f,loading:j=!1,onCancel:S}){const[l,C]=o.useState({clientType:"",client_id:"",client_name:"",client_info:{},name:"",location:"",vendedor_id:"",laboratorio_id:"",contact_name:"",contact_phone:"",contact_email:"",queries:"",priority:"normal",marked:!1,selectedServices:[]}),[u,k]=o.useState(1),[h,A]=o.useState(!1),[x,W]=o.useState({}),[K,B]=o.useState(""),[R,w]=o.useState([]),[p,q]=o.useState(!1),[X,r]=o.useState(!1),c=4;o.useEffect(()=>{N&&C(i=>({...i,...N,selectedServices:N.selectedServices||[]}))},[N]);const t=(i,n)=>{C(_=>({..._,[i]:n})),x[i]&&W(_=>({..._,[i]:null}))},P=i=>{C(n=>({...n,selectedServices:i}))},J=async i=>{if(!i||i.length<2){w([]),r(!1);return}if(!l.clientType){w([]),r(!1);return}q(!0);try{const n=await Zs(l.clientType,i);n.success?(w(n.data||[]),r(!0)):(w([]),r(!1))}catch(n){console.error("Error en bÃºsqueda:",n),w([]),r(!1)}finally{q(!1)}},pe=i=>{C(n=>({...n,client_id:i.id,client_name:i.name,client_info:i})),B(i.name),r(!1)},be=()=>{C(i=>({...i,client_id:"",client_name:"",client_info:{}})),B(""),w([]),r(!1)},Y=i=>{const n={};switch(i){case 1:l.clientType||(n.clientType="Selecciona el tipo de cliente"),l.client_id||(n.client_id="Selecciona un cliente"),l.name||(n.name="Nombre del proyecto es requerido"),l.location||(n.location="UbicaciÃ³n es requerida");break;case 2:l.contact_name||(n.contact_name="Persona de contacto es requerida"),l.contact_phone||(n.contact_phone="TelÃ©fono es requerido");break;case 3:l.selectedServices.length===0&&(n.services="Debes seleccionar al menos un servicio");break}return W(n),Object.keys(n).length===0},ge=()=>{Y(u)&&k(i=>Math.min(i+1,c))},V=()=>{k(i=>Math.max(i-1,1))},Z=()=>{Y(u)&&f(l)},te=i=>{switch(i){case 1:return e.jsx(G,{});case 2:return e.jsx(He,{});case 3:return e.jsx(D,{});case 4:return e.jsx(O,{});default:return e.jsx(G,{})}},ee=i=>{switch(i){case 1:return"InformaciÃ³n BÃ¡sica";case 2:return"Contacto";case 3:return"Servicios";case 4:return"Resumen";default:return"Paso"}},z=()=>e.jsxs("div",{className:"step-content",children:[e.jsxs("h5",{className:"mb-4",children:[e.jsx(G,{className:"me-2"}),"InformaciÃ³n BÃ¡sica del Proyecto"]}),e.jsxs(L,{className:"g-3",children:[e.jsx(v,{md:12,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{className:"fw-bold",children:"Tipo de Cliente *"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx(m.Check,{type:"radio",id:"empresa",name:"clientType",label:"Empresa",checked:l.clientType==="empresa",onChange:()=>t("clientType","empresa"),className:"d-flex align-items-center"}),e.jsx(m.Check,{type:"radio",id:"persona_natural",name:"clientType",label:"Persona Natural",checked:l.clientType==="persona_natural",onChange:()=>t("clientType","persona_natural"),className:"d-flex align-items-center"})]}),x.clientType&&e.jsx(m.Control.Feedback,{type:"invalid",children:x.clientType})]})}),l.clientType&&e.jsx(v,{md:12,children:e.jsxs(m.Group,{children:[e.jsxs(m.Label,{className:"fw-bold",children:["Buscar ",l.clientType==="empresa"?"Empresa":"Persona Natural"," *"]}),e.jsxs("div",{className:"position-relative",children:[e.jsx(m.Control,{type:"text",value:K,onChange:i=>{const n=i.target.value;B(n),J(n)},placeholder:`Buscar ${l.clientType==="empresa"?"empresa":"persona natural"}...`,isInvalid:!!x.client_id}),p&&e.jsx("div",{className:"position-absolute top-50 end-0 translate-middle-y me-3",children:e.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Buscando..."})})}),X&&K&&e.jsx("div",{className:"position-absolute w-100 bg-white border rounded shadow-lg",style:{zIndex:1e3,maxHeight:"300px",overflowY:"auto"},children:R.length>0?R.map((i,n)=>e.jsxs("div",{className:"p-3 border-bottom cursor-pointer hover-bg-light",onClick:()=>pe(i),children:[e.jsx("div",{className:"fw-bold",children:i.name}),e.jsxs("div",{className:"text-muted small",children:[l.clientType==="empresa"?i.ruc:i.dni," â€¢ ",i.address]})]},n)):e.jsx("div",{className:"p-3 text-muted text-center",children:"No se encontraron resultados"})})]}),x.client_id&&e.jsx(m.Control.Feedback,{type:"invalid",children:x.client_id})]})}),l.client_id&&e.jsx(v,{md:12,children:e.jsxs(d,{className:"border-success",children:[e.jsxs(d.Header,{className:"bg-success text-white d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"mb-0",children:[e.jsx(O,{className:"me-2"}),"Cliente Seleccionado"]}),e.jsxs(g,{variant:"outline-light",size:"sm",onClick:be,className:"d-flex align-items-center",children:[e.jsx(M,{className:"me-1"}),"Cambiar"]})]}),e.jsx(d.Body,{children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:"Nombre:"})," ",l.client_name]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("strong",{children:[l.clientType==="empresa"?"RUC":"DNI",":"]})," ",l.client_info.ruc||l.client_info.dni]}),e.jsxs("div",{className:"col-md-12 mt-2",children:[e.jsx("strong",{children:"DirecciÃ³n:"})," ",l.client_info.address]}),l.client_info.phone&&e.jsxs("div",{className:"col-md-6 mt-2",children:[e.jsx("strong",{children:"TelÃ©fono:"})," ",l.client_info.phone]}),l.client_info.email&&e.jsxs("div",{className:"col-md-6 mt-2",children:[e.jsx("strong",{children:"Email:"})," ",l.client_info.email]})]})})]})}),e.jsx(v,{md:12,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{className:"fw-bold",children:"Nombre del Proyecto *"}),e.jsx(m.Control,{type:"text",value:l.name,onChange:i=>t("name",i.target.value),placeholder:"Ingresa el nombre del proyecto",isInvalid:!!x.name}),x.name&&e.jsx(m.Control.Feedback,{type:"invalid",children:x.name})]})}),e.jsx(v,{md:12,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{className:"fw-bold",children:"UbicaciÃ³n *"}),e.jsx(m.Control,{type:"text",value:l.location,onChange:i=>t("location",i.target.value),placeholder:"Ingresa la ubicaciÃ³n del proyecto",isInvalid:!!x.location}),x.location&&e.jsx(m.Control.Feedback,{type:"invalid",children:x.location})]})})]})]}),ne=()=>e.jsxs("div",{className:"step-content",children:[e.jsxs("h5",{className:"mb-4",children:[e.jsx(He,{className:"me-2"}),"InformaciÃ³n de Contacto"]}),e.jsxs(L,{className:"g-3",children:[e.jsx(v,{md:6,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{className:"fw-bold",children:"Persona de Contacto *"}),e.jsx(m.Control,{type:"text",value:l.contact_name,onChange:i=>t("contact_name",i.target.value),placeholder:"Nombre completo",isInvalid:!!x.contact_name}),x.contact_name&&e.jsx(m.Control.Feedback,{type:"invalid",children:x.contact_name})]})}),e.jsx(v,{md:6,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{className:"fw-bold",children:"TelÃ©fono *"}),e.jsx(m.Control,{type:"tel",value:l.contact_phone,onChange:i=>t("contact_phone",i.target.value),placeholder:"NÃºmero de telÃ©fono",isInvalid:!!x.contact_phone}),x.contact_phone&&e.jsx(m.Control.Feedback,{type:"invalid",children:x.contact_phone})]})}),e.jsx(v,{md:12,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{className:"fw-bold",children:"Email"}),e.jsx(m.Control,{type:"email",value:l.contact_email,onChange:i=>t("contact_email",i.target.value),placeholder:"Email para comunicaciÃ³n"})]})}),e.jsx(v,{md:12,children:e.jsxs(m.Group,{children:[e.jsx(m.Label,{className:"fw-bold",children:"Consultas/Notas"}),e.jsx(m.Control,{as:"textarea",rows:4,value:l.queries,onChange:i=>t("queries",i.target.value),placeholder:"Consultas, notas o comentarios adicionales"})]})})]})]}),E=()=>e.jsxs("div",{className:"step-content",children:[e.jsxs("h5",{className:"mb-4",children:[e.jsx(D,{className:"me-2"}),"SelecciÃ³n de Servicios"]}),e.jsx(je,{variant:"info",className:"mb-4",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(Ss,{className:"me-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Selecciona los servicios que requiere este proyecto"}),e.jsx("br",{}),e.jsx("small",{children:"Puedes elegir entre servicios de Laboratorio o IngenierÃ­a"})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(g,{variant:"outline-primary",onClick:()=>A(!0),className:"w-100 py-3",size:"lg",children:[e.jsx(D,{className:"me-2"}),l.selectedServices.length>0?`Configurar Servicios (${l.selectedServices.length} seleccionados)`:"Seleccionar Servicios del Proyecto"]}),x.services&&e.jsx(je,{variant:"danger",className:"mt-2",children:x.services})]}),l.selectedServices.length>0&&e.jsxs(d,{className:"border-success",children:[e.jsx(d.Header,{className:"bg-success text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(O,{className:"me-2"}),"Servicios Seleccionados (",l.selectedServices.length,")"]})}),e.jsxs(d.Body,{children:[l.selectedServices.map((i,n)=>e.jsx("div",{className:"mb-3 p-3 border rounded bg-light",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"mb-1",children:i.ensayo.name}),e.jsx("p",{className:"text-muted small mb-2",children:i.ensayo.description}),e.jsx("div",{className:"d-flex flex-wrap gap-1",children:i.subservices.map((_,se)=>e.jsx(b,{bg:"info",className:"me-1",children:_.codigo},se))})]}),e.jsxs("div",{className:"text-end",children:[e.jsxs("div",{className:"fw-bold text-success h5 mb-1",children:["S/ ",i.total.toFixed(2)]}),e.jsx(g,{variant:"outline-danger",size:"sm",onClick:()=>{const _=l.selectedServices.filter((se,ae)=>ae!==n);P(_)},children:e.jsx(M,{size:12})})]})]})},n)),e.jsx("div",{className:"mt-3 pt-3 border-top",children:e.jsxs(L,{children:[e.jsxs(v,{md:6,children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("strong",{children:["S/ ",l.selectedServices.reduce((i,n)=>i+n.total,0).toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{children:"IGV (18%):"}),e.jsxs("span",{children:["S/ ",(l.selectedServices.reduce((i,n)=>i+n.total,0)*.18).toFixed(2)]})]})]}),e.jsx(v,{md:6,children:e.jsxs("div",{className:"d-flex justify-content-between fw-bold text-success h5",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["S/ ",(l.selectedServices.reduce((i,n)=>i+n.total,0)*1.18).toFixed(2)]})]})})]})})]})]})]}),oe=()=>e.jsxs("div",{className:"step-content",children:[e.jsxs("h5",{className:"mb-4",children:[e.jsx(O,{className:"me-2"}),"Resumen del Proyecto"]}),e.jsxs(L,{className:"g-4",children:[e.jsx(v,{md:6,children:e.jsxs(d,{children:[e.jsx(d.Header,{children:e.jsx("h6",{className:"mb-0",children:"InformaciÃ³n BÃ¡sica"})}),e.jsxs(d.Body,{children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Proyecto:"})," ",l.name]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"UbicaciÃ³n:"})," ",l.location]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Contacto:"})," ",l.contact_name]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"TelÃ©fono:"})," ",l.contact_phone]}),l.contact_email&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Email:"})," ",l.contact_email]})]})]})}),e.jsx(v,{md:6,children:e.jsxs(d,{children:[e.jsx(d.Header,{children:e.jsx("h6",{className:"mb-0",children:"Servicios Seleccionados"})}),e.jsx(d.Body,{children:l.selectedServices.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Total de Servicios:"})," ",l.selectedServices.length]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Total de Subservicios:"})," ",l.selectedServices.reduce((i,n)=>i+n.subservices.length,0)]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"Subtotal:"})," S/ ",l.selectedServices.reduce((i,n)=>i+n.total,0).toFixed(2)]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:"IGV (18%):"})," S/ ",(l.selectedServices.reduce((i,n)=>i+n.total,0)*.18).toFixed(2)]}),e.jsxs("div",{className:"fw-bold text-success h5",children:[e.jsx("strong",{children:"Total:"})," S/ ",(l.selectedServices.reduce((i,n)=>i+n.total,0)*1.18).toFixed(2)]})]}):e.jsxs("div",{className:"text-muted",children:[e.jsx(M,{className:"me-1"}),"No hay servicios seleccionados"]})})]})})]}),l.queries&&e.jsxs(d,{className:"mt-4",children:[e.jsx(d.Header,{children:e.jsx("h6",{className:"mb-0",children:"Consultas/Notas"})}),e.jsx(d.Body,{children:e.jsx("p",{className:"mb-0",children:l.queries})})]})]});return e.jsxs("div",{className:"project-form-redesigned",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("h6",{className:"mb-0",children:"Progreso del Formulario"}),e.jsxs("span",{className:"text-muted",children:[u," de ",c]})]}),e.jsx(Xs,{now:u/c*100,variant:"primary",style:{height:"8px"}})]}),e.jsx("div",{className:"mb-4",children:e.jsx(L,{className:"g-2",children:Array.from({length:c},(i,n)=>{const _=n+1,se=_===u,ae=_<u;return e.jsx(v,{md:3,children:e.jsxs("div",{className:`step-indicator text-center p-3 rounded ${se?"bg-primary text-white":ae?"bg-success text-white":"bg-light"}`,style:{cursor:"pointer"},onClick:()=>k(_),children:[e.jsx("div",{className:"mb-2",children:te(_)}),e.jsx("div",{className:"small fw-bold",children:ee(_)})]})},_)})})}),e.jsx(d,{className:"mb-4",children:e.jsxs(d.Body,{children:[u===1&&z(),u===2&&ne(),u===3&&E(),u===4&&oe()]})}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs(g,{variant:"outline-secondary",onClick:V,disabled:u===1,children:[e.jsx(M,{className:"me-1"}),"Anterior"]}),e.jsxs("div",{children:[u<c?e.jsxs(g,{variant:"primary",onClick:ge,className:"me-2",children:["Siguiente",e.jsx(Ke,{className:"ms-1"})]}):e.jsxs(g,{variant:"success",onClick:Z,disabled:j,className:"me-2",children:[j?"Creando...":"Crear Proyecto",e.jsx(O,{className:"ms-1"})]}),e.jsx(g,{variant:"outline-danger",onClick:S,children:"Cancelar"})]})]}),h&&e.jsx("div",{className:"modal-backdrop",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1050,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{className:"modal-content bg-white rounded shadow-lg",style:{width:"90%",maxWidth:"1200px",maxHeight:"90vh",overflow:"auto"},children:[e.jsxs("div",{className:"modal-header p-4 border-bottom",children:[e.jsx("h5",{className:"mb-0",children:"Seleccionar Servicios del Proyecto"}),e.jsx(g,{variant:"outline-secondary",size:"sm",onClick:()=>A(!1),children:e.jsx(M,{})})]}),e.jsx("div",{className:"modal-body p-4",children:e.jsx(Xe,{selectedServices:l.selectedServices,onServicesChange:P})}),e.jsx("div",{className:"modal-footer p-4 border-top",children:e.jsxs(g,{variant:"success",onClick:()=>A(!1),children:[e.jsx(U,{className:"me-1"}),"Confirmar SelecciÃ³n"]})})]})})]})}const sa={company_id:"",name:"",location:"",vendedor_id:"",laboratorio_id:"",requiere_laboratorio:!1,requiere_ingenieria:!1,requiere_consultoria:!1,requiere_capacitacion:!1,requiere_auditoria:!1,contact_name:"",contact_phone:"",contact_email:"",queries:"",priority:"normal",marked:!1};function _a(){var De,Be,Re,$e;const[N,f]=o.useState(!1),[j,S]=o.useState(null),[l,C]=o.useState(null),[u,k]=o.useState(null),[h,A]=o.useState(null),[x,W]=o.useState(!1),[K,B]=o.useState(!1),[R,w]=o.useState(!1),[p,q]=o.useState(null),[X,r]=o.useState("info"),[c,t]=o.useState({}),[P,J]=o.useState(!1),[pe,be]=o.useState(""),[Y,ge]=o.useState("success"),[V,Z]=o.useState([]),[te,ee]=o.useState(!1),[z,ne]=o.useState(null),[E,oe]=o.useState([]),[i,n]=o.useState(!1),[_,se]=o.useState(!0),[ae,de]=o.useState(!1),[Ne,ve]=o.useState(1),[Pe,Je]=o.useState(""),[Ee,Ye]=o.useState(""),[qe,Ze]=o.useState(""),[Te,es]=o.useState(""),[Ae,ss]=o.useState(""),[as,ze]=o.useState(!1);_s();const $=(De=Cs().state)==null?void 0:De.selectedClient,fe=ws(),{data:y,isLoading:Ie,refetch:ls}=ue(["projects",Ne,Pe,Ee,qe,Te,Ae],()=>Us({page:Ne,limit:20,search:Pe,status:Ee,company_id:qe,project_type:Te,priority:Ae}),{keepPreviousData:!0,refetchOnWindowFocus:!1,refetchOnMount:!1,staleTime:3e4,cacheTime:3e5,retry:2,retryDelay:1e3}),{data:I,isLoading:me}=ue(["projectStats"],Gs,{refetchOnWindowFocus:!1,refetchOnMount:!1,staleTime:6e4,cacheTime:3e5,retry:1,onSuccess:s=>{console.log("ðŸ“Š Frontend - EstadÃ­sticas recibidas:",s),console.log("ðŸ“Š Frontend - alta_prioridad:",s==null?void 0:s.alta_prioridad)}});o.useEffect(()=>{(async()=>{if(p!=null&&p.id)try{const a=await we(p.id);Z(a)}catch(a){console.error("Error al cargar adjuntos:",a)}})()},[p==null?void 0:p.id,R]);const le=s=>{fe.invalidateQueries("projects"),fe.invalidateQueries("projectStats"),f(!1),S(null),C(null)},F=(s,a="success")=>{be(s),ge(a),J(!0),setTimeout(()=>{J(!1)},5e3)},is=s=>{console.log("ðŸ” handleSearch - BÃºsqueda:",s),Je(s),ve(1),ze(!0),setTimeout(()=>ze(!1),1e3)},cs=s=>{console.log("ðŸ” handleFilter - Filtros:",s),Ye(s.status||""),Ze(s.company_id||""),es(s.project_type||""),ss(s.priority||""),ve(1)},rs=s=>{const a=s.target.files[0];a&&ne(a)},ts=async()=>{if(!z||!(p!=null&&p.id)){F("âŒ Por favor selecciona un archivo","danger");return}ee(!0);try{const s=new FormData;s.append("file",z),s.append("description",`Archivo subido: ${z.name}`),await Vs(p.id,s);const a=await we(p.id);Z(a),ne(null),ee(!1),F("âœ… Archivo subido correctamente","success")}catch(s){console.error("Error al subir archivo:",s),ee(!1),F("âŒ Error al subir archivo","danger")}},ns=async s=>{try{await Qs(s),F("âœ… Archivo descargado correctamente","success")}catch(a){console.error("Error al descargar archivo:",a),F("âŒ Error al descargar archivo","danger")}},os=async s=>{k(s)},ds=async()=>{try{await Os(u);const s=await we(p.id);Z(s),F("âœ… Archivo eliminado correctamente","success"),k(null)}catch(s){console.error("Error al eliminar archivo:",s),F("âŒ Error al eliminar archivo","danger"),k(null)}},ms=[{title:"Por Estado",options:[{label:"Pendientes",filter:{status:"pendiente"}},{label:"Activos",filter:{status:"activo"}},{label:"Completados",filter:{status:"completado"}},{label:"Cancelados",filter:{status:"cancelado"}}]},{title:"Por Prioridad",options:[{label:"ðŸ”´ Urgente",filter:{priority:"urgent"}},{label:"ðŸŸ  Alta",filter:{priority:"high"}},{label:"ðŸ”µ Activo",filter:{priority:"active"}},{label:"ðŸŸ¢ Normal",filter:{priority:"normal"}},{label:"ðŸ”µ Baja",filter:{priority:"low"}}]},{title:"Por Tipo de Proyecto",options:[{label:"AnÃ¡lisis de Suelos",filter:{project_type:"AnÃ¡lisis de Suelos"}},{label:"Estudio GeotÃ©cnico",filter:{project_type:"Estudio GeotÃ©cnico"}},{label:"EvaluaciÃ³n Ambiental",filter:{project_type:"EvaluaciÃ³n Ambiental"}},{label:"Control de Calidad",filter:{project_type:"Control de Calidad"}},{label:"AnÃ¡lisis de Agua",filter:{project_type:"AnÃ¡lisis de Agua"}},{label:"Estudio de Impacto",filter:{project_type:"Estudio de Impacto"}},{label:"AnÃ¡lisis QuÃ­mico",filter:{project_type:"AnÃ¡lisis QuÃ­mico"}},{label:"Pruebas de Laboratorio",filter:{project_type:"Pruebas de Laboratorio"}},{label:"InspecciÃ³n TÃ©cnica",filter:{project_type:"InspecciÃ³n TÃ©cnica"}},{label:"CertificaciÃ³n de Materiales",filter:{project_type:"CertificaciÃ³n de Materiales"}}]}],ye=Q(Ls,{onSuccess:()=>le(),onError:s=>console.error("Error creating project:",s)}),ie=Q(({id:s,data:a})=>Ds(s,a),{onSuccess:s=>{console.log("âœ… updateMutation - Success:",s),q(s),t(s),F("âœ… Proyecto actualizado exitosamente!","success"),fe.invalidateQueries("projects")},onError:s=>{console.error("âŒ updateMutation - Error:",s),F("âŒ Error al actualizar proyecto","danger")}}),Me=Q(Bs,{onSuccess:()=>le(),onError:s=>console.error("Error deleting project:",s)});Q(({id:s,...a})=>Rs(s,a),{onSuccess:s=>{q(s),t(s),le()},onError:s=>console.error("Error updating project status:",s)}),Q(({id:s,...a})=>$s(s,a),{onSuccess:s=>{q(s),t(s),le()},onError:s=>console.error("Error updating project queries:",s)}),Q(({id:s,...a})=>Hs(s,a),{onSuccess:s=>{q(s),t(s),le()},onError:s=>console.error("Error updating project mark:",s)});const hs=s=>{S(s),f(!0)},Le=s=>{C(s)},xs=async()=>{try{await Me.mutateAsync(l.id),C(null)}catch(s){console.error("Error eliminando proyecto:",s),C(null)}},us=async()=>{try{console.log("Marcar/desmarcar proyecto:",h),F(`Proyecto ${h.marked?"desmarcado":"marcado"}: ${h.name}`,"success"),A(null)}catch(s){console.error("Error al marcar proyecto:",s),F("Error al marcar proyecto","danger"),A(null)}},js=s=>{console.log("ðŸ” handleViewProject - Project recibido:",s),console.log("ðŸ” handleViewProject - Project.id:",s==null?void 0:s.id),console.log("ðŸ” handleViewProject - Type of project.id:",typeof(s==null?void 0:s.id)),q(s);const a={...s,requiere_laboratorio:s.requiere_laboratorio||!1,requiere_ingenieria:s.requiere_ingenieria||!1,requiere_consultoria:s.requiere_consultoria||!1,requiere_capacitacion:s.requiere_capacitacion||!1,requiere_auditoria:s.requiere_auditoria||!1,marked:s.marked||!1,priority:s.priority||"normal",queries:s.queries||"",contact_name:s.contact_name||"",contact_phone:s.contact_phone||"",contact_email:s.contact_email||"",category_id:s.category_id||"",subcategory_id:s.subcategory_id||"",category_name:s.category_name||"",subcategory_name:s.subcategory_name||""};console.log("ðŸ” handleViewProject - editingData inicializado:",a),t(a),r("info"),w(!0)},ps=async s=>{j.id?await ie.mutateAsync({id:j.id,...s}):await ye.mutateAsync(s)},bs=s=>{const T={activo:{bg:"success",text:"Activo"},pendiente:{bg:"warning",text:"Pendiente"},completado:{bg:"primary",text:"Completado"},cancelado:{bg:"danger",text:"Cancelado"}}[s]||{bg:"secondary",text:s};return e.jsx(b,{bg:T.bg,className:"status-badge",children:T.text})},gs=[{header:"ID",accessor:"id",width:"60px"},{header:"Proyecto",accessor:"name",render:(s,a)=>e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:a.name}),a.location&&e.jsxs("small",{className:"text-muted",children:[e.jsx(zs,{size:12,className:"me-1"}),a.location]}),a.project_type&&e.jsx("div",{className:"mt-1",children:e.jsx(b,{bg:"outline-secondary",size:"sm",className:"px-1 py-0 small",children:a.project_type})})]})},{header:"Empresa",accessor:"company_name",render:(s,a)=>e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:a.company_name||"Sin empresa"}),a.contact_name&&e.jsxs("small",{className:"text-muted",children:[e.jsx(G,{size:12,className:"me-1"}),a.contact_name]})]})},{header:"Estado",accessor:"status",width:"100px",render:s=>bs(s||"activo")},{header:"Servicios",accessor:"services",width:"120px",className:"d-none d-lg-table-cell",render:(s,a)=>e.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[a.requiere_laboratorio&&e.jsx(b,{bg:"info",size:"sm",className:"px-1",children:"Lab"}),a.requiere_ingenieria&&e.jsx(b,{bg:"primary",size:"sm",className:"px-1",children:"Ing"}),a.requiere_consultoria&&e.jsx(b,{bg:"success",size:"sm",className:"px-1",children:"Cons"}),!a.requiere_laboratorio&&!a.requiere_ingenieria&&!a.requiere_consultoria&&e.jsx(b,{bg:"secondary",size:"sm",className:"px-1",children:"N/A"})]})},{header:"Prioridad",accessor:"priority",width:"100px",render:(s,a)=>{const he=(Se=>{switch(Se){case"urgent":return{emoji:"ðŸ”´",text:"Urgente",color:"text-danger"};case"high":return{emoji:"ðŸŸ ",text:"Alta",color:"text-warning"};case"active":return{emoji:"ðŸ”µ",text:"Activo",color:"text-info"};case"low":return{emoji:"ðŸ”µ",text:"Baja",color:"text-primary"};case"normal":default:return{emoji:"ðŸŸ¢",text:"Normal",color:"text-success"}}})(a.priority);return e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"me-1",style:{fontSize:"1em"},children:he.emoji}),e.jsx("span",{className:`small ${he.color} fw-medium`,children:he.text}),(a.priority==="urgent"||a.priority==="high")&&a.requiere_laboratorio&&e.jsx(Ue,{className:"text-warning ms-1",size:12})]})}},{header:"Asignado a",accessor:"vendedor_name",className:"d-none d-md-table-cell",render:(s,a)=>e.jsxs("div",{children:[a.vendedor_name&&e.jsxs("div",{className:"small",children:[e.jsx(G,{size:12,className:"me-1 text-muted"}),e.jsx("span",{children:a.vendedor_name})]}),a.laboratorio_name&&e.jsxs("div",{className:"small text-muted mt-1",children:[e.jsx(H,{size:12,className:"me-1"}),e.jsx("span",{children:a.laboratorio_name})]}),!a.vendedor_name&&!a.laboratorio_name&&e.jsx("span",{className:"text-muted small",children:"Sin asignar"})]})},{header:"Fecha",accessor:"created_at",width:"100px",className:"d-none d-xl-table-cell",render:s=>{if(!s)return"-";const a=new Date(s);return e.jsx("div",{className:"small",children:e.jsx("div",{children:a.toLocaleDateString("es-ES")})})}}],Ns=[{name:"company_id",label:"Empresa/Cliente",type:"select",required:!0,options:((Be=y==null?void 0:y.companies)==null?void 0:Be.map(s=>({value:s.id,label:`${s.name} (${s.ruc||s.dni||"Sin RUC/DNI"})`})))||[],description:"Selecciona un cliente existente o crea uno nuevo desde el mÃ³dulo de clientes"},{name:"name",label:"Nombre del Proyecto",type:"text",required:!0,placeholder:"Ingresa el nombre del proyecto"},{name:"location",label:"UbicaciÃ³n del Proyecto",type:"text",placeholder:"Ingresa la ubicaciÃ³n del proyecto",required:!0},{name:"contact_name",label:"Persona de Contacto",type:"text",placeholder:"Nombre de la persona con quien negociar",description:"Persona responsable del proyecto en el cliente"},{name:"contact_phone",label:"TelÃ©fono de Contacto",type:"text",placeholder:"TelÃ©fono para comunicaciÃ³n directa",description:"NÃºmero para llamadas urgentes o seguimiento"},{name:"contact_email",label:"Email de Contacto",type:"email",placeholder:"Email para comunicaciÃ³n",description:"Email para envÃ­o de reportes y documentos"},{name:"requiere_laboratorio",label:"Requiere Laboratorio",type:"checkbox",description:"Marcar si el proyecto necesita servicios de laboratorio"},{name:"requiere_ingenieria",label:"Requiere IngenierÃ­a",type:"checkbox",description:"Marcar si el proyecto necesita servicios de ingenierÃ­a"},{name:"requiere_consultoria",label:"Requiere ConsultorÃ­a",type:"checkbox",description:"Marcar si el proyecto necesita servicios de consultorÃ­a"},{name:"requiere_capacitacion",label:"Requiere CapacitaciÃ³n",type:"checkbox",description:"Marcar si el proyecto necesita servicios de capacitaciÃ³n"},{name:"requiere_auditoria",label:"Requiere AuditorÃ­a",type:"checkbox",description:"Marcar si el proyecto necesita servicios de auditorÃ­a"},{name:"queries",label:"Consultas del Cliente",type:"textarea",placeholder:"Ingresa las consultas o dudas del cliente...",description:"Preguntas o dudas especÃ­ficas del cliente sobre el proyecto"},{name:"services",label:"Servicios del Proyecto",type:"custom",component:e.jsxs("div",{children:[e.jsx("div",{className:"mb-3",children:e.jsxs(g,{variant:"outline-primary",onClick:()=>n(!0),className:"w-100",children:[e.jsx(D,{className:"me-2"}),E.length>0?`Configurar Servicios (${E.length} seleccionados)`:"Seleccionar Servicios"]})}),E.length>0&&e.jsxs("div",{className:"border rounded p-3 bg-light",children:[e.jsx("h6",{className:"mb-2",children:"Servicios Seleccionados:"}),E.map((s,a)=>e.jsx("div",{className:"mb-2 p-2 border rounded bg-white",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("strong",{children:s.ensayo.name}),e.jsx("div",{className:"small text-muted",children:s.subservices.map(T=>T.codigo).join(", ")})]}),e.jsxs("div",{className:"text-end",children:[e.jsxs("div",{className:"fw-bold text-success",children:["S/ ",s.total.toFixed(2)]}),e.jsx(g,{variant:"outline-danger",size:"sm",onClick:()=>{const T=E.filter((he,Se)=>Se!==a);oe(T)},children:e.jsx(M,{size:12})})]})]})},a)),e.jsxs("div",{className:"mt-2 pt-2 border-top",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:"Subtotal:"}),e.jsxs("strong",{children:["S/ ",E.reduce((s,a)=>s+a.total,0).toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"IGV (18%):"}),e.jsxs("span",{children:["S/ ",(E.reduce((s,a)=>s+a.total,0)*.18).toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between fw-bold text-success",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["S/ ",(E.reduce((s,a)=>s+a.total,0)*1.18).toFixed(2)]})]})]})]})]})},{name:"priority",label:"Prioridad del Proyecto",type:"select",options:[{value:"low",label:"Baja"},{value:"normal",label:"Normal"},{value:"high",label:"Alta"},{value:"urgent",label:"Urgente"}],description:"Nivel de prioridad para la ejecuciÃ³n del proyecto"},{name:"vendedor_id",label:"Vendedor Asignado",type:"select",options:((Re=y==null?void 0:y.users)==null?void 0:Re.filter(s=>["vendedor_comercial","jefa_comercial"].includes(s.role)).map(s=>({value:s.id,label:`${s.name} ${s.apellido}`})))||[]},{name:"laboratorio_id",label:"Responsable de Laboratorio",type:"select",options:(($e=y==null?void 0:y.users)==null?void 0:$e.filter(s=>["jefe_laboratorio","usuario_laboratorio","laboratorio"].includes(s.role)).map(s=>({value:s.id,label:`${s.name} ${s.apellido}`})))||[]}],ce=o.useMemo(()=>{if(I)return console.log("ðŸ“Š Stats - Usando estadÃ­sticas reales del backend:",I),{total:I.total||0,activos:I.activos||0,completados:I.completados||0,pendientes:I.pendientes||0,cancelados:I.cancelados||0,alta_prioridad:I.alta_prioridad||0};const s=(y==null?void 0:y.data)||[];return console.log("ðŸ“Š Stats - Fallback: calculando desde pÃ¡gina actual:",s),{total:s.length,activos:s.filter(a=>a.status==="activo").length,completados:s.filter(a=>a.status==="completado").length,pendientes:s.filter(a=>a.status==="pendiente").length,cancelados:s.filter(a=>a.status==="cancelado").length,alta_prioridad:s.filter(a=>a.priority==="urgent"||a.priority==="high").length}},[I,y]);return e.jsxs(e.Fragment,{children:[e.jsx(Fs,{fluid:!0,className:"py-4",children:e.jsxs("div",{className:"fade-in",children:[e.jsx(Is,{title:"GestiÃ³n de Proyectos",subtitle:$?`Crear proyecto para: ${$.name}`:"Crear, editar y gestionar proyectos del sistema",icon:H,actions:e.jsxs("div",{className:"d-flex gap-2",children:[$&&e.jsxs(b,{bg:"info",className:"px-3 py-2 d-flex align-items-center",children:[e.jsx(G,{className:"me-1"}),"Cliente: ",$.name]}),e.jsxs(g,{variant:"primary",onClick:()=>de(!0),children:[e.jsx(Ke,{className:"me-2"}),$?"Crear Proyecto":"Nuevo Proyecto"]})]})}),e.jsxs(L,{className:"g-4 mb-4",children:[e.jsx(v,{md:6,lg:3,children:e.jsx(xe,{title:"Total Proyectos",value:ce.total,icon:H,color:"primary",subtitle:"Proyectos registrados",loading:me})}),e.jsx(v,{md:6,lg:3,children:e.jsx(xe,{title:"Proyectos Activos",value:ce.activos,icon:O,color:"success",subtitle:"En desarrollo",loading:me})}),e.jsx(v,{md:6,lg:3,children:e.jsx(xe,{title:"Alta Prioridad",value:ce.alta_prioridad||0,icon:Ue,color:"danger",subtitle:"ðŸ”´ Urgente + ðŸŸ  Alta",loading:me})}),e.jsx(v,{md:6,lg:3,children:e.jsx(xe,{title:"Pendientes",value:ce.pendientes,icon:ke,color:"warning",subtitle:"Por iniciar",loading:me})})]}),e.jsxs(d,{className:"shadow-sm border-0",children:[e.jsx(d.Header,{className:"bg-white border-bottom",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h5",{className:"mb-0",children:[e.jsx(H,{className:"me-2 text-primary"}),"Lista de Proyectos"]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(g,{variant:"outline-secondary",size:"sm",onClick:()=>ls(),className:"d-flex align-items-center",title:"Actualizar datos",children:e.jsx(ks,{className:`${Ie?"spinning":""}`})}),e.jsxs(b,{bg:"light",text:"dark",className:"px-3 py-2",children:[ce.total," proyectos"]})]})]})}),e.jsx(d.Body,{className:"p-0",children:e.jsx(Ms,{data:(y==null?void 0:y.data)||[],columns:gs,loading:Ie||as,onEdit:hs,onDelete:Le,actions:[{label:"Gestionar",icon:Ps,onClick:js,variant:"outline-primary"},{label:"Eliminar",icon:Ge,onClick:Le,variant:"outline-danger"}],emptyMessage:"No hay proyectos registrados",totalItems:(y==null?void 0:y.total)||0,itemsPerPage:20,currentPage:Ne,onPageChange:ve,onSearch:is,onFilter:cs,filterOptions:ms,getRowClassName:s=>s.status==="cancelado"?"table-secondary opacity-50 text-muted":""})})]}),e.jsx(_e,{show:N,onHide:()=>f(!1),title:j!=null&&j.id?"Editar Proyecto":"Nuevo Proyecto",data:j||sa,fields:Ns,onSubmit:ps,loading:ye.isLoading||ie.isLoading,submitText:j!=null&&j.id?"Actualizar":"Crear"}),e.jsx(_e,{show:R,onHide:()=>w(!1),title:`Gestionar Proyecto - ${(p==null?void 0:p.name)||""}`,data:c,fields:[{name:"project_management",label:"GestiÃ³n del Proyecto",type:"custom",render:s=>e.jsxs(Js,{activeKey:X,onSelect:a=>r(a),className:"mb-3",children:[e.jsxs(Fe,{eventKey:"info",title:e.jsxs("span",{children:[e.jsx(H,{className:"me-1"}),"InformaciÃ³n"]}),children:[e.jsx("style",{children:`
                    .info-item {
                      margin-bottom: 1rem;
                    }
                    .info-item label {
                      font-size: 0.75rem;
                      font-weight: 600;
                      text-transform: uppercase;
                      letter-spacing: 0.5px;
                      display: block;
                      margin-bottom: 0.25rem;
                    }
                    .service-status {
                      padding: 0.5rem 0;
                      border-bottom: 1px solid #eee;
                    }
                    .service-status:last-child {
                      border-bottom: none;
                    }
                    .upload-area:hover {
                      background-color: #e9ecef !important;
                      border-color: #f84616 !important;
                    }
                  `}),e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-lg-8",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(H,{className:"me-2"}),s.name]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"info-item",children:[e.jsx("label",{className:"text-muted small",children:"ID del Proyecto"}),e.jsxs("p",{className:"fw-bold mb-2",children:["#",s.id]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"info-item",children:[e.jsx("label",{className:"text-muted small",children:"UbicaciÃ³n"}),e.jsx("p",{className:"mb-2",children:s.location})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"info-item",children:[e.jsx("label",{className:"text-muted small",children:"Estado Actual"}),e.jsx("div",{children:e.jsx(b,{bg:"primary",className:"fs-6",children:s.status})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"info-item",children:[e.jsx("label",{className:"text-muted small",children:"Tipo de Proyecto"}),e.jsx("div",{children:e.jsx(b,{bg:"info",className:"fs-6",children:s.project_type})})]})})]})})]})}),e.jsx("div",{className:"col-lg-4",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-success text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(D,{className:"me-2"}),"Estado de Servicios"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"service-status mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("span",{className:"text-muted",children:"Laboratorio"}),s.requiere_laboratorio?e.jsx(b,{bg:"info",children:"Requerido"}):e.jsx(b,{bg:"secondary",children:"No requerido"})]}),s.requiere_laboratorio&&e.jsxs("small",{className:"text-muted",children:["Estado: ",s.laboratorio_status]})]}),e.jsxs("div",{className:"service-status",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("span",{className:"text-muted",children:"IngenierÃ­a"}),s.requiere_ingenieria?e.jsx(b,{bg:"success",children:"Requerido"}):e.jsx(b,{bg:"secondary",children:"No requerido"})]}),s.requiere_ingenieria&&e.jsxs("small",{className:"text-muted",children:["Estado: ",s.ingenieria_status]})]})]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-info text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(G,{className:"me-2"}),"InformaciÃ³n de Contacto y Asignaciones"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"text-muted small",children:"Empresa"}),e.jsx("p",{className:"mb-2 fw-semibold",children:s.company_name})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"text-muted small",children:"RUC"}),e.jsx("p",{className:"mb-2",children:s.company_ruc})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"text-muted small",children:"Contacto"}),e.jsx("p",{className:"mb-2",children:s.contact_name||"Sin contacto"})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"text-muted small",children:"TelÃ©fono"}),e.jsx("p",{className:"mb-2",children:s.contact_phone||"Sin telÃ©fono"})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Email"}),e.jsx("p",{className:"mb-2",children:s.contact_email||"Sin email"})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Vendedor Asignado"}),e.jsx("p",{className:"mb-2",children:s.vendedor_name||"Sin asignar"})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"text-muted small",children:"Responsable Laboratorio"}),e.jsx("p",{className:"mb-2",children:s.laboratorio_name||"Sin asignar"})]})]})})]})}),s.status_notes&&e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-warning text-dark",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(Ve,{className:"me-2"}),"Notas del Estado"]})}),e.jsx("div",{className:"card-body",children:e.jsx("p",{className:"mb-0",children:s.status_notes})})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Es,{className:"text-muted mb-2",size:20}),e.jsx("p",{className:"text-muted small mb-1",children:"Fecha de CreaciÃ³n"}),e.jsx("p",{className:"fw-semibold",children:new Date(s.created_at).toLocaleDateString()})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"text-muted mb-2",size:20}),e.jsx("p",{className:"text-muted small mb-1",children:"Ãšltima ActualizaciÃ³n"}),e.jsx("p",{className:"fw-semibold",children:new Date(s.updated_at).toLocaleDateString()})]})})]})})]})]}),e.jsx(Fe,{eventKey:"config",title:e.jsxs("span",{children:[e.jsx(D,{className:"me-1"}),"ConfiguraciÃ³n"]}),children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(qs,{className:"me-2"}),"InformaciÃ³n BÃ¡sica del Proyecto"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Nombre del Proyecto"}),e.jsx("input",{type:"text",className:"form-control",value:c.name||"",onChange:a=>t({...c,name:a.target.value})})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"UbicaciÃ³n"}),e.jsx("input",{type:"text",className:"form-control",value:c.location||"",onChange:a=>t({...c,location:a.target.value})})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Persona de Contacto"}),e.jsx("input",{type:"text",className:"form-control",value:c.contact_name||"",onChange:a=>t({...c,contact_name:a.target.value})})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"TelÃ©fono de Contacto"}),e.jsx("input",{type:"text",className:"form-control",value:c.contact_phone||"",onChange:a=>t({...c,contact_phone:a.target.value})})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Email de Contacto"}),e.jsx("input",{type:"email",className:"form-control",value:c.contact_email||"",onChange:a=>t({...c,contact_email:a.target.value})})]})]})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-success text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(D,{className:"me-2"}),"Estados del Proyecto"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Estado Principal"}),e.jsxs("select",{className:"form-select",value:c.status||"",onChange:a=>t({...c,status:a.target.value}),children:[e.jsx("option",{value:"pendiente",children:"Pendiente"}),e.jsx("option",{value:"activo",children:"Activo"}),e.jsx("option",{value:"en_proceso",children:"En Proceso"}),e.jsx("option",{value:"completado",children:"Completado"}),e.jsx("option",{value:"pausado",children:"Pausado"}),e.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Prioridad"}),e.jsxs("select",{className:"form-select",value:c.priority||"normal",onChange:a=>t({...c,priority:a.target.value}),children:[e.jsx("option",{value:"low",children:"ðŸŸ¢ Baja"}),e.jsx("option",{value:"normal",children:"ðŸ”µ Normal"}),e.jsx("option",{value:"high",children:"ðŸŸ  Alta"}),e.jsx("option",{value:"urgent",children:"ðŸ”´ Urgente"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Estado Laboratorio"}),e.jsxs("select",{className:"form-select",value:c.laboratorio_status||"",onChange:a=>t({...c,laboratorio_status:a.target.value}),children:[e.jsx("option",{value:"no_requerido",children:"No Requerido"}),e.jsx("option",{value:"pendiente",children:"Pendiente"}),e.jsx("option",{value:"en_proceso",children:"En Proceso"}),e.jsx("option",{value:"completado",children:"Completado"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Estado IngenierÃ­a"}),e.jsxs("select",{className:"form-select",value:c.ingenieria_status||"",onChange:a=>t({...c,ingenieria_status:a.target.value}),children:[e.jsx("option",{value:"no_requerido",children:"No Requerido"}),e.jsx("option",{value:"pendiente",children:"Pendiente"}),e.jsx("option",{value:"en_proceso",children:"En Proceso"}),e.jsx("option",{value:"completado",children:"Completado"})]})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-info text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(re,{className:"me-2"}),"Servicios Requeridos"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"form-check mb-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"cat_laboratorio",checked:c.requiere_laboratorio||!1,onChange:a=>t({...c,requiere_laboratorio:a.target.checked})}),e.jsx("label",{className:"form-check-label",htmlFor:"cat_laboratorio",children:"ðŸ§ª Laboratorio"})]}),e.jsxs("div",{className:"form-check mb-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"cat_ingenieria",checked:c.requiere_ingenieria||!1,onChange:a=>t({...c,requiere_ingenieria:a.target.checked})}),e.jsx("label",{className:"form-check-label",htmlFor:"cat_ingenieria",children:"âš™ï¸ IngenierÃ­a"})]}),e.jsxs("div",{className:"form-check mb-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"cat_consultoria",checked:c.requiere_consultoria||!1,onChange:a=>t({...c,requiere_consultoria:a.target.checked})}),e.jsx("label",{className:"form-check-label",htmlFor:"cat_consultoria",children:"ðŸ’¼ ConsultorÃ­a"})]}),e.jsxs("div",{className:"form-check mb-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"cat_capacitacion",checked:c.requiere_capacitacion||!1,onChange:a=>t({...c,requiere_capacitacion:a.target.checked})}),e.jsx("label",{className:"form-check-label",htmlFor:"cat_capacitacion",children:"ðŸ“š CapacitaciÃ³n"})]}),e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"cat_auditoria",checked:c.requiere_auditoria||!1,onChange:a=>t({...c,requiere_auditoria:a.target.checked})}),e.jsx("label",{className:"form-check-label",htmlFor:"cat_auditoria",children:"ðŸ“‹ AuditorÃ­a"})]})]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-warning text-dark",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx(Ve,{className:"me-2"}),"Notas y Consultas"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Notas del Estado"}),e.jsx("textarea",{className:"form-control",rows:"4",value:c.status_notes||"",onChange:a=>t({...c,status_notes:a.target.value}),placeholder:"Agrega comentarios sobre el estado del proyecto..."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Consultas del Cliente"}),e.jsx("textarea",{className:"form-control",rows:"4",value:c.queries||"",onChange:a=>t({...c,queries:a.target.value}),placeholder:"Consultas y dudas del cliente..."})]})]})})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx(g,{variant:"outline-secondary",onClick:()=>w(!1),children:"Cancelar"}),e.jsxs(g,{variant:"primary",size:"lg",onClick:()=>{const a=p==null?void 0:p.id;if(!a){console.error("No se encontrÃ³ el ID del proyecto"),F("âŒ Error: No se encontrÃ³ el ID del proyecto","danger");return}ie.mutate({id:a,data:c},{onSuccess:T=>{F("âœ… Proyecto actualizado exitosamente!","success"),w(!1)},onError:T=>{console.error("âŒ Error al actualizar:",T),F("âŒ Error al actualizar proyecto","danger")}})},disabled:ie.isLoading,className:"px-4",children:[e.jsx(Ts,{className:"me-2"}),ie.isLoading?"Guardando...":"Guardar Cambios"]})]})})]})}),e.jsx(Fe,{eventKey:"files",title:e.jsxs("span",{children:[e.jsx(re,{className:"me-1"}),"Archivos"]}),children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsxs("div",{className:"card-header bg-primary text-white d-flex align-items-center",children:[e.jsx(Qe,{className:"me-2"}),e.jsx("h6",{className:"mb-0",children:"Subir Archivo"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"upload-area border-2 border-dashed rounded p-4 text-center mb-3",style:{borderColor:"#dee2e6",backgroundColor:"#f8f9fa"},children:[e.jsx(re,{size:32,className:"text-muted mb-2"}),e.jsx("div",{className:"mb-2",children:e.jsx("input",{type:"file",className:"form-control",onChange:rs,accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.gif,.txt"})}),e.jsx("small",{className:"text-muted",children:"ðŸ“ PDF, Word, Excel, PowerPoint, ImÃ¡genes, TXT (mÃ¡x. 10MB)"})]}),z&&e.jsxs("div",{className:"alert alert-info d-flex align-items-center",children:[e.jsx(Oe,{className:"me-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:z.name}),e.jsx("br",{}),e.jsxs("small",{children:["ðŸ“ ",(z.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsxs(g,{variant:"primary",onClick:ts,disabled:!z||te,className:"px-4",children:[e.jsx(Qe,{className:"me-2"}),te?"Subiendo...":"Subir Archivo"]})})]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsxs("div",{className:"card-header bg-info text-white d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(re,{className:"me-2"}),e.jsx("h6",{className:"mb-0",children:"Archivos del Proyecto"})]}),e.jsxs(b,{bg:"light",text:"dark",className:"px-3 py-2",children:[V.length," archivo",V.length!==1?"s":""]})]}),e.jsx("div",{className:"card-body",children:V.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(re,{size:48,className:"text-muted mb-3"}),e.jsx("h6",{className:"text-muted",children:"No hay archivos adjuntos"}),e.jsx("p",{className:"text-muted small",children:"ðŸ“Ž Sube cotizaciones, documentos tÃ©cnicos, planos, etc."})]}):e.jsx("div",{className:"row g-3",children:V.map(a=>e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"card border h-100",children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("div",{className:"me-3",children:e.jsx(Oe,{size:24,className:"text-primary"})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h6",{className:"mb-1",children:a.original_name}),e.jsxs("div",{className:"small text-muted mb-2",children:["ðŸ“ ",a.file_size?`${(a.file_size/1024/1024).toFixed(2)} MB`:"N/A",e.jsx("span",{className:"mx-2",children:"â€¢"}),"ðŸ“… ",new Date(a.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"small text-muted mb-3",children:["ðŸ‘¤ ",a.uploaded_by_name||"Usuario"]}),a.description&&e.jsx("p",{className:"small text-muted",children:a.description})]})]}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsxs(g,{variant:"outline-primary",size:"sm",onClick:()=>ns(a),className:"flex-grow-1",children:[e.jsx(As,{className:"me-1",size:14}),"Descargar"]}),e.jsx(g,{variant:"outline-danger",size:"sm",onClick:()=>os(a.id),children:e.jsx(Ge,{size:14})})]})]})})},a.id))})})]})})]})})]})}],onSubmit:()=>w(!1),submitText:"Cerrar",size:"xl"})]})}),P&&e.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:99999,backgroundColor:Y==="success"?"#28a745":"#dc3545",color:"white",padding:"15px 20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",minWidth:"300px",border:"none"},onClick:()=>J(!1),children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:Y==="success"?"âœ… Ã‰xito":"âŒ Error"}),e.jsx("div",{children:pe})]}),e.jsx(_e,{show:i,onHide:()=>n(!1),title:"Seleccionar Servicios del Proyecto",size:"xl",data:{},fields:[],onSubmit:()=>n(!1),loading:!1,submitText:"Cerrar",customBody:e.jsx(Xe,{selectedServices:E,onServicesChange:oe,serviceType:"laboratorio"})}),ae&&e.jsx("div",{className:"modal-backdrop",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:1050,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{className:"modal-content bg-white rounded shadow-lg",style:{width:"90%",maxWidth:"1200px",maxHeight:"90vh",overflow:"auto"},children:[e.jsxs("div",{className:"modal-header p-4 border-bottom d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:"Crear Nuevo Proyecto"}),e.jsx(g,{variant:"outline-secondary",size:"sm",onClick:()=>de(!1),children:e.jsx(M,{})})]}),e.jsx("div",{className:"modal-body p-4",children:e.jsx(ea,{data:$?{company_id:$.id}:{},onSubmit:s=>{console.log("Datos del formulario:",s),de(!1)},onCancel:()=>de(!1),loading:ye.isLoading})})]})}),e.jsx(Ce,{show:!!l,onHide:()=>C(null),onConfirm:xs,title:"Eliminar Proyecto",message:`Â¿EstÃ¡s seguro de que quieres eliminar el proyecto "${l==null?void 0:l.name}"?`,confirmText:"Eliminar",variant:"danger",isLoading:Me.isLoading,alertMessage:"Esta acciÃ³n eliminarÃ¡ permanentemente el proyecto y todos sus datos asociados.",alertVariant:"danger"}),e.jsx(Ce,{show:!!u,onHide:()=>k(null),onConfirm:ds,title:"Eliminar Archivo",message:"Â¿EstÃ¡s seguro de que quieres eliminar este archivo?",confirmText:"Eliminar",variant:"danger",alertMessage:"El archivo se eliminarÃ¡ permanentemente y no se puede recuperar.",alertVariant:"warning"}),e.jsx(Ce,{show:!!h,onHide:()=>A(null),onConfirm:us,title:`${h!=null&&h.marked?"Desmarcar":"Marcar"} Proyecto`,message:`Â¿EstÃ¡s seguro de que quieres ${h!=null&&h.marked?"desmarcar":"marcar"} el proyecto "${h==null?void 0:h.name}"?`,confirmText:h!=null&&h.marked?"Desmarcar":"Marcar",variant:h!=null&&h.marked?"warning":"success"})]})}export{_a as default};
//# sourceMappingURL=Proyectos-Cl4CW5-g.js.map
