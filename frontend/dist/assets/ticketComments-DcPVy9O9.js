import{r as p,a as b,j as e,g as y,o as h,F as C,au as F,av as k,W as S,w as T,b as x}from"./index-BlIitoHL.js";const E=({show:l,onHide:j,onSubmit:f,isLoading:n})=>{const[s,c]=p.useState({title:"",description:"",priority:"media",module:"sistema",category:"",type:"",assigned_to:"",estimated_time:"",tags:"",additional_notes:"",file:null}),[i,t]=p.useState({}),{user:_}=b(),r=a=>{const{name:o,value:v,files:u}=a.target;c(d=>({...d,[o]:u?u[0]:v})),i[o]&&t(d=>({...d,[o]:""}))},N=()=>{const a={};return s.title.trim()||(a.title="El título es requerido"),s.description.trim()||(a.description="La descripción es requerida"),t(a),Object.keys(a).length===0},g=a=>{a.preventDefault(),N()&&(f(s),c({title:"",description:"",priority:"media",module:"sistema",category:"",type:"",assigned_to:"",estimated_time:"",tags:"",additional_notes:"",file:null}),t({}))},m=()=>{c({title:"",description:"",priority:"media",module:"sistema",category:"",type:"",assigned_to:"",estimated_time:"",tags:"",additional_notes:"",file:null}),t({}),j()};return l?e.jsx("div",{className:"user-form-backdrop",onClick:m,children:e.jsxs("div",{className:"user-form-modal",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"user-form-header",children:[e.jsxs("h4",{children:[e.jsx(y,{}),"Nuevo Ticket"]}),e.jsx("button",{className:"close-btn",onClick:m,children:e.jsx(h,{})})]}),e.jsx("div",{className:"user-form-body",children:e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"user-form-section",children:[e.jsxs("h5",{className:"user-form-section-title",children:[e.jsx(C,{}),"Información Básica"]}),e.jsxs("div",{className:"user-form-row",children:[e.jsxs("div",{className:"user-form-group",children:[e.jsx("label",{className:"user-form-label",children:"Título del Ticket *"}),e.jsx("input",{type:"text",name:"title",value:s.title,onChange:r,placeholder:"Describe brevemente el problema o solicitud",className:`user-form-input ${i.title?"error":""}`}),i.title&&e.jsx("span",{className:"user-form-error",children:i.title})]}),e.jsxs("div",{className:"user-form-group",children:[e.jsx("label",{className:"user-form-label",children:"Prioridad *"}),e.jsxs("select",{name:"priority",value:s.priority,onChange:r,className:"user-form-input",children:[e.jsx("option",{value:"baja",children:"Baja"}),e.jsx("option",{value:"media",children:"Media"}),e.jsx("option",{value:"alta",children:"Alta"}),e.jsx("option",{value:"urgente",children:"Urgente"})]})]})]}),e.jsxs("div",{className:"user-form-group",children:[e.jsx("label",{className:"user-form-label",children:"Descripción Detallada *"}),e.jsx("textarea",{name:"description",value:s.description,onChange:r,placeholder:"Describe en detalle el problema, solicitud o consulta...",className:`user-form-input ${i.description?"error":""}`,rows:4}),i.description&&e.jsx("span",{className:"user-form-error",children:i.description})]})]}),e.jsxs("div",{className:"user-form-section",children:[e.jsxs("h5",{className:"user-form-section-title",children:[e.jsx(F,{}),"Clasificación"]}),e.jsxs("div",{className:"user-form-row",children:[e.jsxs("div",{className:"user-form-group",children:[e.jsx("label",{className:"user-form-label",children:"Módulo"}),e.jsxs("select",{name:"module",value:s.module,onChange:r,className:"user-form-input",children:[e.jsx("option",{value:"sistema",children:"Sistema"}),e.jsx("option",{value:"comercial",children:"Comercial"}),e.jsx("option",{value:"laboratorio",children:"Laboratorio"}),e.jsx("option",{value:"soporte",children:"Soporte"}),e.jsx("option",{value:"facturacion",children:"Facturación"})]})]}),e.jsxs("div",{className:"user-form-group",children:[e.jsx("label",{className:"user-form-label",children:"Categoría"}),e.jsx("input",{type:"text",name:"category",value:s.category,onChange:r,placeholder:"Ej: Técnico, Comercial, Laboratorio",className:"user-form-input"})]}),e.jsxs("div",{className:"user-form-group",children:[e.jsx("label",{className:"user-form-label",children:"Tipo"}),e.jsx("input",{type:"text",name:"type",value:s.type,onChange:r,placeholder:"Ej: Solicitud, Consulta, Problema",className:"user-form-input"})]})]})]}),e.jsxs("div",{className:"user-form-section",children:[e.jsxs("h5",{className:"user-form-section-title",children:[e.jsx(k,{}),"Información Adicional"]}),e.jsxs("div",{className:"user-form-row",children:[e.jsxs("div",{className:"user-form-group",children:[e.jsx("label",{className:"user-form-label",children:"Tiempo Estimado"}),e.jsx("input",{type:"text",name:"estimated_time",value:s.estimated_time,onChange:r,placeholder:"Ej: 2 horas, 1 día, 3 días",className:"user-form-input"})]}),e.jsxs("div",{className:"user-form-group",children:[e.jsx("label",{className:"user-form-label",children:"Tags"}),e.jsx("input",{type:"text",name:"tags",value:s.tags,onChange:r,placeholder:"Ej: urgente, cliente-vip, cotización",className:"user-form-input"})]})]}),e.jsxs("div",{className:"user-form-group",children:[e.jsx("label",{className:"user-form-label",children:"Notas Adicionales"}),e.jsx("textarea",{name:"additional_notes",value:s.additional_notes,onChange:r,placeholder:"Información adicional que pueda ser útil para el equipo de soporte...",className:"user-form-input",rows:3})]})]}),e.jsxs("div",{className:"user-form-section",children:[e.jsxs("h5",{className:"user-form-section-title",children:[e.jsx(S,{}),"Archivo Adjunto"]}),e.jsxs("div",{className:"user-form-group",children:[e.jsx("label",{className:"user-form-label",children:"Subir Archivo"}),e.jsx("input",{type:"file",name:"file",onChange:r,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",className:"user-form-input"}),e.jsx("small",{className:"user-form-help",children:"Formatos permitidos: PDF, DOC, DOCX, XLS, XLSX, JPG, PNG (máx. 10MB)"})]})]}),Object.keys(i).length>0&&e.jsxs("div",{className:"user-form-error-message",children:[e.jsx("strong",{children:"Por favor corrige los siguientes errores:"}),e.jsx("ul",{children:Object.values(i).map((a,o)=>e.jsx("li",{children:a},o))})]}),e.jsxs("div",{className:"user-form-actions",children:[e.jsxs("button",{type:"button",className:"user-form-btn user-form-btn-secondary",onClick:m,disabled:n,children:[e.jsx(h,{}),"Cancelar"]}),e.jsx("button",{type:"submit",className:"user-form-btn user-form-btn-primary",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-small"}),"Creando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{}),"Crear Ticket"]})})]})]})})]})}):null},P=async l=>x("/api/ticket-comments",{method:"POST",body:JSON.stringify(l)}),w=async l=>x(`/api/ticket-comments/ticket/${l}`);export{E as T,P as c,w as g};
//# sourceMappingURL=ticketComments-DcPVy9O9.js.map
