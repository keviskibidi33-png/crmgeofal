import{r as d,a as L,Q as P,c as k,R as m,j as s,w as t,a6 as z,B,V as G,h as Q,ad as H,W as I,f as R,y as p,d as T}from"./index-o7c7tdkB.js";import{P as x}from"./PageHeader-C0hqpNJa.js";import{D as f}from"./DataTable-BnIKqI-b.js";import{M as V}from"./ModalForm-BYW2MbvZ.js";import{d as _,c as U,u as W,l as $}from"./services-JLHsCip8.js";import{A as J}from"./Alert-B7xNfSHq.js";import"./InputGroup-CsBCMGWc.js";import"./Form-CNH_JlrK.js";import"./Spinner-H_v7OS2w.js";const S={name:"",area:"laboratorio"},K=[{value:"laboratorio",label:"Laboratorio"},{value:"comercial",label:"Comercial"},{value:"soporte",label:"Soporte"},{value:"sistemas",label:"Sistemas"},{value:"gerencia",label:"Gerencia"}];function ne(){const[h,r]=d.useState(!1),[a,o]=d.useState(null),[O,j]=d.useState(null),{user:n}=L(),y=["admin","jefe_laboratorio","jefa_comercial"].includes(n==null?void 0:n.role),N=P(),{data:i,isLoading:u}=k(["services"],()=>$(),{keepPreviousData:!0}),c=e=>{N.invalidateQueries("services"),r(!1),o(null),j(null)},g=m(U,{onSuccess:()=>c(),onError:e=>console.error("Error creating service:",e)}),v=m(W,{onSuccess:()=>c(),onError:e=>console.error("Error updating service:",e)}),E=m(_,{onSuccess:()=>c(),onError:e=>console.error("Error deleting service:",e)}),C=()=>{o(S),r(!0)},w=e=>{o(e),r(!0)},M=e=>{window.confirm(`¿Estás seguro de que quieres eliminar el servicio "${e.name}"?`)&&E.mutate(e.id)},A=async e=>{a.id?await v.mutateAsync({id:a.id,...e}):await g.mutateAsync(e)},F=e=>{const l={laboratorio:{bg:"primary",text:"Laboratorio",icon:t},comercial:{bg:"success",text:"Comercial",icon:R},soporte:{bg:"info",text:"Soporte",icon:I},sistemas:{bg:"warning",text:"Sistemas",icon:H},gerencia:{bg:"danger",text:"Gerencia",icon:Q}}[e]||{bg:"secondary",text:e,icon:t},q=l.icon;return s.jsxs(p,{bg:l.bg,className:"status-badge d-flex align-items-center",children:[s.jsx(q,{size:12,className:"me-1"}),l.text]})},b=[{header:"ID",accessor:"id",width:"80px"},{header:"Nombre del Servicio",accessor:"name",render:e=>s.jsx("div",{className:"fw-medium",children:e})},{header:"Área",accessor:"area",render:e=>F(e)},{header:"Estado",accessor:"status",render:e=>s.jsxs(p,{bg:"success",className:"status-badge d-flex align-items-center",children:[s.jsx(T,{size:12,className:"me-1"}),"Activo"]})}],D=[{name:"name",label:"Nombre del Servicio",type:"text",required:!0,placeholder:"Ingresa el nombre del servicio"},{name:"area",label:"Área",type:"select",required:!0,options:K}];return y?s.jsxs("div",{className:"fade-in",children:[s.jsx(x,{title:"Gestión de Servicios",subtitle:"Crear, editar y gestionar servicios del sistema",icon:t,actions:s.jsxs(B,{variant:"primary",onClick:C,children:[s.jsx(G,{className:"me-2"}),"Nuevo Servicio"]})}),s.jsx(f,{data:(i==null?void 0:i.services)||[],columns:b,loading:u,onEdit:w,onDelete:M,emptyMessage:"No hay servicios registrados"}),s.jsx(V,{show:h,onHide:()=>r(!1),title:a!=null&&a.id?"Editar Servicio":"Nuevo Servicio",data:a||S,fields:D,onSubmit:A,loading:g.isLoading||v.isLoading,submitText:a!=null&&a.id?"Actualizar":"Crear"})]}):s.jsxs("div",{className:"fade-in",children:[s.jsx(x,{title:"Gestión de Servicios",subtitle:"Visualiza los servicios disponibles en el sistema",icon:t}),s.jsxs(J,{variant:"warning",className:"d-flex align-items-center",children:[s.jsx(z,{className:"me-2"}),"No tienes permisos para gestionar servicios. Contacta al administrador."]}),s.jsx(f,{data:(i==null?void 0:i.services)||[],columns:b,loading:u,emptyMessage:"No hay servicios registrados"})]})}export{ne as default};
//# sourceMappingURL=Servicios-CcseUixw.js.map
