import{r as y,o as U,p as W,j as e,as as B,at as r,aa as q,ac as Q,au as X,k as Y,G as Z,a0 as O,B as C,y as F}from"./index-o7c7tdkB.js";import{R,C as $}from"./PageHeader-C0hqpNJa.js";import{I as G}from"./InputGroup-CsBCMGWc.js";import{F as P}from"./Form-CNH_JlrK.js";const V=y.forwardRef(({bsPrefix:p,className:h,striped:x,bordered:k,borderless:u,hover:g,size:b,variant:f,responsive:N,...T},w)=>{const c=U(p,"table"),m=W(h,c,f&&`${c}-${f}`,b&&`${c}-${b}`,x&&`${c}-${typeof x=="string"?`striped-${x}`:"striped"}`,k&&`${c}-bordered`,u&&`${c}-borderless`,g&&`${c}-hover`),l=e.jsx("table",{...T,className:m,ref:w});if(N){let i=`${c}-responsive`;return typeof N=="string"&&(i=`${i}-${N}`),e.jsx("div",{className:i,children:l})}return l});V.displayName="Table";const te=({data:p=[],columns:h=[],searchable:x=!0,filterable:k=!0,actions:u=[],onEdit:g,onDelete:b,onView:f,loading:N=!1,emptyMessage:T="No hay datos disponibles",className:w="",totalItems:c=0,itemsPerPage:m=20,currentPage:l=1,onPageChange:i,onSearch:M,onFilter:a,filterOptions:D=null})=>{const[I,_]=y.useState(""),[j,H]=y.useState(""),[v,L]=y.useState("asc"),S=y.useMemo(()=>{let s=p;return c>0||(I&&x&&(s=s.filter(t=>h.some(d=>{const n=d.accessor?t[d.accessor]:"";return String(n).toLowerCase().includes(I.toLowerCase())}))),j&&(s=[...s].sort((t,d)=>{const n=t[j],E=d[j];return n<E?v==="asc"?-1:1:n>E?v==="asc"?1:-1:0}))),s},[p,I,j,v,h,x,c]),o=c>0?Math.ceil(c/m):Math.ceil(S.length/m),z=c>0?p:S.slice((l-1)*m,l*m),A=s=>{j===s?L(v==="asc"?"desc":"asc"):(H(s),L("asc"))},J=s=>j!==s?null:v==="asc"?"↑":"↓",K=(s,t)=>{const d=t.accessor?s[t.accessor]:"";return t.render?t.render(d,s):t.type==="badge"?e.jsx(F,{bg:t.badgeColor||"secondary",children:d}):t.type==="date"?new Date(d).toLocaleDateString("es-ES"):d};return N?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),e.jsx("p",{className:"mt-2 text-muted",children:"Cargando datos..."})]}):e.jsxs("div",{className:`data-table ${w}`,children:[(x||k)&&e.jsx("div",{className:"table-controls bg-light p-3 rounded-top border",children:e.jsxs(R,{className:"align-items-center",children:[x&&e.jsx($,{md:6,children:e.jsxs(G,{children:[e.jsx(G.Text,{children:e.jsx(B,{})}),e.jsx(P.Control,{type:"text",placeholder:"Buscar por nombre, email, rol...",value:I,onChange:s=>{_(s.target.value),M&&(clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{M(s.target.value)},500))}})]})}),k&&e.jsx($,{md:6,className:"text-end",children:e.jsxs(r,{children:[e.jsxs(r.Toggle,{variant:"outline-secondary",size:"sm",children:[e.jsx(q,{className:"me-1"}),"Filtros"]}),e.jsxs(r.Menu,{children:[e.jsx(r.Item,{onClick:()=>a&&a({}),children:"Limpiar filtros"}),e.jsx(r.Divider,{}),D?D.map((s,t)=>e.jsxs(Q.Fragment,{children:[e.jsx(r.Header,{children:s.title}),s.options.map((d,n)=>e.jsx(r.Item,{onClick:()=>a&&a(d.filter),children:d.label},n)),t<D.length-1&&e.jsx(r.Divider,{})]},t)):e.jsxs(e.Fragment,{children:[e.jsx(r.Header,{children:"Por Rol"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"admin"}),children:"Administradores"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"vendedor_comercial"}),children:"Vendedores Comerciales"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"jefa_comercial"}),children:"Jefas Comerciales"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"jefe_laboratorio"}),children:"Jefes de Laboratorio"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"usuario_laboratorio"}),children:"Usuarios de Laboratorio"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"soporte"}),children:"Soporte"}),e.jsx(r.Item,{onClick:()=>a&&a({role:"gerencia"}),children:"Gerencia"}),e.jsx(r.Divider,{}),e.jsx(r.Header,{children:"Por Área"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Comercial"}),children:"Comercial"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Laboratorio"}),children:"Laboratorio"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Sistemas"}),children:"Sistemas"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Gerencia"}),children:"Gerencia"}),e.jsx(r.Item,{onClick:()=>a&&a({area:"Soporte"}),children:"Soporte"})]})]})]})})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs(V,{hover:!0,className:"mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[h.map((s,t)=>e.jsx("th",{className:s.sortable?"cursor-pointer":"",onClick:()=>s.sortable&&A(s.accessor),style:{minWidth:s.width||"auto"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[s.header,s.sortable&&e.jsx("span",{className:"ms-1 text-muted",children:J(s.accessor)})]})},t)),u.length>0&&e.jsx("th",{width:"120",className:"text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:z.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:h.length+(u.length>0?1:0),className:"text-center py-5",children:e.jsxs("div",{className:"text-muted",children:[e.jsx(B,{size:48,className:"mb-3 opacity-50"}),e.jsx("p",{className:"mb-0",children:T})]})})}):z.map((s,t)=>e.jsxs("tr",{children:[h.map((d,n)=>e.jsx("td",{children:K(s,d)},n)),u.length>0&&e.jsx("td",{className:"text-center",children:e.jsxs(r,{children:[e.jsx(r.Toggle,{variant:"link",size:"sm",className:"text-muted",children:e.jsx(X,{})}),e.jsxs(r.Menu,{children:[f&&e.jsxs(r.Item,{onClick:()=>f(s),children:[e.jsx(Y,{className:"me-2"}),"Ver"]}),g&&e.jsxs(r.Item,{onClick:()=>g(s),children:[e.jsx(Z,{className:"me-2"}),"Editar"]}),b&&e.jsxs(r.Item,{onClick:()=>b(s),className:"text-danger",children:[e.jsx(O,{className:"me-2"}),"Eliminar"]})]})]})})]},s.id||t))})]})}),o>1&&e.jsx("div",{className:"table-footer bg-light p-3 rounded-bottom border border-top-0",children:e.jsxs(R,{className:"align-items-center",children:[e.jsx($,{children:e.jsxs("small",{className:"text-muted",children:["Mostrando ",(l-1)*m+1," a ",Math.min(l*m,c||S.length)," de ",c||S.length," registros"]})}),e.jsx($,{xs:"auto",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(C,{variant:"outline-secondary",size:"sm",disabled:l===1,onClick:()=>i?i(1):setCurrentPage(1),title:"Primera página",children:"««"}),e.jsx(C,{variant:"outline-secondary",size:"sm",disabled:l===1,onClick:()=>i?i(l-1):setCurrentPage(l-1),title:"Página anterior",children:"«"}),(()=>{const s=[],t=Math.max(1,l-1),d=Math.min(o,t+2);for(let n=t;n<=d;n++)s.push(e.jsx(C,{variant:l===n?"primary":"outline-secondary",size:"sm",onClick:()=>i?i(n):setCurrentPage(n),className:"px-3",children:n},n));return s})(),e.jsx(C,{variant:"outline-secondary",size:"sm",disabled:l===o,onClick:()=>i?i(l+1):setCurrentPage(l+1),title:"Página siguiente",children:"»"}),e.jsx(C,{variant:"outline-secondary",size:"sm",disabled:l===o,onClick:()=>i?i(o):setCurrentPage(o),title:"Última página",children:"»»"}),e.jsxs("div",{className:"d-flex align-items-center gap-1 ms-3",children:[e.jsx("span",{className:"text-muted small",children:"Ir a:"}),e.jsx("input",{type:"number",min:"1",max:o,className:"form-control form-control-sm",style:{width:"60px"},placeholder:"...",onKeyPress:s=>{if(s.key==="Enter"){const t=parseInt(s.target.value);t>=1&&t<=o?(i?i(t):setCurrentPage(t),s.target.value=""):(i?i(o):setCurrentPage(o),s.target.value="")}},title:`Ingresa un número del 1 al ${o}`})]})]})})]})})]})};export{te as D};
//# sourceMappingURL=DataTable-BnIKqI-b.js.map
