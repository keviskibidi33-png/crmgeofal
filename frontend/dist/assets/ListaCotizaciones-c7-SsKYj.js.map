{"version":3,"file":"ListaCotizaciones-c7-SsKYj.js","sources":["../../src/pages/ListaCotizaciones.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport ModuloBase from '../components/ModuloBase';\r\nimport TableEmpty from '../components/TableEmpty';\r\nimport Toolbar from '../components/Toolbar';\r\nimport { listQuotes, createQuote, listQuoteItems, addQuoteItem } from '../services/quotes';\r\nimport { listCompanies } from '../services/companies';\r\nimport { listProjects } from '../services/projects';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\n\r\nexport default function ListaCotizaciones() {\r\n  const [companies, setCompanies] = useState([]);\r\n  const [projects, setProjects] = useState([]);\r\n  const [filters, setFilters] = useState({ company_id: '', project_id: '', status: '', date_from: '', date_to: '' });\r\n  const [rows, setRows] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const [cRes, pRes] = await Promise.all([\r\n          listCompanies({ page: 1, limit: 100 }),\r\n          listProjects({ page: 1, limit: 200 }),\r\n        ]);\r\n        setCompanies(Array.isArray(cRes?.data) ? cRes.data : (cRes || []));\r\n        setProjects(Array.isArray(pRes?.data) ? pRes.data : (pRes || []));\r\n      } catch (e) {\r\n        // ignore\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n  const params = {};\r\n      if (filters.company_id) params.company_id = filters.company_id;\r\n      if (filters.project_id) params.project_id = filters.project_id;\r\n  if (filters.status) params.status = filters.status;\r\n  if (filters.date_from) params.date_from = filters.date_from;\r\n  if (filters.date_to) params.date_to = filters.date_to;\r\n      const resp = await listQuotes(params);\r\n      const arr = Array.isArray(resp)\r\n        ? resp\r\n        : Array.isArray(resp?.data)\r\n        ? resp.data\r\n        : Array.isArray(resp?.rows)\r\n        ? resp.rows\r\n        : [];\r\n      setRows(arr);\r\n    } catch (e) {\r\n      setError(e.message || 'No se pudo cargar cotizaciones');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => { loadData(); }, []); // initial\r\n\r\n  const filteredProjects = useMemo(() => {\r\n    if (!filters.company_id) return projects;\r\n    const cid = Number(filters.company_id);\r\n    return projects.filter(p => Number(p.company_id) === cid);\r\n  }, [projects, filters.company_id]);\r\n\r\n  const onClone = async (row) => {\r\n    try {\r\n      const payload = {\r\n        project_id: row.project_id,\r\n        variant_id: row.variant_id || null,\r\n        client_contact: row.client_contact,\r\n        client_email: row.client_email,\r\n        client_phone: row.client_phone,\r\n        issue_date: new Date().toISOString().slice(0,10),\r\n        subtotal: row.subtotal,\r\n        igv: row.igv,\r\n        total: row.total,\r\n        status: 'borrador',\r\n        meta: { from_quote_id: row.id, ...row.meta }\r\n      };\r\n      const created = await createQuote(payload);\r\n      // Copiar ítems\r\n      const its = await listQuoteItems(row.id);\r\n      const items = Array.isArray(its?.data) ? its.data : (its || []);\r\n      for (const it of items) {\r\n        await addQuoteItem({\r\n          quote_id: created.id,\r\n          code: it.code,\r\n          description: it.description,\r\n          norm: it.norm,\r\n          unit_price: Number(it.unit_price || 0),\r\n          quantity: Number(it.quantity || 0),\r\n          partial_price: Number(it.partial_price || 0),\r\n        });\r\n      }\r\n      navigate(`/cotizaciones/${created.id}`);\r\n    } catch (e) {\r\n      alert('No se pudo clonar');\r\n    }\r\n  };\r\n\r\n  const exportUrl = (row, type) => {\r\n    const base = import.meta.env?.VITE_API_URL?.replace(/\\/$/, '') || '';\r\n    const path = `/api/quotes/${row.id}/export/${type}`;\r\n    return base && /\\/api$/i.test(base) ? `${base}${path.replace(/^\\/api/, '')}` : `${base}${path}`;\r\n  };\r\n\r\n  const setPreset = (preset) => {\r\n    const today = new Date();\r\n    if (preset === 'today') {\r\n      const d = today.toISOString().slice(0,10);\r\n      setFilters(f => ({ ...f, date_from: d, date_to: d }));\r\n      return;\r\n    }\r\n    if (preset === '7d') {\r\n      const to = today.toISOString().slice(0,10);\r\n      const fromDate = new Date(today); fromDate.setDate(today.getDate() - 6);\r\n      const from = fromDate.toISOString().slice(0,10);\r\n      setFilters(f => ({ ...f, date_from: from, date_to: to }));\r\n      return;\r\n    }\r\n    if (preset === 'month') {\r\n      const y = today.getFullYear();\r\n      const m = String(today.getMonth() + 1).padStart(2, '0');\r\n      const first = `${y}-${m}-01`;\r\n      const nextMonth = new Date(y, today.getMonth() + 1, 1);\r\n      const last = new Date(nextMonth - 1);\r\n      const lastStr = last.toISOString().slice(0,10);\r\n      setFilters(f => ({ ...f, date_from: first, date_to: lastStr }));\r\n    }\r\n  };\r\n\r\n  const StatusBadge = ({ status }) => {\r\n    const map = {\r\n      borrador: 'secondary',\r\n      enviado: 'primary',\r\n      aceptado: 'success',\r\n      rechazado: 'danger',\r\n    };\r\n    const cls = map[String(status || '').toLowerCase()] || 'secondary';\r\n    return <span className={`badge text-bg-${cls} text-capitalize`}>{status || '—'}</span>;\r\n  };\r\n\r\n  return (\r\n    <ModuloBase titulo=\"Cotizaciones\" descripcion=\"Lista de cotizaciones por cliente y proyecto\">\r\n      <Toolbar\r\n        compact\r\n        left={\r\n          <div className=\"row g-2 w-100\">\r\n            <div className=\"col-12 col-md-3\">\r\n              <label className=\"form-label\">Cliente</label>\r\n              <select className=\"form-select\" value={filters.company_id} onChange={e=>setFilters({ ...filters, company_id: e.target.value, project_id: '' })}>\r\n                <option value=\"\">Todos</option>\r\n                {companies.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n              </select>\r\n            </div>\r\n            <div className=\"col-12 col-md-3\">\r\n              <label className=\"form-label\">Proyecto</label>\r\n              <select className=\"form-select\" value={filters.project_id} onChange={e=>setFilters({ ...filters, project_id: e.target.value })}>\r\n                <option value=\"\">Todos</option>\r\n                {filteredProjects.map(p => <option key={p.id} value={p.id}>{p.name}</option>)}\r\n              </select>\r\n            </div>\r\n            <div className=\"col-6 col-md-2\">\r\n              <label className=\"form-label\">Estado</label>\r\n              <select className=\"form-select\" value={filters.status} onChange={e=>setFilters({ ...filters, status: e.target.value })}>\r\n                <option value=\"\">Todos</option>\r\n                <option value=\"borrador\">Borrador</option>\r\n                <option value=\"enviado\">Enviado</option>\r\n                <option value=\"aceptado\">Aceptado</option>\r\n                <option value=\"rechazado\">Rechazado</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"col-6 col-md-2\">\r\n              <label className=\"form-label\">Desde</label>\r\n              <input type=\"date\" className=\"form-control\" value={filters.date_from} onChange={e=>setFilters({ ...filters, date_from: e.target.value })} />\r\n            </div>\r\n            <div className=\"col-6 col-md-2\">\r\n              <label className=\"form-label\">Hasta</label>\r\n              <input type=\"date\" className=\"form-control\" value={filters.date_to} onChange={e=>setFilters({ ...filters, date_to: e.target.value })} />\r\n            </div>\r\n            <div className=\"col-6 col-md-3\">\r\n              <label className=\"form-label\">Presets</label>\r\n              <div className=\"d-flex gap-2 flex-wrap\">\r\n                <button className=\"btn btn-sm btn-outline-secondary\" type=\"button\" onClick={()=>setPreset('today')}>Hoy</button>\r\n                <button className=\"btn btn-sm btn-outline-secondary\" type=\"button\" onClick={()=>setPreset('7d')}>7 días</button>\r\n                <button className=\"btn btn-sm btn-outline-secondary\" type=\"button\" onClick={()=>setPreset('month')}>Este mes</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        }\r\n        right={\r\n          <div className=\"d-flex gap-2 flex-wrap\">\r\n            <button className=\"btn btn-outline-primary\" onClick={loadData} disabled={loading}>{loading ? 'Cargando...' : 'Filtrar'}</button>\r\n            <Link to=\"/cotizaciones/nueva/lem\" className=\"btn btn-primary\">Nueva LEM</Link>\r\n          </div>\r\n        }\r\n      />\r\n\r\n      {error && <div className=\"alert alert-danger mt-3\">{error}</div>}\r\n\r\n      <div className=\"table-responsive mt-3\">\r\n        <table className=\"table table-striped align-middle\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Proyecto</th>\r\n              <th>Fecha</th>\r\n              <th>Subtotal</th>\r\n              <th>IGV</th>\r\n              <th>Total</th>\r\n              <th>Estado</th>\r\n              <th>Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {(Array.isArray(rows) ? rows : []).map(row => (\r\n              <tr key={row.id}>\r\n                <td>{row.id}</td>\r\n                <td>{row.project_name || row.project_id}</td>\r\n                <td>{row.issue_date?.slice(0,10)}</td>\r\n                <td>S/ {Number(row.subtotal||0).toFixed(2)}</td>\r\n                <td>S/ {Number(row.igv||0).toFixed(2)}</td>\r\n                <td><strong>S/ {Number(row.total||0).toFixed(2)}</strong></td>\r\n                <td><StatusBadge status={row.status} /></td>\r\n                <td className=\"d-flex gap-2\">\r\n                  <Link to={`/cotizaciones/${row.id}`} className=\"btn btn-sm btn-outline-secondary\">Ver/Editar</Link>\r\n                  <button className=\"btn btn-sm btn-outline-primary\" onClick={() => onClone(row)}>Clonar</button>\r\n                  <a className=\"btn btn-sm btn-outline-success\" href={exportUrl(row, 'pdf')} target=\"_blank\" rel=\"noreferrer\">PDF</a>\r\n                  <a className=\"btn btn-sm btn-outline-success\" href={exportUrl(row, 'excel')} target=\"_blank\" rel=\"noreferrer\">Excel</a>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {rows.length === 0 && !loading && (\r\n              <TableEmpty colSpan={8} label=\"Sin resultados\" />\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </ModuloBase>\r\n  );\r\n}\r\n"],"names":["ListaCotizaciones","companies","setCompanies","useState","projects","setProjects","filters","setFilters","rows","setRows","loading","setLoading","error","setError","navigate","useNavigate","useEffect","cRes","pRes","listCompanies","listProjects","loadData","params","resp","listQuotes","arr","e","filteredProjects","useMemo","cid","p","onClone","row","payload","created","createQuote","its","listQuoteItems","items","it","addQuoteItem","exportUrl","type","base","path","setPreset","preset","today","d","f","to","fromDate","from","y","m","first","nextMonth","lastStr","StatusBadge","status","cls","ModuloBase","jsx","Toolbar","jsxs","c","Link","_a","TableEmpty"],"mappings":"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"}