{"version":3,"file":"VendedorComercialDashboard-BUzPc1cs.js","sources":["../../src/pages/dashboards/VendedorComercialDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Card, Alert, Spinner } from 'react-bootstrap';\r\nimport { FiTarget, FiUsers, FiDollarSign, FiTrendingUp, FiActivity, FiBriefcase } from 'react-icons/fi';\r\nimport PageHeader from '../../components/common/PageHeader';\r\nimport StatsCard from '../../components/common/StatsCard';\r\nimport apiFetch from '../../services/api';\r\n\r\nexport default function VendedorComercialDashboard() {\r\n  const [stats, setStats] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  const fetchDashboardData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await apiFetch('/api/role-dashboard/vendedor-comercial');\r\n      setStats(data);\r\n    } catch (err) {\r\n      console.error('Error fetching dashboard data:', err);\r\n      setError('Error al cargar los datos del dashboard');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container fluid className=\"p-4\">\r\n        <div className=\"d-flex justify-content-center align-items-center\" style={{ height: '400px' }}>\r\n          <Spinner animation=\"border\" size=\"lg\" />\r\n        </div>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Container fluid className=\"p-4\">\r\n        <Alert variant=\"danger\">{error}</Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container fluid className=\"p-4\">\r\n      <PageHeader\r\n        title=\"Mi Dashboard Comercial\"\r\n        subtitle=\"Métricas personales y rendimiento\"\r\n        icon={FiTarget}\r\n      />\r\n\r\n      {/* Métricas principales */}\r\n      <Row className=\"mb-4\">\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Mis Cotizaciones\"\r\n            value={stats?.misCotizaciones || 0}\r\n            icon={FiTarget}\r\n            color=\"primary\"\r\n            subtitle={`${stats?.cotizacionesAprobadas || 0} aprobadas`}\r\n          />\r\n        </Col>\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Clientes\"\r\n            value={stats?.totalClientes || 0}\r\n            icon={FiUsers}\r\n            color=\"info\"\r\n            subtitle={`${stats?.clientesNuevosEsteMes || 0} nuevos este mes`}\r\n          />\r\n        </Col>\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Ingresos Generados\"\r\n            value={`$${(stats?.ingresosGenerados || 0).toLocaleString()}`}\r\n            icon={FiDollarSign}\r\n            color=\"success\"\r\n            subtitle={`${stats?.cotizacionesFacturadas || 0} facturadas`}\r\n          />\r\n        </Col>\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Tasa de Conversión\"\r\n            value={`${stats?.conversionRate || 0}%`}\r\n            icon={FiTrendingUp}\r\n            color=\"warning\"\r\n            subtitle=\"Cotizaciones aprobadas\"\r\n          />\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Métricas de proyectos y mensuales */}\r\n      <Row className=\"mb-4\">\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Proyectos Activos\"\r\n            value={stats?.proyectosActivos || 0}\r\n            icon={FiBriefcase}\r\n            color=\"primary\"\r\n            subtitle={`${stats?.proyectosCompletados || 0} completados`}\r\n          />\r\n        </Col>\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Cotizaciones Este Mes\"\r\n            value={stats?.cotizacionesEsteMes || 0}\r\n            icon={FiActivity}\r\n            color=\"info\"\r\n            subtitle=\"Nuevas cotizaciones\"\r\n          />\r\n        </Col>\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Ingresos Este Mes\"\r\n            value={`$${(stats?.ingresosEsteMes || 0).toLocaleString()}`}\r\n            icon={FiDollarSign}\r\n            color=\"success\"\r\n            subtitle=\"Ingresos del mes actual\"\r\n          />\r\n        </Col>\r\n        <Col lg={3} md={6} className=\"mb-3\">\r\n          <StatsCard\r\n            title=\"Clientes Nuevos\"\r\n            value={stats?.clientesNuevosEsteMes || 0}\r\n            icon={FiUsers}\r\n            color=\"warning\"\r\n            subtitle=\"Este mes\"\r\n          />\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Cotizaciones recientes */}\r\n      <Row className=\"mb-4\">\r\n        <Col lg={6}>\r\n          <Card className=\"shadow-sm\">\r\n            <Card.Header>\r\n              <h5 className=\"mb-0\">Mis Cotizaciones Recientes</h5>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              {stats?.cotizacionesRecientes?.length > 0 ? (\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-sm\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Código</th>\r\n                        <th>Cliente</th>\r\n                        <th>Monto</th>\r\n                        <th>Estado</th>\r\n                        <th>Fecha</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {stats.cotizacionesRecientes.map((cotizacion, index) => (\r\n                        <tr key={index}>\r\n                          <td>{cotizacion.quote_number}</td>\r\n                          <td>{cotizacion.client_contact}</td>\r\n                          <td>${cotizacion.total_amount?.toLocaleString() || 0}</td>\r\n                          <td>\r\n                            <span className={`badge ${\r\n                              cotizacion.status === 'aprobada' ? 'bg-success' :\r\n                              cotizacion.status === 'facturada' ? 'bg-primary' :\r\n                              cotizacion.status === 'pendiente' ? 'bg-warning' : 'bg-secondary'\r\n                            }`}>\r\n                              {cotizacion.status}\r\n                            </span>\r\n                          </td>\r\n                          <td>{new Date(cotizacion.created_at).toLocaleDateString()}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-muted\">No hay cotizaciones recientes</p>\r\n              )}\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n\r\n        {/* Clientes recientes */}\r\n        <Col lg={6}>\r\n          <Card className=\"shadow-sm\">\r\n            <Card.Header>\r\n              <h5 className=\"mb-0\">Mis Clientes Recientes</h5>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              {stats?.clientesRecientes?.length > 0 ? (\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-sm\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Empresa</th>\r\n                        <th>RUC</th>\r\n                        <th>Última Cotización</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {stats.clientesRecientes.map((cliente, index) => (\r\n                        <tr key={index}>\r\n                          <td>{cliente.name}</td>\r\n                          <td>{cliente.ruc}</td>\r\n                          <td>{new Date(cliente.ultima_cotizacion).toLocaleDateString()}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-muted\">No hay clientes recientes</p>\r\n              )}\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n      {/* Proyectos recientes */}\r\n      <Row>\r\n        <Col>\r\n          <Card className=\"shadow-sm\">\r\n            <Card.Header>\r\n              <h5 className=\"mb-0\">Mis Proyectos Recientes</h5>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              {stats?.proyectosRecientes?.length > 0 ? (\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-sm\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Proyecto</th>\r\n                        <th>Empresa</th>\r\n                        <th>Estado</th>\r\n                        <th>Fecha Creación</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {stats.proyectosRecientes.map((proyecto, index) => (\r\n                        <tr key={index}>\r\n                          <td>{proyecto.name}</td>\r\n                          <td>{proyecto.company_name}</td>\r\n                          <td>\r\n                            <span className={`badge ${\r\n                              proyecto.status === 'activo' ? 'bg-success' :\r\n                              proyecto.status === 'completado' ? 'bg-primary' :\r\n                              proyecto.status === 'pendiente' ? 'bg-warning' : 'bg-secondary'\r\n                            }`}>\r\n                              {proyecto.status}\r\n                            </span>\r\n                          </td>\r\n                          <td>{new Date(proyecto.created_at).toLocaleDateString()}</td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              ) : (\r\n                <p className=\"text-muted\">No hay proyectos recientes</p>\r\n              )}\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n"],"names":["VendedorComercialDashboard","stats","setStats","useState","loading","setLoading","error","setError","useEffect","fetchDashboardData","data","apiFetch","err","jsx","Container","Spinner","Alert","jsxs","PageHeader","FiTarget","Row","Col","StatsCard","FiUsers","FiDollarSign","FiTrendingUp","FiBriefcase","FiActivity","Card","cotizacion","index","_a","cliente","proyecto"],"mappings":"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"}