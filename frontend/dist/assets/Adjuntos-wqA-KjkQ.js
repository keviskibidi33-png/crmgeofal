import{r as n,j as e,T as Be,a7 as Oe,c as $e,e as fe,x as ne,C as v,B as h,_ as Ge,I as se,J as le,a8 as ye,ag as We,h as Xe,L as ve,S as Re,A as Je,W as H,f as He}from"./index-ACE2z3o6.js";import{P as Ve}from"./PageHeader-ChVecgD8.js";import{D as Ye}from"./DataTable-Bq1A8Kk-.js";import{S as ie}from"./StatsCard-DrHuyNFC.js";import{T as Qe}from"./Toast-D71wWdRy.js";import{d as Ke,u as Ze,b as ea,a as aa,g as sa}from"./attachments-D_FDee0Q.js";import{l as ke,c as _e,u as ia}from"./projects-DQRiAtIF.js";import{l as ta}from"./companies-B_TeJKU-.js";import{C as ra,R as $}from"./Row-DR7Snyel.js";import{C as d}from"./Col-DolGQwSC.js";import{C as T}from"./Card-DrK-EhIU.js";import{A as Ne}from"./Alert-ChgNCOQW.js";import{F as c}from"./Form-DLwAlTjb.js";import{P as oa}from"./ProgressBar-DxXS9ZdY.js";import{S as V}from"./Spinner-CGz_3N-E.js";/* empty css                  */import"./InputGroup-DueyeE6m.js";import"./Table-BW8--UG8.js";import"./ElementChildren-DF5xNtl2.js";function Ce({value:f,onChange:x}){const[g,I]=n.useState([]),[q,N]=n.useState([]),[w,C]=n.useState(!1),[o,E]=n.useState({company_id:"",project_id:"",project_name:"",location:""}),[F,_]=n.useState(""),[y,Y]=n.useState(!1),[S,L]=n.useState(null),[U,B]=n.useState(!1);n.useEffect(()=>{if(y){document.body.style.overflow="hidden";const i=r=>{r.key==="Escape"&&A()};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}}else document.body.style.overflow="unset";return()=>{document.body.style.overflow="unset"}},[y]);const[t,l]=n.useState({name:"",location:"",sector:"",status:"activo",description:"",start_date:"",end_date:"",priority:"media"});n.useEffect(()=>{(async()=>{try{C(!0);const i=await ta({page:1,limit:50}),r=Array.isArray(i==null?void 0:i.data)?i.data:i;I(r||[])}catch{_("No se pudo cargar empresas")}finally{C(!1)}})()},[]),n.useEffect(()=>{if(!o.company_id){N([]);return}const i=setTimeout(async()=>{try{C(!0),_(""),console.log("🔍 Cargando proyectos para company_id:",o.company_id);const r=await ke({page:1,limit:50,company_id:o.company_id}),u=Array.isArray(r==null?void 0:r.data)?r.data:r;N(u||[]),console.log("✅ Proyectos cargados:",(u==null?void 0:u.length)||0)}catch(r){console.error("❌ Error cargando proyectos:",r),_("No se pudo cargar proyectos del cliente"),N([])}finally{C(!1)}},300);return()=>clearTimeout(i)},[o.company_id]);const p=n.useMemo(()=>g.find(i=>String(i.id)===String(o.company_id)),[g,o.company_id]),b=n.useMemo(()=>q.find(i=>String(i.id)===String(o.project_id)),[q,o.project_id]),P=n.useMemo(()=>o.company_id?q.filter(i=>String(i.company_id)===String(o.company_id)):[],[q,o.company_id]);n.useEffect(()=>{if(typeof x=="function"){const i={company_id:o.company_id?Number(o.company_id):null,company:p||null,project_id:o.project_id?Number(o.project_id):null,project:b||null,project_name:o.project_name,location:o.location},r=JSON.stringify(f),u=JSON.stringify(i);r!==u&&(console.log("🔄 CompanyProjectPicker - onChange:",i),x(i))}},[o.company_id,o.project_id,o.project_name,o.location,p,b,x,f]);const G=async()=>{if(!(!o.company_id||!o.project_name||!o.location))try{C(!0);const i={company_id:Number(o.company_id),name:o.project_name,location:o.location},r=await _e(i);N(u=>[...u,r]),typeof x=="function"&&x({...f,project_id:r.id,project:r,project_name:r.name,location:r.location}),E(u=>({...u,project_id:r.id,project_name:"",location:""})),_("")}catch(i){_(i.message||"No se pudo crear proyecto")}finally{C(!1)}},D=(i=null)=>{if(console.log("🔍 openProjectModal llamado con:",i),console.log("🔍 showProjectModal actual:",y),console.log("🔍 modalLoading actual:",U),U){console.log("⚠️ Modal está cargando, esperando...");return}y?console.log("🔄 Modal ya abierto, cambiando modo..."):(console.log("🔍 Abriendo modal para proyecto:",(i==null?void 0:i.name)||"nuevo"),Y(!0)),i?(console.log("🔍 Configurando modo edición para:",i.name),L(i),l({name:i.name||"",location:i.location||"",sector:i.sector||"",status:i.status||"activo",description:i.description||"",start_date:i.start_date||"",end_date:i.end_date||"",priority:i.priority||"media"})):(console.log("🔍 Configurando modo creación"),L(null),l({name:"",location:"",sector:"",status:"activo",description:"",start_date:"",end_date:"",priority:"media"})),console.log("✅ Modal configurado correctamente")},A=()=>{console.log("🔍 Cerrando modal de proyectos"),Y(!1),L(null),B(!1),l({name:"",location:"",sector:"",status:"activo",description:"",start_date:"",end_date:"",priority:"media"})},te=async()=>{if(!o.company_id||!t.name||!t.location){_("Nombre y ubicación son requeridos");return}try{C(!0);const i={company_id:Number(o.company_id),...t};let r;S?(r=await ia(S.id,i),N(u=>u.map(z=>z.id===S.id?r:z))):(r=await _e(i),N(u=>[...u,r])),E(u=>({...u,project_id:r.id})),typeof x=="function"&&x({...f,project_id:r.id,project:r,project_name:r.name,location:r.location}),A(),_("")}catch(i){_(i.message||"No se pudo guardar el proyecto")}finally{C(!1)}};return e.jsxs("div",{className:"border rounded p-3",children:[e.jsx("h6",{children:"Cliente y Proyecto"}),F&&e.jsx("div",{className:"alert alert-warning py-1 my-2",children:F}),e.jsxs("div",{className:"row g-2 align-items-end",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Cliente"}),e.jsxs("select",{className:"form-select",value:o.company_id,disabled:w,onChange:i=>E({...o,company_id:i.target.value,project_id:""}),children:[e.jsx("option",{value:"",children:"Seleccione..."}),g.map(i=>e.jsxs("option",{value:i.id,children:[i.name," ",i.ruc?`(RUC ${i.ruc})`:""]},i.id))]})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Proyecto"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("input",{className:"form-control",value:b?`${b.name} | ${b.location}`:"Seleccionar proyecto...",readOnly:!0,style:{backgroundColor:"#f8f9fa",cursor:"pointer"},onClick:()=>o.company_id&&D()}),e.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>o.company_id&&D(),disabled:!o.company_id||w,title:"Gestionar proyectos",children:"📋"})]}),b&&e.jsxs("div",{className:"small text-muted mt-1",children:["Sector: ",b.sector||"Sin sector"," | Estado: ",b.status||"Sin estado"]})]}),o.project_id==="new"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"Nombre del proyecto"}),e.jsx("input",{className:"form-control",value:o.project_name,onChange:i=>E({...o,project_name:i.target.value}),placeholder:"Ej. Control de calidad de mezclas"})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"Ubicación"}),e.jsx("input",{className:"form-control",value:o.location,onChange:i=>E({...o,location:i.target.value}),placeholder:"Ej. Lima, Perú"})]}),e.jsx("div",{className:"col-md-2 d-grid",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:G,disabled:!o.company_id||!o.project_name||!o.location,children:"Crear"})})]}),o.project_id&&o.project_id!=="new"&&e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Ubicación"}),e.jsx("input",{className:"form-control",value:(b==null?void 0:b.location)||"",readOnly:!0})]}),p&&e.jsxs("div",{className:"small text-muted mt-2",children:["Contacto: ",p.contact_name," · Tel: ",p.phone," · Email: ",p.email]})]}),y&&Be.createPortal(e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:9999},onClick:i=>{i.target===i.currentTarget&&A()},children:e.jsx("div",{className:"modal-dialog modal-lg",style:{margin:"2rem auto"},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:S?"Editar Proyecto":"Gestionar Proyectos"}),e.jsx("button",{type:"button",className:"btn-close",onClick:A})]}),e.jsx("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:S?e.jsx("div",{children:e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Nombre del Proyecto *"}),e.jsx("input",{type:"text",className:"form-control",value:t.name,onChange:i=>l(r=>({...r,name:i.target.value})),required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Ubicación *"}),e.jsx("input",{type:"text",className:"form-control",value:t.location,onChange:i=>l(r=>({...r,location:i.target.value})),required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Sector"}),e.jsxs("select",{className:"form-select",value:t.sector,onChange:i=>l(r=>({...r,sector:i.target.value})),children:[e.jsx("option",{value:"",children:"Seleccionar sector..."}),e.jsx("option",{value:"Construcción",children:"Construcción"}),e.jsx("option",{value:"Geotécnico",children:"Geotécnico"}),e.jsx("option",{value:"Laboratorio",children:"Laboratorio"}),e.jsx("option",{value:"Consultoría",children:"Consultoría"}),e.jsx("option",{value:"Capacitación",children:"Capacitación"}),e.jsx("option",{value:"Auditoría",children:"Auditoría"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Estado"}),e.jsxs("select",{className:"form-select",value:t.status,onChange:i=>l(r=>({...r,status:i.target.value})),children:[e.jsx("option",{value:"activo",children:"Activo"}),e.jsx("option",{value:"en_proceso",children:"En Proceso"}),e.jsx("option",{value:"completado",children:"Completado"}),e.jsx("option",{value:"pausado",children:"Pausado"}),e.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Fecha de Inicio"}),e.jsx("input",{type:"date",className:"form-control",value:t.start_date,onChange:i=>l(r=>({...r,start_date:i.target.value}))})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Fecha de Fin"}),e.jsx("input",{type:"date",className:"form-control",value:t.end_date,onChange:i=>l(r=>({...r,end_date:i.target.value}))})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Prioridad"}),e.jsxs("select",{className:"form-select",value:t.priority,onChange:i=>l(r=>({...r,priority:i.target.value})),children:[e.jsx("option",{value:"baja",children:"Baja"}),e.jsx("option",{value:"media",children:"Media"}),e.jsx("option",{value:"alta",children:"Alta"}),e.jsx("option",{value:"urgente",children:"Urgente"})]})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Descripción"}),e.jsx("textarea",{className:"form-control",rows:"3",value:t.description,onChange:i=>l(r=>({...r,description:i.target.value})),placeholder:"Descripción detallada del proyecto..."})]})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("h6",{children:["Proyectos de ",p==null?void 0:p.name]}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>D(),children:"+ Nuevo Proyecto"})]}),w?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),e.jsx("p",{className:"mt-2 text-muted",children:"Cargando proyectos..."})]}):P.length>0?e.jsx("div",{className:"list-group",children:P.map(i=>e.jsx("div",{className:"list-group-item",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h6",{className:"mb-1",children:i.name}),e.jsxs("p",{className:"mb-1 text-muted",children:["📍 ",i.location," | 🏢 ",i.sector||"Sin sector"," | 📊 ",i.status||"Sin estado"]}),i.description&&e.jsx("small",{className:"text-muted",children:i.description})]}),e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{E(r=>({...r,project_id:i.id})),typeof x=="function"&&x({...f,project_id:i.id,project:i,project_name:i.name,location:i.location}),A()},children:"Seleccionar"}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{console.log("🔍 Botón editar clickeado para proyecto:",i),D(i)},title:"Editar proyecto",children:"✏️"})]})]})},i.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-muted",children:"No hay proyectos para este cliente"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>D(),children:"Crear Primer Proyecto"})]})]})}),e.jsx("div",{className:"modal-footer",children:S?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>D(),children:"← Volver a Lista"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:A,children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:te,disabled:w||!t.name||!t.location,children:w?"Guardando...":"Guardar Cambios"})]}):e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:A,children:"Cerrar"})})]})})}),document.body)]})}const ca={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.18)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center"},na=(f,x)=>{const g={background:"#fff",borderRadius:12,boxShadow:"0 2px 16px #0002",padding:"2rem 2.5rem"};if(x)return{...g,minWidth:340,maxWidth:"none",width:"auto",height:"auto"};switch(f){case"sm":return{...g,minWidth:300,maxWidth:400};case"lg":return{...g,minWidth:500,maxWidth:800};case"xl":return{...g,minWidth:800,maxWidth:1200};default:return{...g,minWidth:340,maxWidth:420}}};function de({open:f,onClose:x,children:g,size:I,className:q}){if(!f)return null;const N=na(I,q);return e.jsx("div",{style:ca,onClick:x,children:e.jsx("div",{style:N,className:q,onClick:w=>w.stopPropagation(),children:g})})}const Se={project_id:"",company_id:"",company:null,project:null,project_name:"",location:"",description:"",file:null,category_id:"",subcategory_id:"",requiere_laboratorio:!1,requiere_ingenieria:!1,requiere_consultoria:!1,requiere_capacitacion:!1,requiere_auditoria:!1};function Pa(){var he;const[f,x]=n.useState(1),[g]=n.useState(20),[I,q]=n.useState(""),[N,w]=n.useState(""),[C,o]=n.useState(""),[E,F]=n.useState({message:"",type:"success",show:!1}),_=Oe(),[y,Y]=n.useState({company_id:null,company:null,project_id:null,project:null,project_name:"",location:""}),[S,L]=n.useState(!1),[U,B]=n.useState(!1),[t,l]=n.useState(Se),[p,b]=n.useState(null),[P,G]=n.useState(null),[D,A]=n.useState(0),[te,i]=n.useState(!1),r=$e();n.useEffect(()=>{var a;(a=_.state)!=null&&a.search&&q(_.state.search)},[_.state]);const{data:u,isLoading:z,refetch:qe}=fe(["allAttachments",f,g,I,N,C,y.project_id],()=>sa({page:f,limit:g,search:I,project_id:y.project_id||N,file_type:C}),{keepPreviousData:!0,refetchOnWindowFocus:!1,staleTime:3e4}),{data:Q}=fe("projectsList",()=>ke({page:1,limit:500}),{staleTime:1/0}),X=n.useMemo(()=>(Q==null?void 0:Q.data)||[],[Q]);n.useMemo(()=>X.find(a=>a.id===parseInt(t.project_id)),[X,t.project_id]),n.useMemo(()=>p?X.find(a=>a.id===parseInt(p.project_id)):null,[X,p]);const R=()=>{refetchCategories(),refetchSubcategories()};n.useEffect(()=>{(S||U)&&R()},[S,U]);const re=a=>{F({message:a,type:"success",show:!0}),r.invalidateQueries("allAttachments"),L(!1),B(!1),l(Se),b(null),G(null),A(0)},oe=(a,s)=>{F({message:(a==null?void 0:a.message)||s,type:"error",show:!0}),A(0)},M=ne(a=>Ze(t.project_id,a),{onSuccess:()=>re("Archivo subido correctamente."),onError:a=>oe(a,"Error al subir archivo.")}),O=ne(({id:a,formData:s})=>ea(a,s),{onSuccess:()=>re("Archivo actualizado correctamente."),onError:a=>oe(a,"Error al actualizar archivo.")}),K=ne(aa,{onSuccess:()=>re("Adjunto eliminado correctamente."),onError:a=>oe(a,"Error al eliminar adjunto.")}),me=a=>{if(a.preventDefault(),!t.file||!t.project_id){F({message:"Debe seleccionar un proyecto y un archivo.",type:"error",show:!0});return}const s=new FormData;s.append("file",t.file),s.append("description",t.description||""),t.category_id&&s.append("category_id",t.category_id),t.subcategory_id&&s.append("subcategory_id",t.subcategory_id),s.append("requiere_laboratorio",t.requiere_laboratorio),s.append("requiere_ingenieria",t.requiere_ingenieria),s.append("requiere_consultoria",t.requiere_consultoria),s.append("requiere_capacitacion",t.requiere_capacitacion),s.append("requiere_auditoria",t.requiere_auditoria),M.mutate(s)},Pe=a=>{b(a),l({project_id:a.project_id,description:a.description||"",file:null,category_id:a.category_id||"",subcategory_id:a.subcategory_id||"",requiere_laboratorio:a.requiere_laboratorio||!1,requiere_ingenieria:a.requiere_ingenieria||!1,requiere_consultoria:a.requiere_consultoria||!1,requiere_capacitacion:a.requiere_capacitacion||!1,requiere_auditoria:a.requiere_auditoria||!1}),B(!0)},ue=a=>{if(a.preventDefault(),!p)return;const s={description:t.description||"",category_id:t.category_id||null,subcategory_id:t.subcategory_id||null,requiere_laboratorio:t.requiere_laboratorio,requiere_ingenieria:t.requiere_ingenieria,requiere_consultoria:t.requiere_consultoria,requiere_capacitacion:t.requiere_capacitacion,requiere_auditoria:t.requiere_auditoria};console.log("🔄 handleEditSubmit - Editing attachment ID:",p.id),console.log("🔄 handleEditSubmit - Upload form data:",t),console.log("🔄 handleEditSubmit - Update data:",s);const m=new FormData;t.file&&m.append("file",t.file),Object.keys(s).forEach(j=>{s[j]!==null&&s[j]!==void 0&&(m.append(j,s[j]),console.log(`🔄 FormData - ${j}:`,s[j]))}),console.log("🔄 FormData entries:");for(let[j,J]of m.entries())console.log(`  ${j}:`,J);O.mutate({id:p.id,formData:m})},Ae=()=>{P&&K.mutate(P.id)},we=async a=>{try{await Ke(a),F({message:"Descarga iniciada correctamente.",type:"success",show:!0})}catch(s){console.error("Error al descargar archivo:",s),F({message:"Error al descargar el archivo.",type:"error",show:!0})}},Ee=a=>{a.preventDefault(),a.stopPropagation(),i(!0)},Fe=a=>{a.preventDefault(),a.stopPropagation(),i(!1)},Le=a=>{a.preventDefault(),a.stopPropagation()},De=a=>{a.preventDefault(),a.stopPropagation(),i(!1);const s=a.dataTransfer.files;s&&s[0]&&l(m=>({...m,file:s[0]}))},ze=a=>{w(a.project_id||""),o(a.file_type||""),x(1)},ce=a=>{var m;switch((m=a.split(".").pop())==null?void 0:m.toLowerCase()){case"pdf":return"📄";case"doc":case"docx":return"📝";case"xls":case"xlsx":return"📊";case"ppt":case"pptx":return"📈";case"jpg":case"jpeg":case"png":case"gif":return"🖼️";case"txt":return"📃";default:return"📎"}},Me=a=>{var j;const s=(j=a.split(".").pop())==null?void 0:j.toLowerCase();return{pdf:{variant:"danger",text:"PDF"},doc:{variant:"primary",text:"DOC"},docx:{variant:"primary",text:"DOCX"},xls:{variant:"success",text:"XLS"},xlsx:{variant:"success",text:"XLSX"},ppt:{variant:"warning",text:"PPT"},pptx:{variant:"warning",text:"PPTX"},jpg:{variant:"info",text:"JPG"},jpeg:{variant:"info",text:"JPEG"},png:{variant:"info",text:"PNG"},gif:{variant:"info",text:"GIF"},txt:{variant:"secondary",text:"TXT"}}[s]||{variant:"secondary",text:(s==null?void 0:s.toUpperCase())||"FILE"}},W=a=>({admin:{variant:"danger",text:"Admin"},jefa_comercial:{variant:"primary",text:"Jefa Comercial"},jefe_laboratorio:{variant:"info",text:"Jefe Lab"},vendedor_comercial:{variant:"success",text:"Vendedor"},usuario_laboratorio:{variant:"warning",text:"Lab User"}})[a]||{variant:"secondary",text:a||"N/A"},pe=a=>({activo:{variant:"success",text:"Activo"},pendiente:{variant:"warning",text:"Pendiente"},completado:{variant:"primary",text:"Completado"},cancelado:{variant:"danger",text:"Cancelado"},pausado:{variant:"secondary",text:"Pausado"}})[a]||{variant:"secondary",text:a||"N/A"},Te=n.useMemo(()=>[{header:"ID",accessor:"id",width:60},{header:"Proyecto",accessor:"project_name",render:(a,s)=>e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:a||"Sin proyecto"}),e.jsxs("div",{className:"small text-muted",children:[e.jsxs("div",{children:["📍 ",s.project_location||"Sin ubicación"]}),e.jsxs("div",{className:"d-flex align-items-center gap-2 mt-1",children:[e.jsx(v,{bg:pe(s.project_status).variant,className:"small",children:pe(s.project_status).text}),s.project_priority&&e.jsx(v,{bg:s.project_priority==="urgent"?"danger":s.project_priority==="high"?"warning":"info",className:"small",children:s.project_priority})]})]})]})},{header:"Empresa",accessor:"company_name",render:(a,s)=>e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:a||"Sin empresa"}),e.jsxs("small",{className:"text-muted",children:["RUC: ",s.company_ruc||"N/A"]})]})},{header:"Archivo",accessor:"original_name",render:(a,s)=>{const m=Me(a);return e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"me-2",style:{fontSize:"1.2em"},children:ce(a)}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:a}),e.jsx(v,{bg:m.variant,className:"small",children:m.text})]})]})}},{header:"Categorías",accessor:"category_name",render:(a,s)=>e.jsxs("div",{children:[a&&e.jsx("div",{className:"mb-1",children:e.jsxs(v,{bg:"primary",className:"small",children:["📁 ",a]})}),s.subcategory_name&&e.jsx("div",{children:e.jsxs(v,{bg:"info",className:"small",children:["📂 ",s.subcategory_name]})}),!a&&!s.subcategory_name&&e.jsx("span",{className:"text-muted small",children:"Sin categoría"})]})},{header:"Servicios",accessor:"requiere_laboratorio",render:(a,s)=>e.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[s.requiere_laboratorio&&e.jsx(v,{bg:"warning",className:"small",children:"🧪 Lab"}),s.requiere_ingenieria&&e.jsx(v,{bg:"info",className:"small",children:"⚙️ Ing"}),s.requiere_consultoria&&e.jsx(v,{bg:"success",className:"small",children:"💼 Cons"}),s.requiere_capacitacion&&e.jsx(v,{bg:"primary",className:"small",children:"🎓 Cap"}),s.requiere_auditoria&&e.jsx(v,{bg:"secondary",className:"small",children:"📋 Aud"}),!s.requiere_laboratorio&&!s.requiere_ingenieria&&!s.requiere_consultoria&&!s.requiere_capacitacion&&!s.requiere_auditoria&&e.jsx("span",{className:"text-muted small",children:"Sin servicios"})]})},{header:"Roles",accessor:"vendedor_name",render:(a,s)=>e.jsxs("div",{children:[a&&e.jsx("div",{className:"mb-1",children:e.jsxs("div",{className:"small",children:[e.jsx(v,{bg:W(s.vendedor_role).variant,className:"small me-1",children:W(s.vendedor_role).text}),e.jsx("span",{className:"text-muted",children:a})]})}),s.laboratorio_name&&e.jsxs("div",{className:"small",children:[e.jsx(v,{bg:W(s.laboratorio_role).variant,className:"small me-1",children:W(s.laboratorio_role).text}),e.jsx("span",{className:"text-muted",children:s.laboratorio_name})]}),!a&&!s.laboratorio_name&&e.jsx("span",{className:"text-muted small",children:"Sin asignación"})]})},{header:"Subido por",accessor:"uploaded_by_name",render:(a,s)=>e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:a||"Usuario desconocido"}),e.jsx("div",{className:"small",children:e.jsx(v,{bg:W(s.uploaded_by_role).variant,className:"small",children:W(s.uploaded_by_role).text})})]})},{header:"Fecha",accessor:"created_at",render:a=>e.jsxs("div",{children:[e.jsx("div",{children:new Date(a).toLocaleDateString()}),e.jsx("small",{className:"text-muted",children:new Date(a).toLocaleTimeString()})]}),width:120},{header:"Acciones",accessor:"actions",width:180,render:(a,s)=>e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx(h,{variant:"outline-primary",size:"sm",onClick:()=>we(s),title:"Descargar",children:e.jsx(Ge,{})}),e.jsx(h,{variant:"outline-success",size:"sm",onClick:()=>Pe(s),title:"Editar",children:e.jsx(se,{})}),e.jsx(h,{variant:"outline-danger",size:"sm",onClick:()=>G(s),title:"Eliminar",children:e.jsx(le,{})})]})}],[]),Z=(u==null?void 0:u.data)||[],ee=(u==null?void 0:u.total)||0,Ie=Math.max(1,Math.ceil(ee/g)),ae=n.useMemo(()=>{const a={},s=new Set,m=new Set,j=new Set,J=new Set;let xe=0;return Z.forEach(k=>{var ge,be;const je=((be=(ge=k.original_name)==null?void 0:ge.split(".").pop())==null?void 0:be.toLowerCase())||"unknown";a[je]=(a[je]||0)+1,k.project_id&&s.add(k.project_id),k.category_name&&m.add(k.category_name),k.subcategory_name&&j.add(k.subcategory_name),k.vendedor_name&&J.add("vendedor"),k.laboratorio_name&&J.add("laboratorio"),k.file_size&&(xe+=parseInt(k.file_size))}),{total:ee,totalFiles:Z.length,totalProjects:s.size,totalCategories:m.size,totalSubcategories:j.size,totalRoles:J.size,fileTypes:Object.keys(a).length,totalSize:(xe/1024/1024).toFixed(1)+" MB"}},[Z,ee]),Ue=[{title:"Por Proyecto",options:X.map(a=>({label:`${a.name} - ${a.location}`,filter:{project_id:a.id}}))},{title:"Por Tipo de Archivo",options:[{label:"📄 PDF",filter:{file_type:"pdf"}},{label:"📝 Documentos",filter:{file_type:"doc"}},{label:"📊 Excel",filter:{file_type:"xls"}},{label:"🖼️ Imágenes",filter:{file_type:"img"}}]},{title:"Por Estado de Proyecto",options:[{label:"🟢 Activos",filter:{project_status:"activo"}},{label:"🟡 Pendientes",filter:{project_status:"pendiente"}},{label:"🔵 Completados",filter:{project_status:"completado"}},{label:"🔴 Cancelados",filter:{project_status:"cancelado"}}]}];return e.jsxs(e.Fragment,{children:[e.jsxs(ra,{fluid:!0,className:"py-4",children:[e.jsx(Ve,{title:"Gestión de Adjuntos",subtitle:"Archivos relacionados a proyectos y cotizaciones",icon:ye}),e.jsxs($,{className:"mb-4",children:[e.jsx(d,{md:6,lg:3,children:e.jsx(ie,{title:"Total Archivos",value:ae.total,icon:We,color:"primary",subtitle:"Archivos en el sistema",loading:z})}),e.jsx(d,{md:6,lg:3,children:e.jsx(ie,{title:"Proyectos",value:ae.totalProjects,icon:ye,color:"info",subtitle:"Con archivos adjuntos",loading:z})}),e.jsx(d,{md:6,lg:3,children:e.jsx(ie,{title:"Categorías",value:ae.totalCategories,icon:Xe,color:"success",subtitle:"Con archivos asignados",loading:z})}),e.jsx(d,{md:6,lg:3,children:e.jsx(ie,{title:"Espacio Usado",value:ae.totalSize,icon:ve,color:"warning",subtitle:"Almacenamiento total",loading:z})})]}),e.jsx(T,{className:"mb-4",children:e.jsx(T.Body,{children:e.jsx($,{children:e.jsxs(d,{md:12,children:[e.jsx("h6",{className:"mb-3",children:"Filtro por Cliente y Proyecto"}),e.jsx(Ce,{value:y,onChange:Y}),y.project&&e.jsx("div",{className:"mt-3",children:e.jsx(Ne,{variant:"info",className:"py-2",children:e.jsxs("small",{children:[e.jsx("strong",{children:"Proyecto seleccionado:"})," ",y.project.name," |",e.jsx("strong",{children:" Cliente:"})," ",(he=y.company)==null?void 0:he.name," |",e.jsx("strong",{children:" Ubicación:"})," ",y.project.location]})})})]})})})}),e.jsx(T,{className:"mb-4",children:e.jsx(T.Body,{children:e.jsxs($,{className:"align-items-center",children:[e.jsx(d,{md:6,children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("div",{className:"position-relative flex-grow-1",children:[e.jsx(Re,{className:"position-absolute top-50 start-0 translate-middle-y ms-3 text-muted"}),e.jsx(c.Control,{type:"text",placeholder:"Buscar por archivo, proyecto...",value:I,onChange:a=>{q(a.target.value),x(1)},className:"ps-5"})]}),e.jsx(h,{variant:"outline-secondary",onClick:()=>qe(),title:"Actualizar",children:e.jsx(Je,{})})]})}),e.jsx(d,{md:6,className:"text-end",children:e.jsx("div",{className:"d-flex gap-2 justify-content-end",children:e.jsxs(h,{variant:"outline-primary",onClick:()=>L(!0),children:[e.jsx(H,{className:"me-2"}),"Subir Archivo"]})})})]})})}),e.jsx(T,{children:e.jsx(T.Body,{className:"p-0",children:e.jsx(Ye,{columns:Te,data:Z,loading:z,currentPage:f,totalPages:Ie,onPageChange:x,totalItems:ee,itemsPerPage:g,filterOptions:Ue,onFilter:ze,emptyMessage:"No hay archivos adjuntos",emptyDescription:"Sube tu primer archivo usando el botón 'Subir Archivo'"})})})]}),S&&e.jsxs(de,{open:S,onClose:()=>L(!1),size:"xl",className:"adjuntos-modal",children:[e.jsx("div",{className:"modal-header",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(H,{className:"me-2 text-primary",size:24}),e.jsx("h4",{className:"mb-0",children:"Subir Archivo Adjunto"})]})}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:me,children:[e.jsxs($,{className:"g-3",children:[e.jsxs(d,{md:12,children:[e.jsx(c.Label,{className:"fw-medium",children:"Cliente y Proyecto *"}),e.jsx(Ce,{value:{company_id:t.company_id||null,company:t.company||null,project_id:t.project_id||null,project:t.project||null,project_name:t.project_name||"",location:t.location||""},onChange:a=>{l(s=>{var m,j;return{...s,company_id:a.company_id,company:a.company,project_id:a.project_id,project:a.project,project_name:a.project_name,location:a.location,category_id:((m=a.project)==null?void 0:m.category_id)||"",subcategory_id:((j=a.project)==null?void 0:j.subcategory_id)||""}})}})]}),e.jsxs(d,{md:12,children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx(c.Label,{className:"fw-medium mb-0",children:"Categorías Disponibles"}),e.jsx(h,{variant:"outline-secondary",size:"sm",onClick:R,title:"Actualizar lista de categorías",children:"🔄 Actualizar"})]}),e.jsx("div",{className:"border rounded p-3 bg-light",style:{maxHeight:"200px",overflowY:"auto"},children:categories.length>0?categories.map(a=>e.jsx(c.Check,{type:"checkbox",id:`category-${a.id}`,label:`📁 ${a.name}`,checked:t.category_id===a.id,onChange:s=>l(m=>({...m,category_id:s.target.checked?a.id:""})),className:"mb-2"},a.id)):e.jsx("p",{className:"text-muted mb-0",children:"No hay categorías disponibles"})}),e.jsx(c.Text,{className:"text-muted d-block mt-1",children:"Selecciona una categoría para asignar al archivo"})]}),e.jsxs(d,{md:12,children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx(c.Label,{className:"fw-medium mb-0",children:"Subcategorías Disponibles"}),e.jsx(h,{variant:"outline-secondary",size:"sm",onClick:R,title:"Actualizar lista de subcategorías",children:"🔄 Actualizar"})]}),e.jsx("div",{className:"border rounded p-3 bg-light",style:{maxHeight:"200px",overflowY:"auto"},children:subcategories.length>0?subcategories.map(a=>e.jsx(c.Check,{type:"checkbox",id:`subcategory-${a.id}`,label:`📂 ${a.name}`,checked:t.subcategory_id===a.id,onChange:s=>l(m=>({...m,subcategory_id:s.target.checked?a.id:""})),className:"mb-2"},a.id)):e.jsx("p",{className:"text-muted mb-0",children:"No hay subcategorías disponibles"})}),e.jsx(c.Text,{className:"text-muted d-block mt-1",children:"Selecciona una subcategoría para asignar al archivo"})]}),e.jsxs(d,{md:12,children:[e.jsx(c.Label,{className:"fw-medium",children:"Descripción (Opcional)"}),e.jsx(c.Control,{as:"textarea",rows:3,value:t.description,onChange:a=>l(s=>({...s,description:a.target.value})),placeholder:"Describe el contenido del archivo..."})]}),e.jsxs(d,{md:12,children:[e.jsx(c.Label,{className:"fw-medium",children:"Servicios Requeridos"}),e.jsxs("div",{className:"border rounded p-3 bg-light",children:[e.jsxs($,{children:[e.jsx(d,{md:6,children:e.jsx(c.Check,{type:"checkbox",id:"upload-requiere-laboratorio",label:"🧪 Laboratorio",checked:t.requiere_laboratorio,onChange:a=>l(s=>({...s,requiere_laboratorio:a.target.checked}))})}),e.jsx(d,{md:6,children:e.jsx(c.Check,{type:"checkbox",id:"upload-requiere-ingenieria",label:"⚙️ Ingeniería",checked:t.requiere_ingenieria,onChange:a=>l(s=>({...s,requiere_ingenieria:a.target.checked}))})}),e.jsx(d,{md:6,children:e.jsx(c.Check,{type:"checkbox",id:"upload-requiere-consultoria",label:"💼 Consultoría",checked:t.requiere_consultoria,onChange:a=>l(s=>({...s,requiere_consultoria:a.target.checked}))})}),e.jsx(d,{md:6,children:e.jsx(c.Check,{type:"checkbox",id:"upload-requiere-capacitacion",label:"🎓 Capacitación",checked:t.requiere_capacitacion,onChange:a=>l(s=>({...s,requiere_capacitacion:a.target.checked}))})}),e.jsx(d,{md:6,children:e.jsx(c.Check,{type:"checkbox",id:"upload-requiere-auditoria",label:"📋 Auditoría",checked:t.requiere_auditoria,onChange:a=>l(s=>({...s,requiere_auditoria:a.target.checked}))})})]}),e.jsx(c.Text,{className:"text-muted d-block mt-2",children:"Marca los servicios que requiere este archivo"})]})]}),e.jsxs(d,{md:12,children:[e.jsx(c.Label,{className:"fw-medium",children:"Archivo *"}),e.jsx("div",{className:`border-2 border-dashed rounded p-4 text-center ${te?"border-primary bg-light":"border-secondary"}`,onDragEnter:Ee,onDragLeave:Fe,onDragOver:Le,onDrop:De,style:{minHeight:"120px",cursor:"pointer"},onClick:()=>document.getElementById("fileInput").click(),children:t.file?e.jsxs("div",{children:[e.jsx(He,{className:"text-success mb-2",size:32}),e.jsx("div",{className:"fw-medium",children:t.file.name}),e.jsxs("small",{className:"text-muted",children:[(t.file.size/1024/1024).toFixed(2)," MB"]})]}):e.jsxs("div",{children:[e.jsx(H,{className:"text-muted mb-2",size:32}),e.jsx("div",{className:"fw-medium",children:"Arrastra y suelta tu archivo aquí"}),e.jsx("small",{className:"text-muted",children:"o haz clic para seleccionar"}),e.jsx("div",{className:"mt-2",children:e.jsx("small",{className:"text-muted",children:"Formatos permitidos: PDF, DOC, DOCX, XLS, XLSX, PPT, PPTX, JPG, PNG, GIF, TXT"})})]})}),e.jsx(c.Control,{id:"fileInput",type:"file",className:"d-none",onChange:a=>l(s=>({...s,file:a.target.files[0]})),accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.gif,.txt",required:!0})]})]}),M.isLoading&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("small",{children:"Subiendo archivo..."}),e.jsxs("small",{children:[D,"%"]})]}),e.jsx(oa,{now:D,animated:!0})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[e.jsx(h,{type:"button",variant:"outline-secondary",onClick:()=>L(!1),disabled:M.isLoading,children:"Cancelar"}),e.jsx(h,{type:"submit",variant:"primary",disabled:M.isLoading||!t.file||!t.project_id,children:M.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:"sm",className:"me-2"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"me-2"}),"Subir Archivo"]})})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"d-flex gap-2 justify-content-end",children:[e.jsx(h,{type:"button",variant:"outline-secondary",onClick:()=>L(!1),disabled:M.isLoading,children:"Cancelar"}),e.jsx(h,{type:"submit",variant:"primary",disabled:M.isLoading,onClick:me,children:M.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:"sm",className:"me-2"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"me-2"}),"Subir Archivo"]})})]})})]}),U&&p&&e.jsxs(de,{open:U,onClose:()=>B(!1),size:"xl",className:"adjuntos-modal",children:[e.jsx("div",{className:"modal-header",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(se,{className:"me-2 text-success",size:24}),e.jsx("h4",{className:"mb-0",children:"Editar Archivo Adjunto"})]})}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:ue,children:[e.jsxs($,{className:"g-3",children:[e.jsxs(d,{md:12,children:[e.jsx(c.Label,{className:"fw-medium",children:"Proyecto"}),e.jsx(c.Control,{type:"text",value:p.project_name||"Sin proyecto",readOnly:!0,className:"bg-light"})]}),e.jsxs(d,{md:12,children:[e.jsx(c.Label,{className:"fw-medium",children:"Archivo Actual"}),e.jsxs("div",{className:"d-flex align-items-center p-3 bg-light rounded",children:[e.jsx("span",{className:"me-2",style:{fontSize:"1.2em"},children:ce(p.original_name)}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:p.original_name}),e.jsxs("small",{className:"text-muted",children:[(p.file_size/1024/1024).toFixed(2)," MB"]})]})]})]}),e.jsxs(d,{md:12,children:[e.jsx(c.Label,{className:"fw-medium",children:"Nuevo Archivo (Opcional)"}),e.jsx(c.Control,{type:"file",onChange:a=>l(s=>({...s,file:a.target.files[0]})),accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.gif,.txt"}),e.jsx(c.Text,{className:"text-muted",children:"Deja vacío para mantener el archivo actual"})]}),e.jsxs(d,{md:12,children:[e.jsx(c.Label,{className:"fw-medium",children:"Descripción"}),e.jsx(c.Control,{as:"textarea",rows:3,value:t.description,onChange:a=>l(s=>({...s,description:a.target.value})),placeholder:"Describe el contenido del archivo..."})]}),e.jsxs(d,{md:12,children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx(c.Label,{className:"fw-medium mb-0",children:"Categorías Disponibles"}),e.jsx(h,{variant:"outline-secondary",size:"sm",onClick:R,title:"Actualizar lista de categorías",children:"🔄 Actualizar"})]}),e.jsx("div",{className:"border rounded p-3 bg-light",style:{maxHeight:"200px",overflowY:"auto"},children:categories.length>0?categories.map(a=>e.jsx(c.Check,{type:"checkbox",id:`edit-category-${a.id}`,label:`📁 ${a.name}`,checked:t.category_id===a.id,onChange:s=>l(m=>({...m,category_id:s.target.checked?a.id:""})),className:"mb-2"},a.id)):e.jsx("p",{className:"text-muted mb-0",children:"No hay categorías disponibles"})}),e.jsx(c.Text,{className:"text-muted d-block mt-1",children:"Selecciona una categoría para asignar al archivo"})]}),e.jsxs(d,{md:12,children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx(c.Label,{className:"fw-medium mb-0",children:"Subcategorías Disponibles"}),e.jsx(h,{variant:"outline-secondary",size:"sm",onClick:R,title:"Actualizar lista de subcategorías",children:"🔄 Actualizar"})]}),e.jsx("div",{className:"border rounded p-3 bg-light",style:{maxHeight:"200px",overflowY:"auto"},children:subcategories.length>0?subcategories.map(a=>e.jsx(c.Check,{type:"checkbox",id:`edit-subcategory-${a.id}`,label:`📂 ${a.name}`,checked:t.subcategory_id===a.id,onChange:s=>l(m=>({...m,subcategory_id:s.target.checked?a.id:""})),className:"mb-2"},a.id)):e.jsx("p",{className:"text-muted mb-0",children:"No hay subcategorías disponibles"})}),e.jsx(c.Text,{className:"text-muted d-block mt-1",children:"Selecciona una subcategoría para asignar al archivo"})]}),e.jsxs(d,{md:12,children:[e.jsx(c.Label,{className:"fw-medium",children:"Servicios Requeridos"}),e.jsxs("div",{className:"border rounded p-3 bg-light",children:[e.jsxs($,{children:[e.jsx(d,{md:6,children:e.jsx(c.Check,{type:"checkbox",id:"requiere-laboratorio",label:"🧪 Laboratorio",checked:t.requiere_laboratorio,onChange:a=>l(s=>({...s,requiere_laboratorio:a.target.checked}))})}),e.jsx(d,{md:6,children:e.jsx(c.Check,{type:"checkbox",id:"requiere-ingenieria",label:"⚙️ Ingeniería",checked:t.requiere_ingenieria,onChange:a=>l(s=>({...s,requiere_ingenieria:a.target.checked}))})}),e.jsx(d,{md:6,children:e.jsx(c.Check,{type:"checkbox",id:"requiere-consultoria",label:"💼 Consultoría",checked:t.requiere_consultoria,onChange:a=>l(s=>({...s,requiere_consultoria:a.target.checked}))})}),e.jsx(d,{md:6,children:e.jsx(c.Check,{type:"checkbox",id:"requiere-capacitacion",label:"🎓 Capacitación",checked:t.requiere_capacitacion,onChange:a=>l(s=>({...s,requiere_capacitacion:a.target.checked}))})}),e.jsx(d,{md:6,children:e.jsx(c.Check,{type:"checkbox",id:"requiere-auditoria",label:"📋 Auditoría",checked:t.requiere_auditoria,onChange:a=>l(s=>({...s,requiere_auditoria:a.target.checked}))})})]}),e.jsx(c.Text,{className:"text-muted d-block mt-2",children:"Marca los servicios que requiere este archivo"})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[e.jsx(h,{type:"button",variant:"outline-secondary",onClick:()=>B(!1),disabled:O.isLoading,children:"Cancelar"}),e.jsx(h,{type:"submit",variant:"success",disabled:O.isLoading,children:O.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:"sm",className:"me-2"}),"Actualizando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"me-2"}),"Actualizar Archivo"]})})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"d-flex gap-2 justify-content-end",children:[e.jsx(h,{type:"button",variant:"outline-secondary",onClick:()=>B(!1),disabled:O.isLoading,children:"Cancelar"}),e.jsx(h,{type:"submit",variant:"success",disabled:O.isLoading,onClick:ue,children:O.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:"sm",className:"me-2"}),"Actualizando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"me-2"}),"Actualizar Archivo"]})})]})})]}),P&&e.jsx(de,{open:!!P,onClose:()=>G(null),children:e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center mb-4",children:[e.jsx(le,{className:"me-2 text-danger",size:24}),e.jsx("h4",{className:"mb-0",children:"Confirmar Eliminación"})]}),e.jsxs(Ne,{variant:"warning",className:"mb-4",children:[e.jsx(ve,{className:"me-2"}),e.jsx("strong",{children:"¡Atención!"})," Esta acción no se puede deshacer."]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{children:"¿Estás seguro de que quieres eliminar el siguiente archivo?"}),e.jsx(T,{className:"bg-light",children:e.jsx(T.Body,{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"me-3",style:{fontSize:"1.5em"},children:ce(P.original_name)}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:P.original_name}),e.jsxs("small",{className:"text-muted",children:["Proyecto: ",P.project_name||"Sin proyecto"]})]})]})})})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx(h,{variant:"outline-secondary",onClick:()=>G(null),disabled:K.isLoading,children:"Cancelar"}),e.jsx(h,{variant:"danger",onClick:Ae,disabled:K.isLoading,children:K.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:"sm",className:"me-2"}),"Eliminando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"me-2"}),"Eliminar Archivo"]})})]})]})}),e.jsx(Qe,{message:E.message,type:E.type,onClose:()=>F({message:"",type:"success",show:!1})})]})}export{Pa as default};
//# sourceMappingURL=Adjuntos-wqA-KjkQ.js.map
