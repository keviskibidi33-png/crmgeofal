import{r as t,b as f,j as e,bf as b,N as u,f as p,l as g,X as R,$ as P}from"./index-CDayYYh0.js";import{P as E}from"./PageHeader-TwGN4X1N.js";import{S as l}from"./StatsCard-CwkDyVPe.js";import{C as n,R as d}from"./Row-CeY1UBxE.js";import{S as w}from"./Spinner-BFSKMpy4.js";import{A as T}from"./Alert-pvqi0VvY.js";import{C as r}from"./Col-Bcdl2XMD.js";import{C as a}from"./Card-DxGUdTXm.js";function $(){var m,j;const[s,N]=t.useState(null),[y,o]=t.useState(!0),[h,x]=t.useState(null);t.useEffect(()=>{v()},[]);const v=async()=>{try{o(!0),x(null);const i=await f("/api/role-dashboard/soporte");N(i)}catch(i){console.error("Error fetching dashboard data:",i),x("Error al cargar los datos del dashboard")}finally{o(!1)}};return y?e.jsx(n,{fluid:!0,className:"p-4",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:e.jsx(w,{animation:"border",size:"lg"})})}):h?e.jsx(n,{fluid:!0,className:"p-4",children:e.jsx(T,{variant:"danger",children:h})}):e.jsxs(n,{fluid:!0,className:"p-4",children:[e.jsx(E,{title:"Dashboard Soporte",subtitle:"Gestión de tickets y resolución de problemas",icon:b}),e.jsxs(d,{className:"mb-4",children:[e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Tickets Abiertos",value:(s==null?void 0:s.ticketsAbiertos)||0,icon:u,color:"warning",subtitle:"Requieren atención"})}),e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Tickets Resueltos",value:(s==null?void 0:s.ticketsResueltos)||0,icon:p,color:"success",subtitle:"Problemas solucionados"})}),e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"En Proceso",value:(s==null?void 0:s.ticketsEnProceso)||0,icon:g,color:"info",subtitle:"En análisis"})}),e.jsx(r,{lg:3,md:6,className:"mb-3",children:e.jsx(l,{title:"Total Tickets",value:(s==null?void 0:s.totalTickets)||0,icon:b,color:"primary",subtitle:"Todos los tickets"})})]}),e.jsxs(d,{className:"mb-4",children:[e.jsx(r,{lg:4,md:6,className:"mb-3",children:e.jsx(l,{title:"Alta Prioridad",value:(s==null?void 0:s.ticketsAltaPrioridad)||0,icon:R,color:"danger",subtitle:"Urgentes"})}),e.jsx(r,{lg:4,md:6,className:"mb-3",children:e.jsx(l,{title:"Media Prioridad",value:(s==null?void 0:s.ticketsMediaPrioridad)||0,icon:u,color:"warning",subtitle:"Importantes"})}),e.jsx(r,{lg:4,md:6,className:"mb-3",children:e.jsx(l,{title:"Baja Prioridad",value:(s==null?void 0:s.ticketsBajaPrioridad)||0,icon:g,color:"info",subtitle:"Rutinarios"})})]}),e.jsxs(d,{className:"mb-4",children:[e.jsx(r,{lg:6,md:6,className:"mb-3",children:e.jsx(l,{title:"Tiempo Promedio",value:`${((s==null?void 0:s.tiempoPromedioResolucion)||0).toFixed(1)}h`,icon:P,color:"primary",subtitle:"Resolución promedio"})}),e.jsx(r,{lg:6,md:6,className:"mb-3",children:e.jsx(l,{title:"Resueltos Este Mes",value:(s==null?void 0:s.ticketsResueltosEsteMes)||0,icon:p,color:"success",subtitle:"Tickets del mes"})})]}),e.jsxs(d,{className:"mb-4",children:[e.jsx(r,{lg:6,children:e.jsxs(a,{className:"shadow-sm",children:[e.jsx(a.Header,{children:e.jsx("h5",{className:"mb-0",children:"Tickets Recientes"})}),e.jsx(a.Body,{children:((m=s==null?void 0:s.ticketsRecientes)==null?void 0:m.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Título"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Prioridad"}),e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Creado por"})]})}),e.jsx("tbody",{children:s.ticketsRecientes.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"text-truncate d-inline-block",style:{maxWidth:"150px"},children:i.title})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${i.status==="resuelto"?"bg-success":i.status==="en_proceso"?"bg-warning":i.status==="abierto"?"bg-danger":"bg-secondary"}`,children:i.status})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${i.priority==="alta"?"bg-danger":i.priority==="media"?"bg-warning":i.priority==="baja"?"bg-info":"bg-secondary"}`,children:i.priority})}),e.jsx("td",{children:new Date(i.created_at).toLocaleDateString()}),e.jsx("td",{children:i.created_by_name})]},c))})]})}):e.jsx("p",{className:"text-muted",children:"No hay tickets recientes"})})]})}),e.jsx(r,{lg:6,children:e.jsxs(a,{className:"shadow-sm",children:[e.jsx(a.Header,{children:e.jsx("h5",{className:"mb-0",children:"Tickets por Resolver"})}),e.jsx(a.Body,{children:((j=s==null?void 0:s.ticketsPorResolver)==null?void 0:j.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Título"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Prioridad"}),e.jsx("th",{children:"Fecha"})]})}),e.jsx("tbody",{children:s.ticketsPorResolver.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"text-truncate d-inline-block",style:{maxWidth:"150px"},children:i.title})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${i.status==="en_proceso"?"bg-warning":i.status==="abierto"?"bg-danger":"bg-secondary"}`,children:i.status})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${i.priority==="alta"?"bg-danger":i.priority==="media"?"bg-warning":i.priority==="baja"?"bg-info":"bg-secondary"}`,children:i.priority})}),e.jsx("td",{children:new Date(i.created_at).toLocaleDateString()})]},c))})]})}):e.jsx("p",{className:"text-muted",children:"No hay tickets pendientes"})})]})})]}),e.jsx(d,{children:e.jsx(r,{children:e.jsxs(a,{className:"shadow-sm",children:[e.jsx(a.Header,{children:e.jsx("h5",{className:"mb-0",children:"Resumen de Rendimiento"})}),e.jsx(a.Body,{children:e.jsxs(d,{children:[e.jsx(r,{md:3,children:e.jsxs("div",{className:"text-center p-3",children:[e.jsx("div",{className:"display-6 text-danger",children:(s==null?void 0:s.ticketsAbiertos)||0}),e.jsx("div",{className:"text-muted",children:"Abiertos"})]})}),e.jsx(r,{md:3,children:e.jsxs("div",{className:"text-center p-3",children:[e.jsx("div",{className:"display-6 text-warning",children:(s==null?void 0:s.ticketsEnProceso)||0}),e.jsx("div",{className:"text-muted",children:"En Proceso"})]})}),e.jsx(r,{md:3,children:e.jsxs("div",{className:"text-center p-3",children:[e.jsx("div",{className:"display-6 text-success",children:(s==null?void 0:s.ticketsResueltos)||0}),e.jsx("div",{className:"text-muted",children:"Resueltos"})]})}),e.jsx(r,{md:3,children:e.jsxs("div",{className:"text-center p-3",children:[e.jsx("div",{className:"display-6 text-info",children:(s==null?void 0:s.ticketsResueltosEsteMes)||0}),e.jsx("div",{className:"text-muted",children:"Este Mes"})]})})]})})]})})})]})}export{$ as default};
//# sourceMappingURL=SoporteDashboard-DZzqszug.js.map
