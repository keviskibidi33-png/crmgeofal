import{r as a,j as e}from"./index-BFrTSJXc.js";import{M as g}from"./ModuloBase-BXjPI6cD.js";import{T as y}from"./Toolbar-CsECCMO9.js";import{D as N}from"./DataTable-CSrcfzDj.js";import{T as v}from"./Toast-BbbM5Ntr.js";function M(){const[h,b]=a.useState([]),[c,x]=a.useState(0),[t,r]=a.useState(1),[p]=a.useState(10),[i,j]=a.useState(""),[n,d]=a.useState(!1),[o,m]=a.useState({show:!1,variant:"success",message:""}),u=async()=>{try{d(!0),b([]),x(0)}catch(s){m({show:!0,variant:"danger",message:s.message||"No se pudo cargar"})}finally{d(!1)}};a.useEffect(()=>{u()},[t,i]);const f=a.useMemo(()=>[{header:"ID",key:"id",width:80},{header:"Proyecto",key:"project_name"},{header:"Archivo",key:"filename"},{header:"Subido por",key:"uploaded_by"},{header:"Fecha",key:"created_at",render:s=>s.created_at?String(s.created_at).slice(0,19).replace("T"," "):"—",width:160},{header:"Acciones",key:"actions",width:160,render:s=>e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("a",{className:"btn btn-sm btn-outline-primary",href:s.url,target:"_blank",rel:"noreferrer",children:"Ver"}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>{},children:"Eliminar"})]})}],[]),l=Math.max(1,Math.ceil((c||0)/p));return e.jsxs(g,{titulo:"Gestión de Adjuntos",descripcion:"Archivos relacionados a proyectos y cotizaciones",children:[e.jsx(y,{compact:!0,left:e.jsx("div",{className:"row g-2 w-100",children:e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("label",{className:"form-label",children:"Buscar"}),e.jsx("input",{className:"form-control",placeholder:"Nombre de archivo o proyecto",value:i,onChange:s=>{j(s.target.value),r(1)}})]})}),right:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-outline-primary",onClick:()=>{r(1),u()},disabled:n,children:n?"Cargando...":"Refrescar"}),e.jsx("button",{className:"btn btn-primary",children:"Subir archivo"})]})}),e.jsx(N,{columns:f,rows:h,loading:n}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-muted small",children:["Total: ",c]}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-outline-secondary",disabled:t<=1,onClick:()=>r(s=>Math.max(1,s-1)),children:"Anterior"}),e.jsxs("span",{className:"btn btn-outline-secondary disabled",children:[t,"/",l]}),e.jsx("button",{className:"btn btn-outline-secondary",disabled:t>=l,onClick:()=>r(s=>Math.min(l,s+1)),children:"Siguiente"})]})]}),e.jsx(v,{show:o.show,variant:o.variant,onClose:()=>m({...o,show:!1}),children:o.message})]})}export{M as default};
//# sourceMappingURL=Adjuntos-LwmxfkYM.js.map
