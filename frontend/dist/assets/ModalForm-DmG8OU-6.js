import{r as l,a7 as te,k as S,j as a,l as j,a8 as Be,a9 as Te,aa as $e,ab as P,ac as De,ad as ee,ae as Ie,af as Ae,i as se,ag as Le,ah as Oe,ai as Ue,aj as Ge,B as ae,D as qe,K as He}from"./index-Vrmn15ab.js";import{F as c}from"./InputGroup-BN0s6ecM.js";import{R as We,C as ze}from"./PageHeader-BlrN-WgO.js";function Ke(n){const t=l.useRef(n);return t.current=n,t}function _e(n){const t=Ke(n);l.useEffect(()=>()=>t.current(),[])}var D;function ne(n){if((!D&&D!==0||n)&&te){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),D=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return D}function Ve(){return l.useState(null)}const re=l.forwardRef(({className:n,bsPrefix:t,as:m="div",...d},u)=>(t=S(t,"modal-body"),a.jsx(m,{ref:u,className:j(n,t),...d})));re.displayName="ModalBody";const H=l.forwardRef(({bsPrefix:n,className:t,contentClassName:m,centered:d,size:u,fullscreen:p,children:g,scrollable:v,...y},k)=>{n=S(n,"modal");const x=`${n}-dialog`,E=typeof p=="string"?`${n}-fullscreen-${p}`:`${n}-fullscreen`;return a.jsx("div",{...y,ref:k,className:j(x,t,u&&`${n}-${u}`,d&&`${x}-centered`,v&&`${x}-scrollable`,p&&E),children:a.jsx("div",{className:j(`${n}-content`,m),children:g})})});H.displayName="ModalDialog";const oe=l.forwardRef(({className:n,bsPrefix:t,as:m="div",...d},u)=>(t=S(t,"modal-footer"),a.jsx(m,{ref:u,className:j(n,t),...d})));oe.displayName="ModalFooter";const le=l.forwardRef(({bsPrefix:n,className:t,closeLabel:m="Close",closeButton:d=!1,...u},p)=>(n=S(n,"modal-header"),a.jsx(Be,{ref:p,...u,className:j(t,n),closeLabel:m,closeButton:d})));le.displayName="ModalHeader";const Xe=Te("h4"),ce=l.forwardRef(({className:n,bsPrefix:t,as:m=Xe,...d},u)=>(t=S(t,"modal-title"),a.jsx(m,{ref:u,className:j(n,t),...d})));ce.displayName="ModalTitle";function Je(n){return a.jsx(se,{...n,timeout:null})}function Qe(n){return a.jsx(se,{...n,timeout:null})}const de=l.forwardRef(({bsPrefix:n,className:t,style:m,dialogClassName:d,contentClassName:u,children:p,dialogAs:g=H,"data-bs-theme":v,"aria-labelledby":y,"aria-describedby":k,"aria-label":x,show:E=!1,animation:h=!0,backdrop:C=!0,keyboard:b=!0,onEscapeKeyDown:M,onShow:I,onHide:w,container:R,autoFocus:f=!0,enforceFocus:A=!0,restoreFocus:L=!0,restoreFocusOptions:O,onEntered:e,onExit:r,onExiting:o,onEnter:N,onEntering:i,onExited:W,backdropClassName:z,manager:K,...ie},me)=>{const[he,pe]=l.useState({}),[xe,_]=l.useState(!1),U=l.useRef(!1),G=l.useRef(!1),B=l.useRef(null),[T,ge]=Ve(),je=$e(me,ge),V=P(w),ye=De();n=S(n,"modal");const be=l.useMemo(()=>({onHide:V}),[V]);function X(){return K||Le({isRTL:ye})}function J(s){if(!te)return;const F=X().getScrollbarWidth()>0,Z=s.scrollHeight>Ue(s).documentElement.clientHeight;pe({paddingRight:F&&!Z?ne():void 0,paddingLeft:!F&&Z?ne():void 0})}const q=P(()=>{T&&J(T.dialog)});_e(()=>{ee(window,"resize",q),B.current==null||B.current()});const Ne=()=>{U.current=!0},ve=s=>{U.current&&T&&s.target===T.dialog&&(G.current=!0),U.current=!1},Q=()=>{_(!0),B.current=Ge(T.dialog,()=>{_(!1)})},Ce=s=>{s.target===s.currentTarget&&Q()},Me=s=>{if(C==="static"){Ce(s);return}if(G.current||s.target!==s.currentTarget){G.current=!1;return}w==null||w()},we=s=>{b?M==null||M(s):(s.preventDefault(),C==="static"&&Q())},Re=(s,F)=>{s&&J(s),N==null||N(s,F)},Se=s=>{B.current==null||B.current(),r==null||r(s)},fe=(s,F)=>{i==null||i(s,F),Oe(window,"resize",q)},Fe=s=>{s&&(s.style.display=""),W==null||W(s),ee(window,"resize",q)},ke=l.useCallback(s=>a.jsx("div",{...s,className:j(`${n}-backdrop`,z,!h&&"show")}),[h,z,n]),Y={...m,...he};Y.display="block";const Ee=s=>a.jsx("div",{role:"dialog",...s,style:Y,className:j(t,n,xe&&`${n}-static`,!h&&"show"),onClick:C?Me:void 0,onMouseUp:ve,"data-bs-theme":v,"aria-label":x,"aria-labelledby":y,"aria-describedby":k,children:a.jsx(g,{...ie,onMouseDown:Ne,className:d,contentClassName:u,children:p})});return a.jsx(Ie.Provider,{value:be,children:a.jsx(Ae,{show:E,ref:je,backdrop:C,container:R,keyboard:!0,autoFocus:f,enforceFocus:A,restoreFocus:L,restoreFocusOptions:O,onEscapeKeyDown:we,onShow:I,onHide:w,onEnter:Re,onEntering:fe,onEntered:e,onExit:Se,onExiting:o,onExited:Fe,manager:X(),transition:h?Je:void 0,backdropTransition:h?Qe:void 0,renderBackdrop:ke,renderDialog:Ee})})});de.displayName="Modal";const $=Object.assign(de,{Body:re,Header:le,Title:ce,Footer:oe,Dialog:H,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),ue=l.forwardRef(({bsPrefix:n,variant:t,animation:m="border",size:d,as:u="div",className:p,...g},v)=>{n=S(n,"spinner");const y=`${n}-${m}`;return a.jsx(u,{ref:v,...g,className:j(p,y,d&&`${y}-${d}`,t&&`text-${t}`)})});ue.displayName="Spinner";const ea=({show:n,onHide:t,title:m,data:d={},fields:u=[],onSubmit:p,loading:g=!1,size:v="lg",submitText:y="Guardar",cancelText:k="Cancelar",validation:x={},className:E=""})=>{const[h,C]=l.useState({}),[b,M]=l.useState({}),[I,w]=l.useState({});l.useEffect(()=>{n&&(C(d),M({}),w({}))},[n,d]);const R=(e,r)=>{C(o=>({...o,[e]:r})),b[e]&&M(o=>({...o,[e]:null}))},f=e=>{if(w(r=>({...r,[e]:!0})),x[e]){const r=x[e](h[e],h);r&&M(o=>({...o,[e]:r}))}},A=()=>{const e={};let r=!0;return u.forEach(o=>{if(o.required&&(!h[o.name]||h[o.name]===""))e[o.name]=`${o.label} es requerido`,r=!1;else if(x[o.name]){const N=x[o.name](h[o.name],h);N&&(e[o.name]=N,r=!1)}}),M(e),r},L=async e=>{if(e.preventDefault(),A())try{await p(h),t()}catch(r){console.error("Error submitting form:",r)}},O=e=>{var N;const r=I[e.name]&&b[e.name],o=h[e.name]||"";switch(e.type){case"text":case"email":case"password":return a.jsxs(c.Group,{className:"mb-3",children:[a.jsxs(c.Label,{children:[e.label,e.required&&a.jsx("span",{className:"text-danger ms-1",children:"*"})]}),a.jsx(c.Control,{type:e.type,name:e.name,value:o,onChange:i=>R(e.name,i.target.value),onBlur:()=>f(e.name),isInvalid:r,placeholder:e.placeholder,disabled:e.disabled}),r&&a.jsx(c.Control.Feedback,{type:"invalid",children:b[e.name]}),e.help&&a.jsx(c.Text,{className:"text-muted",children:e.help})]},e.name);case"textarea":return a.jsxs(c.Group,{className:"mb-3",children:[a.jsxs(c.Label,{children:[e.label,e.required&&a.jsx("span",{className:"text-danger ms-1",children:"*"})]}),a.jsx(c.Control,{as:"textarea",rows:e.rows||3,name:e.name,value:o,onChange:i=>R(e.name,i.target.value),onBlur:()=>f(e.name),isInvalid:r,placeholder:e.placeholder}),r&&a.jsx(c.Control.Feedback,{type:"invalid",children:b[e.name]})]},e.name);case"select":return a.jsxs(c.Group,{className:"mb-3",children:[a.jsxs(c.Label,{children:[e.label,e.required&&a.jsx("span",{className:"text-danger ms-1",children:"*"})]}),a.jsxs(c.Select,{name:e.name,value:o,onChange:i=>R(e.name,i.target.value),onBlur:()=>f(e.name),isInvalid:r,children:[a.jsx("option",{value:"",children:"Seleccionar..."}),(N=e.options)==null?void 0:N.map(i=>a.jsx("option",{value:i.value,children:i.label},i.value))]}),r&&a.jsx(c.Control.Feedback,{type:"invalid",children:b[e.name]})]},e.name);case"number":return a.jsxs(c.Group,{className:"mb-3",children:[a.jsxs(c.Label,{children:[e.label,e.required&&a.jsx("span",{className:"text-danger ms-1",children:"*"})]}),a.jsx(c.Control,{type:"number",name:e.name,value:o,onChange:i=>R(e.name,parseFloat(i.target.value)||""),onBlur:()=>f(e.name),isInvalid:r,placeholder:e.placeholder,min:e.min,max:e.max,step:e.step}),r&&a.jsx(c.Control.Feedback,{type:"invalid",children:b[e.name]})]},e.name);case"checkbox":return a.jsx(c.Group,{className:"mb-3",children:a.jsx(c.Check,{type:"checkbox",name:e.name,checked:!!o,onChange:i=>R(e.name,i.target.checked),label:e.label})},e.name);default:return null}};return a.jsxs($,{show:n,onHide:t,size:v,className:E,children:[a.jsx($.Header,{closeButton:!0,className:"border-0 pb-0",children:a.jsx($.Title,{className:"fw-bold",children:m})}),a.jsxs(c,{onSubmit:L,children:[a.jsx($.Body,{className:"pt-0",children:a.jsx(We,{children:u.map(e=>a.jsx(ze,{md:e.col||12,children:O(e)},e.name))})}),a.jsxs($.Footer,{className:"border-0 pt-0",children:[a.jsxs(ae,{variant:"outline-secondary",onClick:t,disabled:g,children:[a.jsx(qe,{className:"me-1"}),k]}),a.jsx(ae,{type:"submit",variant:"primary",disabled:g,children:g?a.jsxs(a.Fragment,{children:[a.jsx(ue,{size:"sm",className:"me-1"}),"Guardando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(He,{className:"me-1"}),y]})})]})]})]})};export{ea as M};
//# sourceMappingURL=ModalForm-DmG8OU-6.js.map
