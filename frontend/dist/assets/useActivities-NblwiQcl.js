import{b as h,E as y,aH as A,c as g}from"./index-VjS0hY4d.js";const m=(c={})=>{const t=new URLSearchParams(c).toString(),i=t?`/api/activities/recent?${t}`:"/api/activities/recent";return h(i)},U=(c={})=>{var u,d,l,o;const t=y(),{limit:i=4,refetchInterval:r=3e5,staleTime:v=6e4,enabled:p=!0,userId:n=null,role:a=null}=c;A({onNewNotification:e=>{e.type&&(e.type.includes("quote")||e.type.includes("project")||e.type.includes("ticket")||e.type.includes("evidence")||e.type.includes("user")||e.type.includes("client"))&&t.invalidateQueries(["recentActivities"])},onUnreadCountUpdate:()=>{t.invalidateQueries(["recentActivities"])}});const s=g(["recentActivities",{limit:i,userId:n,role:a}],()=>m({limit:i,userId:n,role:a}),{enabled:p,refetchInterval:r,staleTime:v,refetchOnWindowFocus:!0,refetchOnMount:!0,retry:2,retryDelay:5e3,cacheTime:3e5,networkMode:"online",onError:e=>{console.warn("Error loading activities:",e)}});return{...s,refreshActivities:()=>{t.invalidateQueries(["recentActivities"])},getCachedActivities:()=>t.getQueryData(["recentActivities",{limit:i}]),hasActivities:((d=(u=s.data)==null?void 0:u.activities)==null?void 0:d.length)>0,activitiesCount:((o=(l=s.data)==null?void 0:l.activities)==null?void 0:o.length)||0,isOptimized:!0,lastFetch:s.dataUpdatedAt,nextFetch:s.dataUpdatedAt+r}};export{U as u};
//# sourceMappingURL=useActivities-NblwiQcl.js.map
